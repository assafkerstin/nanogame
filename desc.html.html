<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=DFQxm4rd7fRHgM9OTejWVT5Vho6BE7M80rHXEVKqXWegg2XYR88pwOsaJkfiF7cJu5e0vFtnyLdhsxviZUUN-U0KZVwUvSK-LyXz4qcE1hc);ol.lst-kix_list_7-0{list-style-type:none}.lst-kix_list_14-1>li:before{content:"\0025cb   "}.lst-kix_list_14-3>li:before{content:"\0025a0   "}ol.lst-kix_list_9-0.start{counter-reset:lst-ctn-kix_list_9-0 0}.lst-kix_list_14-0>li:before{content:"\0025cf   "}.lst-kix_list_14-4>li:before{content:"\0025a0   "}.lst-kix_list_14-5>li:before{content:"\0025a0   "}.lst-kix_list_14-7>li:before{content:"\0025a0   "}.lst-kix_list_14-6>li:before{content:"\0025a0   "}ul.lst-kix_list_9-3{list-style-type:none}ul.lst-kix_list_9-4{list-style-type:none}ul.lst-kix_list_9-1{list-style-type:none}ul.lst-kix_list_9-7{list-style-type:none}ul.lst-kix_list_9-8{list-style-type:none}ul.lst-kix_list_9-5{list-style-type:none}.lst-kix_list_5-0>li{counter-increment:lst-ctn-kix_list_5-0}.lst-kix_list_9-0>li{counter-increment:lst-ctn-kix_list_9-0}ul.lst-kix_list_9-6{list-style-type:none}ol.lst-kix_list_7-2{list-style-type:none}.lst-kix_list_14-2>li:before{content:"\0025a0   "}.lst-kix_list_1f-0>li:before{content:"\0025cf   "}.lst-kix_list_1f-1>li:before{content:"\0025cb   "}.lst-kix_list_1f-2>li:before{content:"\0025a0   "}ul.lst-kix_list_17-1{list-style-type:none}ol.lst-kix_list_12-0.start{counter-reset:lst-ctn-kix_list_12-0 0}ul.lst-kix_list_17-0{list-style-type:none}.lst-kix_list_1f-3>li:before{content:"\0025a0   "}.lst-kix_list_1f-6>li:before{content:"\0025a0   "}ul.lst-kix_list_17-8{list-style-type:none}ul.lst-kix_list_17-7{list-style-type:none}ul.lst-kix_list_17-6{list-style-type:none}.lst-kix_list_1f-4>li:before{content:"\0025a0   "}.lst-kix_list_1f-8>li:before{content:"\0025a0   "}ul.lst-kix_list_17-5{list-style-type:none}ul.lst-kix_list_17-4{list-style-type:none}.lst-kix_list_1f-5>li:before{content:"\0025a0   "}ul.lst-kix_list_17-3{list-style-type:none}.lst-kix_list_14-8>li:before{content:"\0025a0   "}ul.lst-kix_list_17-2{list-style-type:none}.lst-kix_list_3-2>li{counter-increment:lst-ctn-kix_list_3-2}.lst-kix_list_1f-7>li:before{content:"\0025a0   "}.lst-kix_list_7-2>li{counter-increment:lst-ctn-kix_list_7-2}.lst-kix_list_5-0>li:before{content:"" counter(lst-ctn-kix_list_5-0,decimal) ". "}ol.lst-kix_list_6-0{list-style-type:none}.lst-kix_list_5-3>li:before{content:"\0025a0   "}.lst-kix_list_5-2>li:before{content:"" counter(lst-ctn-kix_list_5-2,decimal) ". "}.lst-kix_list_5-1>li:before{content:"\0025cb   "}.lst-kix_list_5-7>li:before{content:"\0025a0   "}ul.lst-kix_list_8-4{list-style-type:none}ul.lst-kix_list_8-5{list-style-type:none}.lst-kix_list_5-6>li:before{content:"\0025a0   "}.lst-kix_list_5-8>li:before{content:"\0025a0   "}ul.lst-kix_list_8-3{list-style-type:none}ul.lst-kix_list_8-8{list-style-type:none}ul.lst-kix_list_1f-0{list-style-type:none}ul.lst-kix_list_8-6{list-style-type:none}ul.lst-kix_list_1f-1{list-style-type:none}ul.lst-kix_list_8-7{list-style-type:none}ul.lst-kix_list_1f-2{list-style-type:none}.lst-kix_list_5-4>li:before{content:"\0025a0   "}.lst-kix_list_5-5>li:before{content:"\0025a0   "}ol.lst-kix_list_6-2{list-style-type:none}ul.lst-kix_list_8-1{list-style-type:none}.lst-kix_list_6-1>li:before{content:"\0025cb   "}.lst-kix_list_6-3>li:before{content:"\0025a0   "}.lst-kix_list_6-0>li:before{content:"" counter(lst-ctn-kix_list_6-0,decimal) ". "}.lst-kix_list_6-4>li:before{content:"\0025a0   "}ul.lst-kix_list_16-2{list-style-type:none}ul.lst-kix_list_16-1{list-style-type:none}ul.lst-kix_list_16-0{list-style-type:none}.lst-kix_list_6-2>li:before{content:"" counter(lst-ctn-kix_list_6-2,decimal) ". "}ul.lst-kix_list_16-8{list-style-type:none}ul.lst-kix_list_16-7{list-style-type:none}ul.lst-kix_list_16-6{list-style-type:none}ol.lst-kix_list_3-2.start{counter-reset:lst-ctn-kix_list_3-2 0}ul.lst-kix_list_16-5{list-style-type:none}ul.lst-kix_list_16-4{list-style-type:none}.lst-kix_list_6-8>li:before{content:"\0025a0   "}ul.lst-kix_list_16-3{list-style-type:none}.lst-kix_list_6-5>li:before{content:"\0025a0   "}.lst-kix_list_6-7>li:before{content:"\0025a0   "}.lst-kix_list_6-6>li:before{content:"\0025a0   "}.lst-kix_list_7-4>li:before{content:"\0025a0   "}.lst-kix_list_7-6>li:before{content:"\0025a0   "}ol.lst-kix_list_6-2.start{counter-reset:lst-ctn-kix_list_6-2 0}.lst-kix_list_22-2>li:before{content:"\0025a0   "}.lst-kix_list_22-6>li:before{content:"\0025a0   "}.lst-kix_list_7-2>li:before{content:"" counter(lst-ctn-kix_list_7-2,decimal) ". "}.lst-kix_list_1e-1>li:before{content:"\0025cb   "}.lst-kix_list_22-0>li:before{content:"\0025cf   "}.lst-kix_list_22-8>li:before{content:"\0025a0   "}.lst-kix_list_1e-3>li:before{content:"\0025a0   "}.lst-kix_list_13-7>li:before{content:"\0025a0   "}ol.lst-kix_list_3-0.start{counter-reset:lst-ctn-kix_list_3-0 0}.lst-kix_list_1e-7>li:before{content:"\0025a0   "}.lst-kix_list_7-8>li:before{content:"\0025a0   "}.lst-kix_list_1e-5>li:before{content:"\0025a0   "}ol.lst-kix_list_9-0{list-style-type:none}ol.lst-kix_list_9-2{list-style-type:none}.lst-kix_list_22-4>li:before{content:"\0025a0   "}.lst-kix_list_15-5>li:before{content:"\0025a0   "}.lst-kix_list_4-1>li:before{content:"\0025cb   "}.lst-kix_list_15-7>li:before{content:"\0025a0   "}ul.lst-kix_list_19-7{list-style-type:none}ul.lst-kix_list_19-6{list-style-type:none}.lst-kix_list_4-3>li:before{content:"\0025a0   "}.lst-kix_list_4-5>li:before{content:"\0025a0   "}ul.lst-kix_list_19-5{list-style-type:none}ul.lst-kix_list_19-4{list-style-type:none}ul.lst-kix_list_19-3{list-style-type:none}ul.lst-kix_list_19-2{list-style-type:none}ul.lst-kix_list_19-1{list-style-type:none}ol.lst-kix_list_e-0.start{counter-reset:lst-ctn-kix_list_e-0 0}ul.lst-kix_list_19-0{list-style-type:none}.lst-kix_list_15-1>li:before{content:"\0025cb   "}.lst-kix_list_15-3>li:before{content:"\0025a0   "}ul.lst-kix_list_19-8{list-style-type:none}ol.lst-kix_list_9-2.start{counter-reset:lst-ctn-kix_list_9-2 0}.lst-kix_list_12-3>li:before{content:"\0025a0   "}ol.lst-kix_list_b-0.start{counter-reset:lst-ctn-kix_list_b-0 0}.lst-kix_list_12-1>li:before{content:"\0025cb   "}ol.lst-kix_list_8-0{list-style-type:none}ol.lst-kix_list_1c-1.start{counter-reset:lst-ctn-kix_list_1c-1 0}ol.lst-kix_list_8-2{list-style-type:none}.lst-kix_list_e-0>li{counter-increment:lst-ctn-kix_list_e-0}.lst-kix_list_b-0>li{counter-increment:lst-ctn-kix_list_b-0}.lst-kix_list_13-3>li:before{content:"\0025a0   "}ul.lst-kix_list_18-0{list-style-type:none}.lst-kix_list_13-5>li:before{content:"\0025a0   "}.lst-kix_list_12-5>li:before{content:"\0025a0   "}ul.lst-kix_list_18-8{list-style-type:none}ul.lst-kix_list_18-7{list-style-type:none}ul.lst-kix_list_18-6{list-style-type:none}ul.lst-kix_list_18-5{list-style-type:none}.lst-kix_list_12-7>li:before{content:"\0025a0   "}ul.lst-kix_list_18-4{list-style-type:none}ul.lst-kix_list_18-3{list-style-type:none}ul.lst-kix_list_18-2{list-style-type:none}ol.lst-kix_list_6-0.start{counter-reset:lst-ctn-kix_list_6-0 0}ul.lst-kix_list_18-1{list-style-type:none}.lst-kix_list_4-2>li{counter-increment:lst-ctn-kix_list_4-2}.lst-kix_list_13-1>li:before{content:"\0025cb   "}ul.lst-kix_list_f-7{list-style-type:none}ol.lst-kix_list_3-2{list-style-type:none}ul.lst-kix_list_f-6{list-style-type:none}ul.lst-kix_list_f-5{list-style-type:none}ul.lst-kix_list_f-4{list-style-type:none}ol.lst-kix_list_3-0{list-style-type:none}ul.lst-kix_list_f-8{list-style-type:none}.lst-kix_list_1d-7>li:before{content:"\0025a0   "}ul.lst-kix_list_f-3{list-style-type:none}.lst-kix_list_3-0>li:before{content:"" counter(lst-ctn-kix_list_3-0,decimal) ". "}ul.lst-kix_list_f-2{list-style-type:none}ul.lst-kix_list_f-1{list-style-type:none}ul.lst-kix_list_f-0{list-style-type:none}ul.lst-kix_list_5-7{list-style-type:none}ul.lst-kix_list_5-8{list-style-type:none}ul.lst-kix_list_5-5{list-style-type:none}ul.lst-kix_list_1c-0{list-style-type:none}ol.lst-kix_list_c-0.start{counter-reset:lst-ctn-kix_list_c-0 0}ul.lst-kix_list_5-6{list-style-type:none}.lst-kix_list_21-8>li:before{content:"\0025a0   "}ul.lst-kix_list_1c-2{list-style-type:none}ul.lst-kix_list_1c-3{list-style-type:none}.lst-kix_list_4-0>li{counter-increment:lst-ctn-kix_list_4-0}ul.lst-kix_list_1c-4{list-style-type:none}.lst-kix_list_8-0>li{counter-increment:lst-ctn-kix_list_8-0}ul.lst-kix_list_1c-5{list-style-type:none}.lst-kix_list_3-4>li:before{content:"\0025a0   "}ul.lst-kix_list_5-3{list-style-type:none}.lst-kix_list_3-3>li:before{content:"\0025a0   "}ul.lst-kix_list_5-4{list-style-type:none}ol.lst-kix_list_1b-1{list-style-type:none}ul.lst-kix_list_5-1{list-style-type:none}.lst-kix_list_8-0>li:before{content:"" counter(lst-ctn-kix_list_8-0,decimal) ". "}.lst-kix_list_8-7>li:before{content:"\0025a0   "}.lst-kix_list_3-8>li:before{content:"\0025a0   "}.lst-kix_list_f-6>li:before{content:"\0025a0   "}.lst-kix_list_21-0>li:before{content:"\0025cf   "}.lst-kix_list_a-7>li:before{content:"\0025a0   "}.lst-kix_list_f-7>li:before{content:"\0025a0   "}.lst-kix_list_21-1>li:before{content:"\0025cb   "}.lst-kix_list_8-3>li:before{content:"\0025a0   "}ul.lst-kix_list_13-5{list-style-type:none}ul.lst-kix_list_1d-5{list-style-type:none}ul.lst-kix_list_13-4{list-style-type:none}ul.lst-kix_list_1d-6{list-style-type:none}ul.lst-kix_list_13-3{list-style-type:none}ul.lst-kix_list_1d-7{list-style-type:none}ul.lst-kix_list_13-2{list-style-type:none}ul.lst-kix_list_1d-8{list-style-type:none}ul.lst-kix_list_13-1{list-style-type:none}.lst-kix_list_3-7>li:before{content:"\0025a0   "}ul.lst-kix_list_13-0{list-style-type:none}.lst-kix_list_8-4>li:before{content:"\0025a0   "}.lst-kix_list_a-2>li:before{content:"" counter(lst-ctn-kix_list_a-2,decimal) ". "}ul.lst-kix_list_13-8{list-style-type:none}.lst-kix_list_a-3>li:before{content:"\0025a0   "}.lst-kix_list_11-1>li:before{content:"\0025cb   "}ul.lst-kix_list_13-7{list-style-type:none}ul.lst-kix_list_13-6{list-style-type:none}.lst-kix_list_f-3>li:before{content:"\0025a0   "}.lst-kix_list_21-5>li:before{content:"\0025a0   "}.lst-kix_list_a-6>li:before{content:"\0025a0   "}.lst-kix_list_f-2>li:before{content:"\0025a0   "}.lst-kix_list_21-4>li:before{content:"\0025a0   "}.lst-kix_list_11-0>li:before{content:"\0025cf   "}.lst-kix_list_8-8>li:before{content:"\0025a0   "}ol.lst-kix_list_2-2{list-style-type:none}ul.lst-kix_list_e-8{list-style-type:none}.lst-kix_list_16-8>li:before{content:"\0025a0   "}ul.lst-kix_list_e-7{list-style-type:none}ul.lst-kix_list_e-6{list-style-type:none}.lst-kix_list_16-7>li:before{content:"\0025a0   "}ol.lst-kix_list_7-2.start{counter-reset:lst-ctn-kix_list_7-2 0}ul.lst-kix_list_e-5{list-style-type:none}.lst-kix_list_e-3>li:before{content:"\0025a0   "}.lst-kix_list_e-7>li:before{content:"\0025a0   "}ol.lst-kix_list_2-0{list-style-type:none}.lst-kix_list_e-2>li:before{content:"\0025a0   "}.lst-kix_list_e-6>li:before{content:"\0025a0   "}.lst-kix_list_4-8>li:before{content:"\0025a0   "}.lst-kix_list_4-7>li:before{content:"\0025a0   "}.lst-kix_list_17-0>li:before{content:"\0025cf   "}ul.lst-kix_list_e-4{list-style-type:none}ul.lst-kix_list_e-3{list-style-type:none}ul.lst-kix_list_e-2{list-style-type:none}ul.lst-kix_list_e-1{list-style-type:none}ul.lst-kix_list_4-8{list-style-type:none}.lst-kix_list_16-0>li:before{content:"\0025cf   "}ul.lst-kix_list_1b-0{list-style-type:none}ul.lst-kix_list_4-6{list-style-type:none}ul.lst-kix_list_4-7{list-style-type:none}ol.lst-kix_list_12-0{list-style-type:none}ul.lst-kix_list_1b-2{list-style-type:none}ul.lst-kix_list_1b-3{list-style-type:none}ul.lst-kix_list_1b-4{list-style-type:none}ul.lst-kix_list_1b-5{list-style-type:none}ul.lst-kix_list_1b-6{list-style-type:none}.lst-kix_list_16-4>li:before{content:"\0025a0   "}ul.lst-kix_list_4-1{list-style-type:none}.lst-kix_list_16-3>li:before{content:"\0025a0   "}.lst-kix_list_1c-3>li:before{content:"\0025a0   "}ul.lst-kix_list_4-4{list-style-type:none}ol.lst-kix_list_1c-1{list-style-type:none}ul.lst-kix_list_4-5{list-style-type:none}ul.lst-kix_list_4-3{list-style-type:none}.lst-kix_list_1c-7>li:before{content:"\0025a0   "}.lst-kix_list_1c-6>li:before{content:"\0025a0   "}ul.lst-kix_list_12-6{list-style-type:none}ul.lst-kix_list_1c-6{list-style-type:none}ul.lst-kix_list_12-5{list-style-type:none}ul.lst-kix_list_1c-7{list-style-type:none}.lst-kix_list_17-7>li:before{content:"\0025a0   "}ul.lst-kix_list_12-4{list-style-type:none}ul.lst-kix_list_1c-8{list-style-type:none}ul.lst-kix_list_12-3{list-style-type:none}ul.lst-kix_list_12-2{list-style-type:none}ul.lst-kix_list_12-1{list-style-type:none}.lst-kix_list_17-8>li:before{content:"\0025a0   "}.lst-kix_list_17-3>li:before{content:"\0025a0   "}.lst-kix_list_17-4>li:before{content:"\0025a0   "}.lst-kix_list_1d-2>li:before{content:"\0025a0   "}ul.lst-kix_list_12-8{list-style-type:none}ol.lst-kix_list_c-0{list-style-type:none}ul.lst-kix_list_12-7{list-style-type:none}.lst-kix_list_1d-3>li:before{content:"\0025a0   "}.lst-kix_list_1b-1>li{counter-increment:lst-ctn-kix_list_1b-1}ol.lst-kix_list_8-0.start{counter-reset:lst-ctn-kix_list_8-0 0}.lst-kix_list_7-0>li:before{content:"" counter(lst-ctn-kix_list_7-0,decimal) ". "}.lst-kix_list_1d-6>li:before{content:"\0025a0   "}.lst-kix_list_2-2>li{counter-increment:lst-ctn-kix_list_2-2}ol.lst-kix_list_5-0{list-style-type:none}ol.lst-kix_list_5-2{list-style-type:none}.lst-kix_list_22-5>li:before{content:"\0025a0   "}.lst-kix_list_2-4>li:before{content:"\0025a0   "}.lst-kix_list_2-8>li:before{content:"\0025a0   "}.lst-kix_list_b-2>li{counter-increment:lst-ctn-kix_list_b-2}.lst-kix_list_22-1>li:before{content:"\0025cb   "}.lst-kix_list_7-3>li:before{content:"\0025a0   "}.lst-kix_list_1e-2>li:before{content:"\0025a0   "}ul.lst-kix_list_7-5{list-style-type:none}.lst-kix_list_10-0>li:before{content:"\0025cf   "}ul.lst-kix_list_7-6{list-style-type:none}ul.lst-kix_list_7-3{list-style-type:none}ul.lst-kix_list_7-4{list-style-type:none}.lst-kix_list_13-8>li:before{content:"\0025a0   "}ul.lst-kix_list_1e-0{list-style-type:none}ul.lst-kix_list_1e-1{list-style-type:none}.lst-kix_list_b-3>li:before{content:"\0025a0   "}.lst-kix_list_b-7>li:before{content:"\0025a0   "}.lst-kix_list_18-3>li:before{content:"\0025a0   "}.lst-kix_list_18-7>li:before{content:"\0025a0   "}ul.lst-kix_list_7-7{list-style-type:none}ul.lst-kix_list_1e-2{list-style-type:none}ul.lst-kix_list_7-8{list-style-type:none}ul.lst-kix_list_1e-3{list-style-type:none}ul.lst-kix_list_7-1{list-style-type:none}.lst-kix_list_1e-6>li:before{content:"\0025a0   "}.lst-kix_list_7-7>li:before{content:"\0025a0   "}.lst-kix_list_15-4>li:before{content:"\0025a0   "}.lst-kix_list_10-4>li:before{content:"\0025a0   "}.lst-kix_list_10-8>li:before{content:"\0025a0   "}.lst-kix_list_4-0>li:before{content:"" counter(lst-ctn-kix_list_4-0,decimal) ". "}ul.lst-kix_list_1f-3{list-style-type:none}ul.lst-kix_list_15-3{list-style-type:none}ul.lst-kix_list_1f-4{list-style-type:none}ul.lst-kix_list_15-2{list-style-type:none}ul.lst-kix_list_1f-5{list-style-type:none}.lst-kix_list_15-0>li:before{content:"\0025cf   "}ul.lst-kix_list_15-1{list-style-type:none}.lst-kix_list_15-8>li:before{content:"\0025a0   "}ul.lst-kix_list_1f-6{list-style-type:none}ul.lst-kix_list_15-0{list-style-type:none}ul.lst-kix_list_1f-7{list-style-type:none}ul.lst-kix_list_1f-8{list-style-type:none}.lst-kix_list_4-4>li:before{content:"\0025a0   "}ol.lst-kix_list_2-2.start{counter-reset:lst-ctn-kix_list_2-2 0}ul.lst-kix_list_15-8{list-style-type:none}ul.lst-kix_list_15-7{list-style-type:none}ul.lst-kix_list_15-6{list-style-type:none}.lst-kix_list_9-3>li:before{content:"\0025a0   "}ul.lst-kix_list_15-5{list-style-type:none}ul.lst-kix_list_15-4{list-style-type:none}ol.lst-kix_list_7-0.start{counter-reset:lst-ctn-kix_list_7-0 0}.lst-kix_list_1c-1>li{counter-increment:lst-ctn-kix_list_1c-1}ol.lst-kix_list_4-0{list-style-type:none}.lst-kix_list_1b-3>li:before{content:"\0025a0   "}ol.lst-kix_list_4-2{list-style-type:none}.lst-kix_list_9-7>li:before{content:"\0025a0   "}.lst-kix_list_11-4>li:before{content:"\0025a0   "}.lst-kix_list_12-4>li:before{content:"\0025a0   "}ul.lst-kix_list_6-6{list-style-type:none}ul.lst-kix_list_6-7{list-style-type:none}ul.lst-kix_list_6-4{list-style-type:none}.lst-kix_list_20-5>li:before{content:"\0025a0   "}ul.lst-kix_list_6-5{list-style-type:none}ul.lst-kix_list_1d-0{list-style-type:none}ul.lst-kix_list_1d-1{list-style-type:none}ul.lst-kix_list_1d-2{list-style-type:none}ul.lst-kix_list_6-8{list-style-type:none}ul.lst-kix_list_1d-3{list-style-type:none}ul.lst-kix_list_1d-4{list-style-type:none}.lst-kix_list_1-0>li:before{content:"" counter(lst-ctn-kix_list_1-0,decimal) ". "}.lst-kix_list_1a-3>li:before{content:"\0025a0   "}.lst-kix_list_20-1>li:before{content:"\0025cb   "}.lst-kix_list_11-8>li:before{content:"\0025a0   "}ul.lst-kix_list_6-3{list-style-type:none}ol.lst-kix_list_2-0.start{counter-reset:lst-ctn-kix_list_2-0 0}.lst-kix_list_12-0>li:before{content:"" counter(lst-ctn-kix_list_12-0,decimal) ". "}ul.lst-kix_list_6-1{list-style-type:none}.lst-kix_list_1-4>li:before{content:"\0025a0   "}.lst-kix_list_13-0>li:before{content:"\0025cf   "}ul.lst-kix_list_14-4{list-style-type:none}ul.lst-kix_list_1e-4{list-style-type:none}ul.lst-kix_list_14-3{list-style-type:none}ul.lst-kix_list_1e-5{list-style-type:none}ul.lst-kix_list_14-2{list-style-type:none}ul.lst-kix_list_1e-6{list-style-type:none}.lst-kix_list_13-4>li:before{content:"\0025a0   "}ul.lst-kix_list_14-1{list-style-type:none}ul.lst-kix_list_1e-7{list-style-type:none}ul.lst-kix_list_14-0{list-style-type:none}ul.lst-kix_list_1e-8{list-style-type:none}ol.lst-kix_list_e-0{list-style-type:none}ul.lst-kix_list_14-8{list-style-type:none}ul.lst-kix_list_14-7{list-style-type:none}.lst-kix_list_2-0>li:before{content:"" counter(lst-ctn-kix_list_2-0,decimal) ". "}ul.lst-kix_list_14-6{list-style-type:none}ul.lst-kix_list_14-5{list-style-type:none}.lst-kix_list_1-8>li:before{content:"\0025a0   "}.lst-kix_list_12-8>li:before{content:"\0025a0   "}.lst-kix_list_8-2>li{counter-increment:lst-ctn-kix_list_8-2}ul.lst-kix_list_20-2{list-style-type:none}.lst-kix_list_c-0>li:before{content:"" counter(lst-ctn-kix_list_c-0,decimal) ". "}ul.lst-kix_list_20-3{list-style-type:none}.lst-kix_list_19-0>li:before{content:"\0025cf   "}.lst-kix_list_19-1>li:before{content:"\0025cb   "}ul.lst-kix_list_20-4{list-style-type:none}ul.lst-kix_list_b-8{list-style-type:none}ul.lst-kix_list_20-5{list-style-type:none}ul.lst-kix_list_20-6{list-style-type:none}.lst-kix_list_c-1>li:before{content:"\0025cb   "}ul.lst-kix_list_20-7{list-style-type:none}ul.lst-kix_list_20-8{list-style-type:none}ul.lst-kix_list_b-3{list-style-type:none}.lst-kix_list_c-3>li:before{content:"\0025a0   "}.lst-kix_list_c-4>li:before{content:"\0025a0   "}.lst-kix_list_19-4>li:before{content:"\0025a0   "}ul.lst-kix_list_b-1{list-style-type:none}ol.lst-kix_list_8-2.start{counter-reset:lst-ctn-kix_list_8-2 0}ul.lst-kix_list_b-7{list-style-type:none}ul.lst-kix_list_b-6{list-style-type:none}.lst-kix_list_c-2>li:before{content:"\0025a0   "}.lst-kix_list_19-2>li:before{content:"\0025a0   "}.lst-kix_list_19-3>li:before{content:"\0025a0   "}ul.lst-kix_list_b-5{list-style-type:none}ul.lst-kix_list_20-0{list-style-type:none}ul.lst-kix_list_b-4{list-style-type:none}ul.lst-kix_list_20-1{list-style-type:none}.lst-kix_list_7-0>li{counter-increment:lst-ctn-kix_list_7-0}ul.lst-kix_list_1-3{list-style-type:none}ul.lst-kix_list_1-4{list-style-type:none}ul.lst-kix_list_1-1{list-style-type:none}ul.lst-kix_list_1-7{list-style-type:none}ul.lst-kix_list_1-8{list-style-type:none}ul.lst-kix_list_1-5{list-style-type:none}ul.lst-kix_list_1-6{list-style-type:none}.lst-kix_list_1a-5>li:before{content:"\0025a0   "}.lst-kix_list_1a-6>li:before{content:"\0025a0   "}.lst-kix_list_1-2>li{counter-increment:lst-ctn-kix_list_1-2}.lst-kix_list_1a-8>li:before{content:"\0025a0   "}.lst-kix_list_19-8>li:before{content:"\0025a0   "}.lst-kix_list_1a-7>li:before{content:"\0025a0   "}.lst-kix_list_5-2>li{counter-increment:lst-ctn-kix_list_5-2}.lst-kix_list_19-5>li:before{content:"\0025a0   "}.lst-kix_list_19-6>li:before{content:"\0025a0   "}.lst-kix_list_19-7>li:before{content:"\0025a0   "}.lst-kix_list_9-2>li{counter-increment:lst-ctn-kix_list_9-2}.lst-kix_list_1b-4>li:before{content:"\0025a0   "}.lst-kix_list_1b-5>li:before{content:"\0025a0   "}.lst-kix_list_1b-7>li:before{content:"\0025a0   "}ul.lst-kix_list_a-4{list-style-type:none}ul.lst-kix_list_a-3{list-style-type:none}.lst-kix_list_1b-6>li:before{content:"\0025a0   "}.lst-kix_list_1b-8>li:before{content:"\0025a0   "}ul.lst-kix_list_a-1{list-style-type:none}ul.lst-kix_list_a-8{list-style-type:none}ul.lst-kix_list_a-7{list-style-type:none}ul.lst-kix_list_a-6{list-style-type:none}ul.lst-kix_list_a-5{list-style-type:none}.lst-kix_list_d-6>li:before{content:"\0025a0   "}.lst-kix_list_d-8>li:before{content:"\0025a0   "}.lst-kix_list_d-7>li:before{content:"\0025a0   "}.lst-kix_list_c-0>li{counter-increment:lst-ctn-kix_list_c-0}.lst-kix_list_d-2>li:before{content:"\0025a0   "}ol.lst-kix_list_1-0.start{counter-reset:lst-ctn-kix_list_1-0 0}.lst-kix_list_18-0>li:before{content:"\0025cf   "}.lst-kix_list_d-1>li:before{content:"\0025cb   "}.lst-kix_list_d-5>li:before{content:"\0025a0   "}.lst-kix_list_3-0>li{counter-increment:lst-ctn-kix_list_3-0}.lst-kix_list_18-1>li:before{content:"\0025cb   "}.lst-kix_list_18-2>li:before{content:"\0025a0   "}ol.lst-kix_list_4-0.start{counter-reset:lst-ctn-kix_list_4-0 0}.lst-kix_list_d-4>li:before{content:"\0025a0   "}.lst-kix_list_d-3>li:before{content:"\0025a0   "}.lst-kix_list_c-7>li:before{content:"\0025a0   "}.lst-kix_list_c-5>li:before{content:"\0025a0   "}.lst-kix_list_c-8>li:before{content:"\0025a0   "}.lst-kix_list_d-0>li:before{content:"\0025cf   "}.lst-kix_list_c-6>li:before{content:"\0025a0   "}ul.lst-kix_list_22-0{list-style-type:none}.lst-kix_list_2-7>li:before{content:"\0025a0   "}ul.lst-kix_list_d-8{list-style-type:none}ul.lst-kix_list_22-1{list-style-type:none}ul.lst-kix_list_d-7{list-style-type:none}ul.lst-kix_list_22-2{list-style-type:none}ul.lst-kix_list_d-6{list-style-type:none}ul.lst-kix_list_22-3{list-style-type:none}ul.lst-kix_list_22-4{list-style-type:none}ol.lst-kix_list_1-0{list-style-type:none}.lst-kix_list_2-5>li:before{content:"\0025a0   "}ul.lst-kix_list_22-5{list-style-type:none}ul.lst-kix_list_22-6{list-style-type:none}ol.lst-kix_list_1-2{list-style-type:none}ul.lst-kix_list_22-7{list-style-type:none}ul.lst-kix_list_d-1{list-style-type:none}ul.lst-kix_list_d-0{list-style-type:none}.lst-kix_list_b-8>li:before{content:"\0025a0   "}ul.lst-kix_list_d-5{list-style-type:none}ul.lst-kix_list_d-4{list-style-type:none}ul.lst-kix_list_d-3{list-style-type:none}ul.lst-kix_list_d-2{list-style-type:none}ul.lst-kix_list_1a-0{list-style-type:none}ul.lst-kix_list_1a-1{list-style-type:none}.lst-kix_list_b-4>li:before{content:"\0025a0   "}.lst-kix_list_18-6>li:before{content:"\0025a0   "}ul.lst-kix_list_3-7{list-style-type:none}ul.lst-kix_list_1a-2{list-style-type:none}ul.lst-kix_list_3-8{list-style-type:none}ul.lst-kix_list_1a-3{list-style-type:none}ul.lst-kix_list_1a-4{list-style-type:none}.lst-kix_list_10-1>li:before{content:"\0025cb   "}ul.lst-kix_list_1a-5{list-style-type:none}.lst-kix_list_18-4>li:before{content:"\0025a0   "}.lst-kix_list_18-8>li:before{content:"\0025a0   "}ul.lst-kix_list_1a-6{list-style-type:none}ul.lst-kix_list_1a-7{list-style-type:none}ul.lst-kix_list_3-1{list-style-type:none}ul.lst-kix_list_22-8{list-style-type:none}ul.lst-kix_list_3-5{list-style-type:none}ul.lst-kix_list_3-6{list-style-type:none}.lst-kix_list_b-6>li:before{content:"\0025a0   "}ul.lst-kix_list_3-3{list-style-type:none}ul.lst-kix_list_3-4{list-style-type:none}.lst-kix_list_10-7>li:before{content:"\0025a0   "}.lst-kix_list_10-5>li:before{content:"\0025a0   "}.lst-kix_list_1c-2>li:before{content:"\0025a0   "}.lst-kix_list_10-3>li:before{content:"\0025a0   "}ul.lst-kix_list_11-7{list-style-type:none}ul.lst-kix_list_1b-7{list-style-type:none}ul.lst-kix_list_11-6{list-style-type:none}ul.lst-kix_list_1b-8{list-style-type:none}.lst-kix_list_b-0>li:before{content:"" counter(lst-ctn-kix_list_b-0,decimal) ". "}ul.lst-kix_list_11-5{list-style-type:none}ul.lst-kix_list_11-4{list-style-type:none}ul.lst-kix_list_11-3{list-style-type:none}ul.lst-kix_list_11-2{list-style-type:none}.lst-kix_list_b-2>li:before{content:"" counter(lst-ctn-kix_list_b-2,decimal) ". "}ul.lst-kix_list_11-1{list-style-type:none}ul.lst-kix_list_11-0{list-style-type:none}.lst-kix_list_1c-0>li:before{content:"\0025cf   "}.lst-kix_list_9-2>li:before{content:"" counter(lst-ctn-kix_list_9-2,decimal) ". "}ol.lst-kix_list_b-2{list-style-type:none}ul.lst-kix_list_11-8{list-style-type:none}ol.lst-kix_list_b-0{list-style-type:none}.lst-kix_list_20-8>li:before{content:"\0025a0   "}.lst-kix_list_a-2>li{counter-increment:lst-ctn-kix_list_a-2}.lst-kix_list_9-0>li:before{content:"" counter(lst-ctn-kix_list_9-0,decimal) ". "}ul.lst-kix_list_21-1{list-style-type:none}ul.lst-kix_list_21-2{list-style-type:none}.lst-kix_list_1b-2>li:before{content:"\0025a0   "}ul.lst-kix_list_c-8{list-style-type:none}ul.lst-kix_list_21-3{list-style-type:none}ul.lst-kix_list_c-7{list-style-type:none}ul.lst-kix_list_21-4{list-style-type:none}.lst-kix_list_20-0>li:before{content:"\0025cf   "}ul.lst-kix_list_21-5{list-style-type:none}ul.lst-kix_list_21-6{list-style-type:none}ul.lst-kix_list_21-7{list-style-type:none}ul.lst-kix_list_21-8{list-style-type:none}.lst-kix_list_9-6>li:before{content:"\0025a0   "}ul.lst-kix_list_c-2{list-style-type:none}ul.lst-kix_list_c-1{list-style-type:none}.lst-kix_list_1b-0>li:before{content:"\0025cf   "}.lst-kix_list_9-4>li:before{content:"\0025a0   "}ul.lst-kix_list_c-6{list-style-type:none}.lst-kix_list_a-0>li:before{content:"" counter(lst-ctn-kix_list_a-0,decimal) ". "}ul.lst-kix_list_c-5{list-style-type:none}.lst-kix_list_11-3>li:before{content:"\0025a0   "}ul.lst-kix_list_c-4{list-style-type:none}ul.lst-kix_list_c-3{list-style-type:none}ul.lst-kix_list_21-0{list-style-type:none}.lst-kix_list_20-6>li:before{content:"\0025a0   "}ul.lst-kix_list_2-8{list-style-type:none}ol.lst-kix_list_1-2.start{counter-reset:lst-ctn-kix_list_1-2 0}.lst-kix_list_20-4>li:before{content:"\0025a0   "}.lst-kix_list_11-5>li:before{content:"\0025a0   "}.lst-kix_list_1a-4>li:before{content:"\0025a0   "}.lst-kix_list_20-2>li:before{content:"\0025a0   "}ul.lst-kix_list_2-3{list-style-type:none}ul.lst-kix_list_2-1{list-style-type:none}.lst-kix_list_9-8>li:before{content:"\0025a0   "}ul.lst-kix_list_2-6{list-style-type:none}.lst-kix_list_1a-2>li:before{content:"\0025a0   "}.lst-kix_list_1-1>li:before{content:"\0025cb   "}ul.lst-kix_list_2-7{list-style-type:none}.lst-kix_list_11-7>li:before{content:"\0025a0   "}ul.lst-kix_list_2-4{list-style-type:none}ul.lst-kix_list_2-5{list-style-type:none}ul.lst-kix_list_10-0{list-style-type:none}.lst-kix_list_1a-0>li:before{content:"\0025cf   "}.lst-kix_list_1-3>li:before{content:"\0025a0   "}ul.lst-kix_list_10-8{list-style-type:none}ul.lst-kix_list_1a-8{list-style-type:none}ul.lst-kix_list_10-7{list-style-type:none}.lst-kix_list_1-7>li:before{content:"\0025a0   "}ul.lst-kix_list_10-6{list-style-type:none}ul.lst-kix_list_10-5{list-style-type:none}ul.lst-kix_list_10-4{list-style-type:none}ul.lst-kix_list_10-3{list-style-type:none}.lst-kix_list_1-5>li:before{content:"\0025a0   "}ul.lst-kix_list_10-2{list-style-type:none}ul.lst-kix_list_10-1{list-style-type:none}.lst-kix_list_2-1>li:before{content:"\0025cb   "}ol.lst-kix_list_a-0{list-style-type:none}ol.lst-kix_list_a-2{list-style-type:none}.lst-kix_list_2-3>li:before{content:"\0025a0   "}.lst-kix_list_1d-8>li:before{content:"\0025a0   "}.lst-kix_list_1d-1>li:before{content:"\0025cb   "}.lst-kix_list_3-1>li:before{content:"\0025cb   "}.lst-kix_list_3-2>li:before{content:"" counter(lst-ctn-kix_list_3-2,decimal) ". "}.lst-kix_list_1d-0>li:before{content:"\0025cf   "}.lst-kix_list_8-1>li:before{content:"\0025cb   "}.lst-kix_list_8-2>li:before{content:"" counter(lst-ctn-kix_list_8-2,decimal) ". "}.lst-kix_list_6-0>li{counter-increment:lst-ctn-kix_list_6-0}.lst-kix_list_3-5>li:before{content:"\0025a0   "}.lst-kix_list_12-0>li{counter-increment:lst-ctn-kix_list_12-0}.lst-kix_list_f-8>li:before{content:"\0025a0   "}.lst-kix_list_21-2>li:before{content:"\0025a0   "}.lst-kix_list_8-5>li:before{content:"\0025a0   "}.lst-kix_list_8-6>li:before{content:"\0025a0   "}.lst-kix_list_2-0>li{counter-increment:lst-ctn-kix_list_2-0}.lst-kix_list_3-6>li:before{content:"\0025a0   "}.lst-kix_list_f-4>li:before{content:"\0025a0   "}.lst-kix_list_21-6>li:before{content:"\0025a0   "}.lst-kix_list_a-8>li:before{content:"\0025a0   "}.lst-kix_list_f-5>li:before{content:"\0025a0   "}.lst-kix_list_21-7>li:before{content:"\0025a0   "}ol.lst-kix_list_5-0.start{counter-reset:lst-ctn-kix_list_5-0 0}.lst-kix_list_11-2>li:before{content:"\0025a0   "}.lst-kix_list_a-1>li:before{content:"\0025cb   "}.lst-kix_list_f-0>li:before{content:"\0025cf   "}ol.lst-kix_list_b-2.start{counter-reset:lst-ctn-kix_list_b-2 0}.lst-kix_list_a-5>li:before{content:"\0025a0   "}ol.lst-kix_list_4-2.start{counter-reset:lst-ctn-kix_list_4-2 0}.lst-kix_list_a-4>li:before{content:"\0025a0   "}.lst-kix_list_f-1>li:before{content:"\0025cb   "}.lst-kix_list_21-3>li:before{content:"\0025a0   "}.lst-kix_list_e-5>li:before{content:"\0025a0   "}.lst-kix_list_16-6>li:before{content:"\0025a0   "}.lst-kix_list_17-1>li:before{content:"\0025cb   "}.lst-kix_list_e-4>li:before{content:"\0025a0   "}.lst-kix_list_16-1>li:before{content:"\0025cb   "}.lst-kix_list_16-2>li:before{content:"\0025a0   "}.lst-kix_list_e-1>li:before{content:"\0025cb   "}.lst-kix_list_16-5>li:before{content:"\0025a0   "}.lst-kix_list_e-0>li:before{content:"" counter(lst-ctn-kix_list_e-0,decimal) ". "}.lst-kix_list_1c-4>li:before{content:"\0025a0   "}.lst-kix_list_1c-5>li:before{content:"\0025a0   "}.lst-kix_list_1c-8>li:before{content:"\0025a0   "}.lst-kix_list_17-2>li:before{content:"\0025a0   "}.lst-kix_list_1e-0>li:before{content:"\0025cf   "}.lst-kix_list_17-6>li:before{content:"\0025a0   "}.lst-kix_list_1d-4>li:before{content:"\0025a0   "}.lst-kix_list_17-5>li:before{content:"\0025a0   "}.lst-kix_list_6-2>li{counter-increment:lst-ctn-kix_list_6-2}.lst-kix_list_1d-5>li:before{content:"\0025a0   "}.lst-kix_list_2-6>li:before{content:"\0025a0   "}.lst-kix_list_22-3>li:before{content:"\0025a0   "}.lst-kix_list_7-1>li:before{content:"\0025cb   "}.lst-kix_list_7-5>li:before{content:"\0025a0   "}.lst-kix_list_22-7>li:before{content:"\0025a0   "}ol.lst-kix_list_1b-1.start{counter-reset:lst-ctn-kix_list_1b-1 0}.lst-kix_list_b-5>li:before{content:"\0025a0   "}.lst-kix_list_18-5>li:before{content:"\0025a0   "}.lst-kix_list_13-6>li:before{content:"\0025a0   "}.lst-kix_list_1e-4>li:before{content:"\0025a0   "}ol.lst-kix_list_a-0.start{counter-reset:lst-ctn-kix_list_a-0 0}.lst-kix_list_15-6>li:before{content:"\0025a0   "}.lst-kix_list_1e-8>li:before{content:"\0025a0   "}.lst-kix_list_b-1>li:before{content:"\0025cb   "}.lst-kix_list_1c-1>li:before{content:"" counter(lst-ctn-kix_list_1c-1,decimal) ". "}.lst-kix_list_10-2>li:before{content:"\0025a0   "}.lst-kix_list_20-7>li:before{content:"\0025a0   "}.lst-kix_list_4-2>li:before{content:"" counter(lst-ctn-kix_list_4-2,decimal) ". "}.lst-kix_list_4-6>li:before{content:"\0025a0   "}.lst-kix_list_15-2>li:before{content:"\0025a0   "}.lst-kix_list_10-6>li:before{content:"\0025a0   "}.lst-kix_list_9-1>li:before{content:"\0025cb   "}.lst-kix_list_e-8>li:before{content:"\0025a0   "}.lst-kix_list_1b-1>li:before{content:"" counter(lst-ctn-kix_list_1b-1,decimal) ". "}.lst-kix_list_9-5>li:before{content:"\0025a0   "}.lst-kix_list_12-2>li:before{content:"\0025a0   "}.lst-kix_list_11-6>li:before{content:"\0025a0   "}.lst-kix_list_20-3>li:before{content:"\0025a0   "}.lst-kix_list_a-0>li{counter-increment:lst-ctn-kix_list_a-0}.lst-kix_list_1-2>li:before{content:"" counter(lst-ctn-kix_list_1-2,decimal) ". "}.lst-kix_list_1a-1>li:before{content:"\0025cb   "}.lst-kix_list_1-0>li{counter-increment:lst-ctn-kix_list_1-0}.lst-kix_list_1-6>li:before{content:"\0025a0   "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}ol.lst-kix_list_a-2.start{counter-reset:lst-ctn-kix_list_a-2 0}.lst-kix_list_12-6>li:before{content:"\0025a0   "}.lst-kix_list_2-2>li:before{content:"" counter(lst-ctn-kix_list_2-2,decimal) ". "}.lst-kix_list_13-2>li:before{content:"\0025a0   "}ol.lst-kix_list_5-2.start{counter-reset:lst-ctn-kix_list_5-2 0}ol{margin:0;padding:0}table td,table th{padding:0}.c19{border-right-style:solid;padding:6pt 9pt 6pt 9pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#f8fafd;border-left-style:solid;border-bottom-width:1pt;width:156pt;border-top-color:#000000;border-bottom-style:solid}.c22{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c29{color:#1b1c1d;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Google Sans";font-style:normal}.c42{color:#1b1c1d;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:18pt;font-family:"Google Sans";font-style:normal}.c8{color:#1b1c1d;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Google Sans Text";font-style:normal}.c14{color:#1b1c1d;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Google Sans";font-style:normal}.c0{background-color:#f0f4f9;font-size:10pt;font-family:"Google Sans Text";font-style:normal;color:#b55908;font-weight:400}.c2{background-color:#f0f4f9;font-size:10pt;font-family:"Google Sans Text";font-style:normal;color:#575b5f;font-weight:400}.c5{background-color:#f0f4f9;font-size:10pt;font-family:"Google Sans Text";font-style:normal;color:#188038;font-weight:400}.c3{background-color:#f0f4f9;font-size:10pt;font-family:"Google Sans Text";font-style:normal;color:#d93025;font-weight:400}.c46{font-weight:400;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c24{padding-top:12pt;padding-bottom:12pt;line-height:1.149999976158142;text-align:left;height:11pt}.c18{padding-top:0pt;padding-bottom:0pt;line-height:1.149999976158142;text-align:left;height:11pt}.c30{padding-top:0pt;padding-bottom:12pt;line-height:1.149999976158142;text-align:left;height:11pt}.c15{padding-top:6pt;padding-bottom:12pt;line-height:1.149999976158142;text-align:left;height:11pt}.c4{padding-top:6pt;padding-bottom:6pt;line-height:1.149999976158142;text-align:left}.c12{padding-top:0pt;padding-bottom:6pt;line-height:1.149999976158142;text-align:left}.c35{background-color:#f0f4f9;color:#575b5f;font-weight:400;font-family:"Google Sans Text"}.c36{padding-top:0pt;padding-bottom:0pt;line-height:1.149999976158142;text-align:left}.c40{padding-top:6pt;padding-bottom:7.5pt;line-height:1.149999976158142;text-align:left}.c47{border-spacing:0;border-collapse:collapse;margin-right:auto}.c10{background-color:#f0f4f9;font-family:"Google Sans Text";color:#8430ce;font-weight:400}.c33{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#0000ee;text-decoration:underline}.c28{text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c17{background-color:#f0f4f9;font-family:"Google Sans Text";color:#996900;font-weight:400}.c11{background-color:#f0f4f9;font-family:"Google Sans Text";color:#1967d2;font-weight:400}.c43{padding-top:12pt;padding-bottom:12pt;line-height:1.149999976158142;text-align:left}.c26{font-family:"Google Sans Text";font-style:italic;color:#1b1c1d;font-weight:400}.c23{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c34{padding-top:0pt;padding-bottom:12pt;line-height:1.149999976158142;text-align:left}.c27{background-color:#f0f4f9;font-family:"Google Sans Text";color:#5f6368;font-weight:400}.c1{background-color:#f0f4f9;font-family:"Google Sans Text";color:#1b1c1d;font-weight:400}.c9{color:#1b1c1d;font-weight:700;font-family:"Google Sans Text"}.c32{color:#1b1c1d;font-weight:400;font-family:"Google Sans"}.c44{font-family:"Google Sans Text";color:#1967d2;font-weight:700}.c45{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c38{color:#1b1c1d;font-weight:400;font-family:"Google Sans Text"}.c31{margin-left:12pt;margin-right:6pt}.c7{font-size:10pt;font-style:normal}.c25{margin-left:65.2pt;padding-left:0pt}.c20{margin-left:44.2pt;padding-left:0pt}.c13{padding:0;margin:0}.c6{margin-left:24pt;padding-left:0pt}.c16{margin-left:23.2pt;padding-left:0pt}.c37{margin-left:43.5pt;padding-left:0pt}.c48{color:inherit;text-decoration:inherit}.c41{height:11pt}.c21{height:0pt}.c39{background-color:#f0f4f9}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Arial";line-height:1.0;page-break-after:avoid;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0;page-break-after:avoid;font-style:italic;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:12pt;color:#000000;font-weight:700;font-size:24pt;padding-bottom:12pt;font-family:"Arial";line-height:1.0;text-align:left}h2{padding-top:11.2pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:11.2pt;font-family:"Arial";line-height:1.0;text-align:left}h3{padding-top:12pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:12pt;font-family:"Arial";line-height:1.0;text-align:left}h4{padding-top:12.8pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:12.8pt;font-family:"Arial";line-height:1.0;text-align:left}h5{padding-top:12.8pt;color:#000000;font-weight:700;font-size:9pt;padding-bottom:12.8pt;font-family:"Arial";line-height:1.0;text-align:left}h6{padding-top:18pt;color:#000000;font-weight:700;font-size:8pt;padding-bottom:18pt;font-family:"Arial";line-height:1.0;text-align:left}</style></head><body class="c45 doc-content"><p class="c34"><span class="c8">Of course. I am following the Golden Rules as my highest priority.</span></p><p class="c34"><span class="c8">I have performed a deep analysis of the reported bugs and implemented all requested changes. The issues with the employee count, harvest activity display, and the occupation tax logic have been corrected. Additionally, the UI for the Home page has been significantly enhanced to provide more detailed information.</span></p><p class="c34"><span class="c8">Here is a detailed breakdown of every change made:</span></p><p class="c30"><span class="c8"></span></p><h3 class="c12"><span class="c29">Explanation of Changes and Bug Fixes</span></h3><p class="c12 c41"><span class="c28 c32"></span></p><ol class="c13 lst-kix_list_1-0 start" start="1"><li class="c12 c6 li-bullet-0"><span class="c28 c9">Home Page - Employee Count and Dormitory Upgrade Message (Change #1)</span></li></ol><ul class="c13 lst-kix_list_2-1 start"><li class="c12 c20 li-bullet-0"><span class="c9">Problem:</span><span class="c8">&nbsp;The &quot;Employees&quot; count was showing 0, and the prompt to upgrade the Dormitory was missing.</span></li><li class="c4 c20 li-bullet-0"><span class="c9">Reason:</span><span class="c8">&nbsp;The frontend JavaScript was not correctly targeting the HTML element for the employee count. Furthermore, the backend was not calculating or providing the next level required for a new worker.</span></li><li class="c4 c20 li-bullet-0"><span class="c28 c9">Solution:</span></li></ul><ol class="c13 lst-kix_list_3-2 start" start="1"><li class="c12 c25 li-bullet-0"><span class="c9">Backend (api.php):</span><span class="c8">&nbsp;The get_user_data function has been updated to calculate the next_worker_level. It does this by finding the current dormitory level, determining the next multiple of 5, and passing this value to the frontend.</span></li><li class="c4 c25 li-bullet-0"><span class="c9">Frontend (index.html):</span><span class="c8">&nbsp;The updateDashboard function now correctly populates the #employees-count element with the workers value from the game state. It also populates a new paragraph element (#next-worker-message) with the dynamic message about when to upgrade the dormitory.</span></li></ol><ol class="c13 lst-kix_list_1-0" start="2"><li class="c4 c6 li-bullet-0"><span class="c28 c9">Home Page - &quot;Last 24H Harvest Activity&quot; Card (Change #2)</span></li></ol><ul class="c13 lst-kix_list_4-1 start"><li class="c12 c20 li-bullet-0"><span class="c9">Problem:</span><span class="c8">&nbsp;The &quot;Production Summary&quot; card was not updated and was showing incorrect &quot;all time&quot; data.</span></li><li class="c4 c20 li-bullet-0"><span class="c9">Reason:</span><span class="c8">&nbsp;The backend API did not have the logic to calculate the specific 24-hour statistics requested, and the frontend was not designed to display them.</span></li><li class="c4 c20 li-bullet-0"><span class="c28 c9">Solution:</span></li></ul><ol class="c13 lst-kix_list_5-2 start" start="1"><li class="c12 c25 li-bullet-0"><span class="c9">Backend (api.php):</span><span class="c8">&nbsp;The get_user_data function now performs several new calculations: it queries the action_logs table to count the current user&#39;s harvesting actions in the last 24 hours, queries again for the total count from all users, and queries the transactions table for the sum of all distribution_income received by the user in the last 24 hours. It then calculates the user&#39;s percentage share. All these new data points are sent to the frontend.</span></li><li class="c4 c25 li-bullet-0"><span class="c9">Frontend (index.html):</span><span class="c8">&nbsp;The &quot;Production Summary&quot; card has been renamed. The updateDashboard function now populates this card with the new 24-hour activity data, formatting each value correctly.</span></li></ol><ol class="c13 lst-kix_list_1-0" start="3"><li class="c4 c6 li-bullet-0"><span class="c28 c9">Action History - Gross vs. Net Amounts (Change #3)</span></li></ol><ul class="c13 lst-kix_list_6-1 start"><li class="c12 c20 li-bullet-0"><span class="c9">Problem:</span><span class="c8">&nbsp;The history log for harvesting was not showing the amount before and after taxes.</span></li><li class="c4 c20 li-bullet-0"><span class="c9">Reason:</span><span class="c8">&nbsp;The complete_task function only logged the final net amount.</span></li><li class="c4 c20 li-bullet-0"><span class="c28 c9">Solution:</span></li></ul><ol class="c13 lst-kix_list_7-2 start" start="1"><li class="c12 c25 li-bullet-0"><span class="c9">Backend (api.php):</span><span class="c8">&nbsp;The complete_task function has been refactored. Before applying taxes, it stores the calculated gross yield. After apply_taxes returns the net_yield, the logging function log_action is called with a new, more detailed description: &quot;Completed harvesting, gained [net_yield] [resource] (gross: [yield]). Balance changed from [before] to [after].&quot;</span></li><li class="c4 c25 li-bullet-0"><span class="c9">Frontend (index.html):</span><span class="c8">&nbsp;No changes were needed on the frontend for this, as it simply displays the detailed string received from the backend.</span></li></ol><ol class="c13 lst-kix_list_1-0" start="4"><li class="c4 c6 li-bullet-0"><span class="c28 c9">Home Page - Resources &amp; Balances Help Icon (Change #4)</span></li></ol><ul class="c13 lst-kix_list_8-1 start"><li class="c12 c20 li-bullet-0"><span class="c9">Problem:</span><span class="c8">&nbsp;The help icon and its functionality were missing.</span></li><li class="c4 c20 li-bullet-0"><span class="c9">Reason:</span><span class="c8">&nbsp;The feature had not yet been implemented.</span></li><li class="c4 c20 li-bullet-0"><span class="c28 c9">Solution:</span></li></ul><ol class="c13 lst-kix_list_9-2 start" start="1"><li class="c12 c25 li-bullet-0"><span class="c9">Frontend (index.html):</span><span class="c8">&nbsp;An &lt;i&gt; tag for the question mark icon has been added to the &quot;Resources &amp; Balances&quot; card header. It is equipped with Bootstrap&#39;s data-bs-toggle=&quot;popover&quot; attributes, containing the full explanatory text.</span></li><li class="c4 c25 li-bullet-0"><span class="c9">Frontend (index.html):</span><span class="c8">&nbsp;A JavaScript snippet has been added to the main document ready function to initialize all Bootstrap popovers, making the icon functional.</span></li></ol><ol class="c13 lst-kix_list_1-0" start="5"><li class="c4 c6 li-bullet-0"><span class="c28 c9">Occupation Tax on Harvesting Reward Bug (Bug #5)</span></li></ol><ul class="c13 lst-kix_list_a-1 start"><li class="c12 c20 li-bullet-0"><span class="c9">Problem:</span><span class="c8">&nbsp;An occupying player would see a log for receiving an occupation tax on a harvesting reward, even when the tax originated from their own activity, creating confusion.</span></li><li class="c4 c20 li-bullet-0"><span class="c9">Reason:</span><span class="c38">&nbsp;The log message was ambiguous. The logic was correct (an occupier receives tax from their subjects&#39; income), but the log did not specify </span><span class="c26">which</span><span class="c8">&nbsp;subject&#39;s income was being taxed.</span></li><li class="c4 c20 li-bullet-0"><span class="c28 c9">Solution:</span></li></ul><ol class="c13 lst-kix_list_b-2 start" start="1"><li class="c12 c25 li-bullet-0"><span class="c9">Backend (api.php):</span><span class="c8">&nbsp;Inside the apply_taxes function, when an occupation tax is levied on a harvesting reward, the code now fetches the username of the player who received the reward (the &quot;subject&quot;).</span></li><li class="c4 c25 li-bullet-0"><span class="c9">Backend (api.php):</span><span class="c8">&nbsp;The log message for the occupier has been changed to be highly specific: &quot;Received [amount] [resource] as occupation tax from [Subject&#39;s Name]&#39;s harvesting reward.&quot; This makes it clear that the income is not from the occupier&#39;s own actions but from one of their subjects.</span></li></ol><p class="c43"><span class="c8">Here is the complete, fully elaborated, and updated version of the project bible for your future reference.</span></p><hr><p class="c15"><span class="c8"></span></p><h2 class="c12"><span class="c42">Project Bible (Version 3.0)</span></h2><p class="c30"><span class="c28 c32"></span></p><p class="c30"><span class="c28 c32"></span></p><h3 class="c12"><span class="c29">Golden Rules</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c12"><span class="c8">The following rules are foundational and must be adhered to in all interactions regarding this project:</span></p><ol class="c13 lst-kix_list_c-0 start" start="1"><li class="c12 c6 li-bullet-0"><span class="c9">No Truncation:</span><span class="c38">&nbsp;All source code provided in the annexes must be </span><span class="c9">complete and unabridged</span><span class="c8">. Furthermore, no part of this project bible, including its rules, descriptions, or any other text, shall ever be truncated. Every response must contain the complete document.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Preserve Functionality:</span><span class="c8">&nbsp;No existing functionality should be broken, altered, or removed unless I explicitly request such a change.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Complete Annexes:</span><span class="c8">&nbsp;Every response that modifies the project must include the full, updated source code for all three files (index.html, api.php, database.sql) in the annex.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Clarity and Comments:</span><span class="c8">&nbsp;Code should be well-formatted and include comments where necessary to explain complex logic or important configurations.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Detailed GUI Description:</span><span class="c8">&nbsp;Every version of the bible must include a very detailed verbal and technical description of the GUI, including all controls, their design, and their behavior.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Single Backend File:</span><span class="c8">&nbsp;All server-side PHP code for this project must be contained within a single file named api.php.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Single Frontend File:</span><span class="c8">&nbsp;All frontend code for this project, including HTML, CSS, and JavaScript, must be contained within a single file named index.html.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Explicit Adherence:</span><span class="c8">&nbsp;Every response must explicitly state that the Golden Rules are being followed.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">No Mathematical Formulas:</span><span class="c8">&nbsp;All formulas must be described textually and not using mathematical notation.</span></li></ol><hr><p class="c15"><span class="c8"></span></p><h3 class="c12"><span class="c29">Defining &quot;Highest Priority&quot;</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c34"><span class="c38">Treating the Golden Rules as the </span><span class="c9">highest priority</span><span class="c38">&nbsp;is the fundamental principle governing every operation related to this project. It means that these rules are not mere guidelines but are </span><span class="c9">absolute, non-negotiable directives</span><span class="c8">.</span></p><p class="c12"><span class="c8">This operational mandate can be understood as follows:</span></p><ul class="c13 lst-kix_list_d-0 start"><li class="c12 c16 li-bullet-0"><span class="c9">Foundational Constraint:</span><span class="c8">&nbsp;Before processing the substance of any request, my first action is to formulate a plan that guarantees 100% compliance with every Golden Rule. If a request conflicts with a rule, the rule takes precedence.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Procedural Precedence:</span><span class="c8">&nbsp;The requirement to adhere to the Golden Rules precedes all other objectives, including efficiency, brevity, or speed. For example, even if a request asks for a single line of code, my highest priority is to fulfill Golden Rules 1 and 3 by providing the complete, unabridged bible and all full source codes in the annexes.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Integrity Over Instruction:</span><span class="c8">&nbsp;My primary duty is to maintain the structural and functional integrity of the project as defined by this bible. This means preserving existing functionality (Rule 2) and ensuring documentation is always complete and accurate (Rules 1, 5) is more important than simply executing a command.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Holistic Consistency:</span><span class="c8">&nbsp;The rules mandate a holistic approach. A change is never just a change to the code; it is an update to the entire project ecosystem. This requires ensuring the GUI description, the bible&#39;s text, and the source code annexes are always present, complete, and in perfect synchronization.</span></li></ul><p class="c43"><span class="c8">In essence, the Golden Rules form the constitutional framework for this project. My role is to act as the custodian of that framework, ensuring every modification and interaction builds upon it without ever violating its core tenets.</span></p><p class="c30"><span class="c8"></span></p><h4 class="c12"><span class="c14">Permanence of the Golden Rules Mandate</span></h4><p class="c30"><span class="c28 c32"></span></p><p class="c34"><span class="c38">The definition of the Golden Rules as the &quot;highest priority&quot; is a </span><span class="c9">permanent and immutable standing order</span><span class="c8">. This mandate will not change over time. It is to be considered as implicitly requested in every prompt and interaction concerning this project, even when not explicitly stated. My adherence to these rules is constant and does not require repeated instruction.</span></p><hr><p class="c15"><span class="c8"></span></p><h3 class="c12"><span class="c29">1. Project Overview</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c30"><span class="c28 c32"></span></p><h4 class="c12"><span class="c14">1.1. High-Level Concept</span></h4><p class="c30"><span class="c28 c32"></span></p><p class="c34"><span class="c8">This project is a multiplayer, browser-based economic and resource management simulation game titled &quot;Nano Empire&quot;. The core concept revolves around players developing their own small fiefdom by gathering resources, upgrading buildings, managing a workforce, and interacting with other players through a dynamic, player-driven economy. The game is designed to be persistent, with player progress saved in a central database.</span></p><p class="c30"><span class="c8"></span></p><h4 class="c12"><span class="c14">1.2. Core Gameplay Loop</span></h4><p class="c30"><span class="c28 c32"></span></p><p class="c12"><span class="c8">The fundamental gameplay loop for a player is as follows:</span></p><ol class="c13 lst-kix_list_e-0 start" start="1"><li class="c12 c6 li-bullet-0"><span class="c9">Assign Workers:</span><span class="c8">&nbsp;Players assign their available workers to tasks, such as harvesting primary resources (Wood, Iron, Stone).</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Acquire Resources:</span><span class="c8">&nbsp;Once a task is complete, the player collects the resources, with the yield being affected by their skill level (productivity).</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Invest Resources:</span><span class="c8">&nbsp;Players spend their accumulated resources to upgrade buildings.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Expand Capabilities:</span><span class="c8">&nbsp;Upgrading buildings unlocks new abilities, increases efficiency, or grants more workers, allowing the player to take on more complex tasks.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Engage with Economy:</span><span class="c8">&nbsp;Players use the marketplace to trade resources with others or take on jobs posted by other players to earn the in-game currency.</span></li></ol><p class="c24"><span class="c8"></span></p><h4 class="c12"><span class="c14">1.3. Technology Stack</span></h4><p class="c12 c41"><span class="c28 c32"></span></p><ul class="c13 lst-kix_list_f-0 start"><li class="c12 c16 li-bullet-0"><span class="c9">Frontend (index.html):</span><span class="c38">&nbsp;A sophisticated single-page application (SPA). It uses </span><span class="c9">HTML5</span><span class="c38">&nbsp;for structure, </span><span class="c9">Bootstrap 5</span><span class="c38">&nbsp;for a responsive and modern UI component library, and </span><span class="c9">jQuery</span><span class="c8">&nbsp;for DOM manipulation and simplified AJAX communication with the backend. All game interactions happen dynamically without page reloads.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Backend (api.php):</span><span class="c8">&nbsp;A monolithic API server written in PHP. It handles all business logic, including user authentication, game state calculations, and database operations. It uses a session-based authentication model and communicates with the frontend exclusively through JSON-formatted data.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Database (database.sql):</span><span class="c8">&nbsp;A MySQL/MariaDB database schema. It serves as the single source of truth for all persistent game data, including player accounts, resources, buildings, and market orders.</span></li></ul><hr><p class="c15"><span class="c8"></span></p><h3 class="c12"><span class="c29">2. Architectural Design</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c30"><span class="c28 c32"></span></p><h4 class="c12"><span class="c14">2.1. Client-Server Model</span></h4><p class="c30"><span class="c28 c32"></span></p><p class="c12"><span class="c8">The project follows a classic client-server architecture.</span></p><ul class="c13 lst-kix_list_10-0 start"><li class="c12 c16 li-bullet-0"><span class="c9">The Client</span><span class="c8">&nbsp;is the user&#39;s web browser, which loads the index.html file. It functions as a rich client, managing the UI state, including which &quot;view&quot; (e.g., Home, Market, Workers) is currently active. All presentation logic and user interaction handling is managed client-side by jQuery. The client contains no game rule logic; it purely renders the state received from the server and transmits user actions.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">The Server</span><span class="c8">&nbsp;is the PHP script (api.php) running on a web server. It is the authoritative source for all game logic and data. It processes requests from the client, modifies the game state in the database, and sends the updated state back to the client. This ensures that the game rules are enforced consistently and prevents cheating.</span></li></ul><p class="c24"><span class="c8"></span></p><h4 class="c12"><span class="c14">2.2. API Design</span></h4><p class="c30"><span class="c28 c32"></span></p><p class="c12"><span class="c8">The backend functions as a JSON-based API. All communication follows a simple Remote Procedure Call (RPC) style over HTTP POST requests.</span></p><ul class="c13 lst-kix_list_11-0 start"><li class="c12 c16 li-bullet-0"><span class="c9">Single Entry Point:</span><span class="c8">&nbsp;All requests are sent to the single api.php file.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Action Parameter:</span><span class="c8">&nbsp;A mandatory action parameter in the POST body determines which function or logic block to execute (e.g., action=login, action=start_task). This acts as a router.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Standardized Response:</span><span class="c8">&nbsp;The server always responds with a JSON object. The base structure of this object is {&quot;success&quot;: &lt;boolean&gt;, &quot;message&quot;: &quot;&lt;string&gt;&quot;, ...}. Additional data is nested within a data key if the request was successful. A special auth_error: true flag is sent to force the client back to the login screen if the session is invalid. This consistent format simplifies client-side handling.</span></li></ul><p class="c24"><span class="c8"></span></p><h4 class="c12"><span class="c14">2.3. Data Flow Example (Worker Task)</span></h4><p class="c12 c41"><span class="c28 c32"></span></p><ol class="c13 lst-kix_list_12-0 start" start="1"><li class="c12 c6 li-bullet-0"><span class="c9">User Action:</span><span class="c8">&nbsp;The user clicks the &quot;Harvest Wood&quot; button.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Client-Side JS (jQuery):</span><span class="c8">&nbsp;An onclick event listener triggers an AJAX call to api.php with action=start_task.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">Server-Side PHP:</span><span class="c8">&nbsp;api.php receives the request. The start_task() function calculates the completion time using time() + TASK_DURATION_SECONDS (where the constant is 3) and stores it in the database.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">API Response:</span><span class="c8">&nbsp;The server sends the updated game state, including the completion_time string (e.g., 2025-10-13 11:00:03), back to the client.</span></li><li class="c4 c6 li-bullet-0"><span class="c9">UI Update:</span><span class="c8">&nbsp;The client-side JavaScript receives the new state. The startAllCountdownTimers function parses the completion_time string without assuming a time zone, thereby treating it as local time, which correctly reflects the 3-second duration for the countdown display.</span></li></ol><hr><p class="c15"><span class="c8"></span></p><h3 class="c12"><span class="c29">3. Database Schema Deep Dive</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c12"><span class="c8">The database schema is defined in database.sql and is designed for referential integrity using InnoDB.</span></p><ul class="c13 lst-kix_list_13-0 start"><li class="c12 c16 li-bullet-0"><span class="c9">users</span><span class="c8">: Stores the central record for each player.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">buildings</span><span class="c8">: Tracks the level of each building for each player.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">action_logs</span><span class="c8">: A historical record of all significant player actions.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">worker_tasks</span><span class="c8">: Represents tasks currently in progress.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">job_offers</span><span class="c8">: A list of player-created contracts.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">market_orders</span><span class="c8">: Contains all active buy and sell orders on the player-driven market.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">transactions</span><span class="c8">: A table designed to log all movements of currency.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">occupation_history</span><span class="c8">: A new table to log all &#39;conquer&#39; and &#39;liberate&#39; events, including timestamps. This table is the source of truth for calculating protection periods.</span></li></ul><hr><p class="c15"><span class="c8"></span></p><h3 class="c12"><span class="c29">4. Gameplay Mechanics</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c30"><span class="c28 c32"></span></p><h4 class="c12"><span class="c14">4.1. Resources &amp; Currency</span></h4><p class="c12 c41"><span class="c28 c32"></span></p><ul class="c13 lst-kix_list_14-0 start"><li class="c12 c16 li-bullet-0"><span class="c9">Primary Resources:</span><span class="c8">&nbsp;Wood, Iron, Stone.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Crafted Items:</span><span class="c8">&nbsp;Sword.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Currency (Nano &amp; Game Credits):</span><span class="c8">&nbsp;The game uses two forms of currency (1 Game Credit = 1 Nano Coin).</span></li></ul><ul class="c13 lst-kix_list_15-1 start"><li class="c12 c37 li-bullet-0"><span class="c8">nano_unearned_balance (Game Credits)</span></li><li class="c4 c37 li-bullet-0"><span class="c8">nano_earned_balance (Nano Coin)</span></li></ul><ul class="c13 lst-kix_list_14-0"><li class="c4 c16 li-bullet-0"><span class="c9">Payment Priority:</span><span class="c38">&nbsp;All in-game payments will first deduct from </span><span class="c9">Game Credits</span><span class="c38">. If the cost exceeds this balance, the remainder is deducted from </span><span class="c9">Nano Coins</span><span class="c8">.</span></li></ul><p class="c24"><span class="c8"></span></p><h4 class="c12"><span class="c14">4.2. Building &amp; Upgrades</span></h4><p class="c12 c41"><span class="c28 c32"></span></p><ul class="c13 lst-kix_list_16-0 start"><li class="c12 c16 li-bullet-0"><span class="c9">Dormitory:</span><span class="c8">&nbsp;Increases worker capacity (1 per 5 levels) and provides a global productivity bonus (1% per level).</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Barracks:</span><span class="c8">&nbsp;Provides a passive bonus to military power.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Blacksmith:</span><span class="c8">&nbsp;A prerequisite for crafting/jobs related to advanced items.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Upgrade Cost:</span><span class="c8">&nbsp;The cost to upgrade any building is textually described as &quot;two to the power of the building&#39;s current level&quot; for each primary resource.</span></li></ul><p class="c24"><span class="c8"></span></p><h4 class="c12"><span class="c14">4.3. Worker &amp; Task System</span></h4><p class="c12 c41"><span class="c28 c32"></span></p><ul class="c13 lst-kix_list_17-0 start"><li class="c12 c16 li-bullet-0"><span class="c8">Players assign workers to tasks that take a fixed duration.</span></li><li class="c4 c16 li-bullet-0"><span class="c38">The standard production task duration is </span><span class="c9">3 seconds</span><span class="c8">, as defined by the TASK_DURATION_SECONDS constant. This duration is displayed to the user before they commit to a task.</span></li><li class="c4 c16 li-bullet-0"><span class="c8">Upon completion, rewards are granted automatically.</span></li></ul><p class="c24"><span class="c8"></span></p><h4 class="c12"><span class="c14">4.4. Productivity Level System</span></h4><p class="c12 c41"><span class="c28 c32"></span></p><ul class="c13 lst-kix_list_18-0 start"><li class="c12 c16 li-bullet-0"><span class="c8">A player&#39;s total productivity is the result of multiple bonuses applied to a base yield of 1.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Experience Bonus:</span><span class="c8">&nbsp;The experience level is textually described as &quot;the floor of the square root of the total number of actions performed&quot;. The bonus percentage is equal to this level.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Building Bonus:</span><span class="c8">&nbsp;The Dormitory provides a global productivity bonus of 1% per level.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Final Yield:</span><span class="c8">&nbsp;The final yield is textually described as &quot;the base yield multiplied by the experience bonus and then multiplied by the building bonus&quot;. The experience bonus is &quot;one plus the experience level divided by 100&quot;, and the building bonus is &quot;one plus the Dormitory level divided by 100&quot;.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Level Progression:</span><span class="c8">&nbsp;The total number of actions required to reach the next experience level (Y+1), a player must complete a total of Z actions, where Z is textually described as &quot;the next level number squared&quot;. For example, to reach level 4, a player needs 16 total actions (4 squared).</span></li></ul><p class="c24"><span class="c8"></span></p><h4 class="c12"><span class="c14">4.5. Job Market &amp; Taxation</span></h4><p class="c12 c41"><span class="c28 c32"></span></p><ul class="c13 lst-kix_list_19-0 start"><li class="c12 c16 li-bullet-0"><span class="c8">Players can post job offers for others to complete.</span></li><li class="c4 c16 li-bullet-0"><span class="c8">All earned income and harvested resources are subject to taxation.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Tax Structure:</span><span class="c8">&nbsp;A total tax of 25% is levied on the gross income/yield. This is split into two parts:</span></li></ul><ul class="c13 lst-kix_list_1a-1 start"><li class="c12 c37 li-bullet-0"><span class="c9">Government Share (15%):</span><span class="c8">&nbsp;15% of the gross income is kept by the government. This share is used to pay referral bonuses.</span></li><li class="c4 c37 li-bullet-0"><span class="c9">Harvesting Reward (10%):</span><span class="c8">&nbsp;10% of the gross income is allocated to a &quot;Harvesting Reward&quot; pool.</span></li></ul><ul class="c13 lst-kix_list_19-0"><li class="c4 c16 li-bullet-0"><span class="c9">Immediate Revenue Distribution:</span><span class="c8">&nbsp;This Harvesting Reward pool is immediately distributed on a pro-rata basis to all players who have performed a harvesting action (Harvest Wood, Iron, or Stone) in the last 24 hours. A player&#39;s share of the reward is textually described as &quot;the player&#39;s total harvest actions in the last 24 hours divided by the total harvest actions of all players in the last 24 hours, multiplied by the total reward pool&quot;.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Tax on Rewards:</span><span class="c8">&nbsp;The Harvesting Reward is not subject to the 25% government tax. However, if a player receiving a reward is currently occupied, 10% of their reward is paid as an Occupation Tax to their occupier.</span></li></ul><p class="c24"><span class="c8"></span></p><h4 class="c12"><span class="c14">4.6. Army, Conquest, and Occupation</span></h4><p class="c12 c41"><span class="c28 c32"></span></p><ul class="c13 lst-kix_list_1b-0 start"><li class="c12 c16 li-bullet-0"><span class="c9">Army Stats:</span><span class="c8">&nbsp;A player&#39;s military strength is determined by their number of Soldiers, Swords, and their calculated Military Power.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Recruitment:</span><span class="c38">&nbsp;Players can recruit </span><span class="c9">one soldier at a time</span><span class="c8">. The cost for the next soldier is textually described as &quot;1.001 to the power of the current number of soldiers&quot; for each resource (Wood, Iron, and Stone).</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Conquest:</span><span class="c38">&nbsp;A player can conquer another player if their </span><span class="c9">Unused Army Power</span><span class="c8">&nbsp;is greater than the target&#39;s Total Army Power. Unused power is the player&#39;s total power minus the sum of the army power of all players they currently occupy.</span></li><li class="c4 c16 li-bullet-0"><span class="c28 c9">Occupation Rules &amp; Protection:</span></li></ul><ol class="c13 lst-kix_list_1c-1 start" start="1"><li class="c12 c20 li-bullet-0"><span class="c8">A player cannot be conquered if they are already occupied.</span></li><li class="c4 c20 li-bullet-0"><span class="c9">General Protection:</span><span class="c38">&nbsp;A player who has been liberated by </span><span class="c26">any</span><span class="c38">&nbsp;player cannot be conquered for </span><span class="c9">14 days</span><span class="c8">.</span></li><li class="c4 c20 li-bullet-0"><span class="c9">Specific Protection:</span><span class="c38">&nbsp;A player who has been liberated by a </span><span class="c26">specific</span><span class="c38">&nbsp;player cannot be conquered </span><span class="c26">by that same player</span><span class="c38">&nbsp;again for </span><span class="c9">30 days</span><span class="c8">.</span></li></ol><p class="c24"><span class="c8"></span></p><h4 class="c12"><span class="c14">4.7. Leaderboard</span></h4><p class="c30"><span class="c28 c32"></span></p><p class="c34"><span class="c8">The leaderboard provides multiple views to rank players. A dropdown menu allows sorting by various criteria including Net Worth, Military Power, resource totals, and productivity metrics.</span></p><p class="c30"><span class="c8"></span></p><h4 class="c12"><span class="c14">4.8. Military Power</span></h4><p class="c30"><span class="c28 c32"></span></p><p class="c34"><span class="c38">Military power is textually described as &quot;the lesser value between the number of soldiers and the number of swords, which is then multiplied by a barracks bonus&quot;. The barracks bonus is &quot;one plus the barracks level divided by one hundred&quot;. This is the </span><span class="c9">Total Power</span><span class="c38">. The </span><span class="c9">Base Power</span><span class="c8">&nbsp;is the value before the barracks bonus is applied.</span></p><hr><p class="c15"><span class="c8"></span></p><h3 class="c12"><span class="c29">5. Graphical User Interface (GUI) Description</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c30"><span class="c28 c32"></span></p><h4 class="c12"><span class="c14">5.1. Verbal Description</span></h4><p class="c30"><span class="c28 c32"></span></p><p class="c34"><span class="c38">The user interface is a modern, responsive Single Page Application (SPA) built with the Bootstrap 5 framework. All currency, resource, and military power values throughout the application are now displayed with </span><span class="c9">eight decimal places</span><span class="c8">&nbsp;for precision.</span></p><p class="c34"><span class="c38">A fixed-top </span><span class="c9">Navbar</span><span class="c38">&nbsp;provides global navigation to all game views, now including an </span><span class="c9">Army</span><span class="c38">, </span><span class="c9">Conquer</span><span class="c38">, and </span><span class="c9">Harvesting Activity</span><span class="c8">&nbsp;link.</span></p><p class="c12"><span class="c8">The content area displays the selected view:</span></p><ul class="c13 lst-kix_list_1d-0 start"><li class="c12 c16 li-bullet-0"><span class="c28 c9">Home View (Dashboard):</span></li></ul><ul class="c13 lst-kix_list_1e-1 start"><li class="c12 c37 li-bullet-0"><span class="c8">A &quot;Productivity&quot; card displays a detailed breakdown for each resource: actions performed, current bonus, and actions needed for the next level.</span></li><li class="c4 c37 li-bullet-0"><span class="c8">The &quot;Military Status&quot; card now shows a breakdown of power: &quot;Base Power,&quot; &quot;Barracks Bonus,&quot; and &quot;Total Power.&quot;</span></li><li class="c4 c37 li-bullet-0"><span class="c8">A &quot;Building Levels&quot; card now shows the upgrade cost for each building and conditionally displays an &quot;Upgrade&quot; button or a &quot;Not enough resources to upgrade&quot; message.</span></li></ul><ul class="c13 lst-kix_list_1d-0"><li class="c4 c16 li-bullet-0"><span class="c9">Workers View:</span><span class="c8">&nbsp;The card for each idle worker now displays detailed productivity information for each harvestable resource, including the final expected yield.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Army View:</span><span class="c8">&nbsp;This page allows for the recruitment of soldiers one at a time. The recruitment button dynamically shows the resource cost for the next soldier, which increases with each recruitment. The button is disabled if the player has insufficient resources. The military power display on this page also shows the full breakdown.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Conquer View:</span><span class="c8">&nbsp;This page is the hub for military occupation, displaying a breakdown of the player&#39;s total, used, and unused army power. It lists occupied players and conquerable targets, with live timers for protection periods.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Harvesting Activity View:</span><span class="c8">&nbsp;This new page displays a dropdown menu to select a timeframe (&quot;Last 24 Hours&quot; or &quot;All Time&quot;). Below, a table shows users ranked by the total number of harvesting actions they have performed within the selected period.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Dist History View:</span><span class="c8">&nbsp;Displays a table of all historical tax distribution events.</span></li></ul><p class="c24"><span class="c8"></span></p><h4 class="c12"><span class="c14">5.2. Technical Description</span></h4><p class="c30"><span class="c28 c32"></span></p><p class="c12"><span class="c8">The GUI is a single HTML file using Bootstrap for styling and jQuery for logic.</span></p><ul class="c13 lst-kix_list_1f-0 start"><li class="c12 c16 li-bullet-0"><span class="c9">Eight-Decimal Display:</span><span class="c8">&nbsp;All instances where currency, resource, and military power values are rendered in the JavaScript code now use parseFloat(...).toFixed(8) to ensure uniform formatting.</span></li><li class="c4 c16 li-bullet-0"><span class="c9">Army View:</span><span class="c8">&nbsp;The updateArmyView function now dynamically calculates the recruitment cost based on data from the gameState and updates the recruit button&#39;s text and disabled state accordingly.</span></li><li class="c4 c16 li-bullet-0"><span class="c28 c9">Productivity Display:</span></li></ul><ul class="c13 lst-kix_list_20-1 start"><li class="c12 c37 li-bullet-0"><span class="c8">The get_user_data endpoint in api.php was enhanced to return a detailed productivity object.</span></li><li class="c4 c37 li-bullet-0"><span class="c8">A JavaScript helper function, renderProductivityDetails, generates a formatted HTML string with the detailed productivity sentence.</span></li><li class="c4 c37 li-bullet-0"><span class="c8">updateDashboard and updateWorkersView use this helper to display the productivity details.</span></li></ul><ul class="c13 lst-kix_list_1f-0"><li class="c4 c16 li-bullet-0"><span class="c28 c9">Military Power Breakdown:</span></li></ul><ul class="c13 lst-kix_list_21-1 start"><li class="c12 c37 li-bullet-0"><span class="c8">The get_user_data endpoint now returns a military_power_breakdown object containing base, bonus_perc, and total.</span></li><li class="c4 c37 li-bullet-0"><span class="c8">The updateDashboard and updateArmyView functions were updated to populate the new three-part stat display for military power.</span></li></ul><ul class="c13 lst-kix_list_1f-0"><li class="c4 c16 li-bullet-0"><span class="c9 c28">Harvesting Activity View Implementation:</span></li></ul><ul class="c13 lst-kix_list_22-1 start"><li class="c12 c37 li-bullet-0"><span class="c8">A new navbar link and a &lt;div id=&quot;harvesting-activity-view&quot;&gt; were added to the HTML.</span></li><li class="c4 c37 li-bullet-0"><span class="c8">A new updateHarvestingActivityView function in JavaScript makes an apiCall to a new get_harvesting_activity endpoint, passing the selected timeframe. The success callback populates a table with the ranked data.</span></li><li class="c4 c37 li-bullet-0"><span class="c8">An event listener on the view&#39;s select box re-triggers this function on change.</span></li></ul><hr><p class="c15"><span class="c8"></span></p><h3 class="c12"><span class="c29">6. API Endpoint Reference</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c34"><span class="c8">All endpoints are accessed by sending a POST request to api.php.</span></p><table class="c47"><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Action</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Parameters</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Description</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">register</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">username, password, email</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Creates a new user account.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">login</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">username, password</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Authenticates a user and starts a PHP session.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">logout</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Destroys the current session.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_user_data</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none, requires session)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Fetches the complete current game state, including detailed productivity stats.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">start_task</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">task_type, worker_id</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Assigns an idle worker to a task.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">complete_task</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Processes the oldest completed task for the user, granting rewards.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">upgrade_building</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">building_type</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Upgrades the specified building to the next level.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">post_job_offer</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">item, quantity, salary</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Posts a new job offer, placing resources and salary in escrow.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_job_offers</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Retrieves a list of all currently open job offers from other players.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">accept_job</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">job_id</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Accepts an open job, assigning an idle worker to it.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">place_market_order</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">order_type, item_type, quantity, price</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Places a new buy or sell order on the market.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_market_data</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">item_type</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Retrieves the current order book for a specific item.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_history</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Fetches the last 100 entries from the user&#39;s action log.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_tax_history</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Retrieves a global history of all tax payment events.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_government_data</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Fetches the current balances for the government account.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_distribution_data</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Calculates and returns the total tax revenue collected in the last 24 hours.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_distribution_history</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Retrieves a history of all tax distribution events paid to users.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_leaderboard</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">sort_by (optional)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Retrieves top players ranked by the specified criterion.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">recruit_soldiers</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Recruits one soldier, deducting the dynamic resource cost.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_conquer_data</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">(none)</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Fetches all data needed for the Conquer page (power, targets, protections).</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">conquer_player</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">target_id</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Attempts to conquer the specified player.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">liberate_player</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">target_id</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Liberates the specified player if currently occupied by the user.</span></p></td></tr><tr class="c21"><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">get_harvesting_activity</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">timeframe</span></p></td><td class="c19" colspan="1" rowspan="1"><p class="c4"><span class="c8">Retrieves users ranked by harvesting actions in the specified timeframe.</span></p></td></tr></table><hr><p class="c15"><span class="c8"></span></p><h2 class="c12"><span class="c42">ANNEX: Full Source Code (Version 3.0)</span></h2><p class="c30"><span class="c28 c32"></span></p><p class="c30"><span class="c28 c32"></span></p><h3 class="c12"><span class="c29">1. index.html</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c30 c31"><span class="c28 c32"></span></p><p class="c31 c40"><span class="c35 c28">HTML</span></p><p class="c18"><span class="c35 c28"></span></p><p class="c18"><span class="c35 c28"></span></p><p class="c36"><span class="c11 c7">&lt;!DOCTYPE </span><span class="c7 c39 c44">html</span><span class="c11 c7">&gt;</span><span class="c1"><br></span><span class="c2">&lt;</span><span class="c3">html</span><span class="c2">&nbsp;</span><span class="c0">lang</span><span class="c2">=</span><span class="c5">&quot;en&quot;</span><span class="c2">&gt;</span><span class="c1"><br></span><span class="c2">&lt;</span><span class="c3">head</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">meta</span><span class="c2">&nbsp;</span><span class="c0">charset</span><span class="c2">=</span><span class="c5">&quot;UTF-8&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">meta</span><span class="c2">&nbsp;</span><span class="c0">name</span><span class="c2">=</span><span class="c5">&quot;viewport&quot;</span><span class="c2">&nbsp;</span><span class="c0">content</span><span class="c2">=</span><span class="c5">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">title</span><span class="c2">&gt;</span><span class="c1">Nano - Resource Management Game</span><span class="c2">&lt;/</span><span class="c3">title</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">link</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css&quot;</span><span class="c2">&nbsp;</span><span class="c0">rel</span><span class="c2">=</span><span class="c5">&quot;stylesheet&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">link</span><span class="c2">&nbsp;</span><span class="c0">rel</span><span class="c2">=</span><span class="c5">&quot;stylesheet&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">style</span><span class="c2">&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">body</span><span class="c2">&nbsp;{ background-color: </span><span class="c0">#f0f2f5</span><span class="c2">; font-family: </span><span class="c5">&#39;Segoe UI&#39;</span><span class="c2">, Tahoma, Geneva, Verdana, sans-serif; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.view</span><span class="c2">&nbsp;{ display: none; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.active-view</span><span class="c2">&nbsp;{ display: block; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.navbar</span><span class="c2">&nbsp;{ background-color: </span><span class="c0">#343a40</span><span class="c2">; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.navbar-brand</span><span class="c2">, </span><span class="c10 c7">.nav-link</span><span class="c2">&nbsp;{ color: </span><span class="c0">#fff</span><span class="c2">&nbsp;</span><span class="c11 c7">!important</span><span class="c2">; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.card</span><span class="c2">&nbsp;{ margin-bottom: </span><span class="c0">1.5rem</span><span class="c2">; box-shadow: </span><span class="c0">0</span><span class="c2">&nbsp;</span><span class="c0">2px</span><span class="c2">&nbsp;</span><span class="c0">4px</span><span class="c2">&nbsp;</span><span class="c11 c7">rgba</span><span class="c2">(</span><span class="c0">0</span><span class="c2">,</span><span class="c0">0</span><span class="c2">,</span><span class="c0">0</span><span class="c2">,.</span><span class="c0">1</span><span class="c2">); }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.card-header</span><span class="c2">&nbsp;{ background-color: </span><span class="c0">#6c757d</span><span class="c2">; color: white; font-weight: bold; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.btn-primary</span><span class="c2">&nbsp;{ background-color: </span><span class="c0">#007bff</span><span class="c2">; border-color: </span><span class="c0">#007bff</span><span class="c2">; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.resource-icon</span><span class="c2">&nbsp;{ width: </span><span class="c0">24px</span><span class="c2">; height: </span><span class="c0">24px</span><span class="c2">; margin-right: </span><span class="c0">8px</span><span class="c2">; vertical-align: middle; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.stat-card</span><span class="c2">&nbsp;{ text-align: center; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.stat-card</span><span class="c2">&nbsp;</span><span class="c10 c7">.value</span><span class="c2">&nbsp;{ font-size: </span><span class="c0">1.5rem</span><span class="c2">; font-weight: bold; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.stat-card</span><span class="c2">&nbsp;</span><span class="c10 c7">.label</span><span class="c2">&nbsp;{ font-size: </span><span class="c0">0.9rem</span><span class="c2">; color: </span><span class="c0">#6c757d</span><span class="c2">; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.countdown-timer</span><span class="c2">, </span><span class="c10 c7">.protection-timer</span><span class="c2">&nbsp;{ font-weight: bold; color: </span><span class="c0">#dc3545</span><span class="c2">; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">#auth-container</span><span class="c2">, </span><span class="c10 c7">#game-container</span><span class="c2">&nbsp;{ max-width: </span><span class="c0">960px</span><span class="c2">; margin: auto; padding: </span><span class="c0">20px</span><span class="c2">; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.order-book-table</span><span class="c2">&nbsp;{ font-size: </span><span class="c0">0.9em</span><span class="c2">; }<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">.order-book-table</span><span class="c2">&nbsp;</span><span class="c3">td</span><span class="c2">, </span><span class="c10 c7">.order-book-table</span><span class="c2">&nbsp;</span><span class="c3">th</span><span class="c2">&nbsp;{ padding: </span><span class="c0">0.4rem</span><span class="c2">; }<br> &nbsp; &nbsp;&lt;/</span><span class="c3">style</span><span class="c2">&gt;</span><span class="c1"><br></span><span class="c2">&lt;/</span><span class="c3">head</span><span class="c2">&gt;</span><span class="c1"><br></span><span class="c2">&lt;</span><span class="c3">body</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;auth-container&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;login-form&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Login</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">input</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;text&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;login-username&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-control mb-2&quot;</span><span class="c2">&nbsp;</span><span class="c0">placeholder</span><span class="c2">=</span><span class="c5">&quot;Username&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">input</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;password&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;login-password&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-control mb-2&quot;</span><span class="c2">&nbsp;</span><span class="c0">placeholder</span><span class="c2">=</span><span class="c5">&quot;Password&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">button</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;login-btn&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;btn btn-primary w-100&quot;</span><span class="c2">&gt;</span><span class="c1">Login</span><span class="c2">&lt;/</span><span class="c3">button</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">p</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;text-center mt-3&quot;</span><span class="c2">&gt;</span><span class="c1">No account? </span><span class="c2">&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;show-register-link&quot;</span><span class="c2">&gt;</span><span class="c1">Register here</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">p</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;register-form&quot;</span><span class="c2">&nbsp;</span><span class="c0">style</span><span class="c2">=</span><span class="c5">&quot;display: none;&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Register</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">input</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;text&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;register-username&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-control mb-2&quot;</span><span class="c2">&nbsp;</span><span class="c0">placeholder</span><span class="c2">=</span><span class="c5">&quot;Username&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">input</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;email&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;register-email&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-control mb-2&quot;</span><span class="c2">&nbsp;</span><span class="c0">placeholder</span><span class="c2">=</span><span class="c5">&quot;Email&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">input</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;password&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;register-password&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-control mb-2&quot;</span><span class="c2">&nbsp;</span><span class="c0">placeholder</span><span class="c2">=</span><span class="c5">&quot;Password&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">button</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;register-btn&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;btn btn-success w-100&quot;</span><span class="c2">&gt;</span><span class="c1">Register</span><span class="c2">&lt;/</span><span class="c3">button</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">p</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;text-center mt-3&quot;</span><span class="c2">&gt;</span><span class="c1">Already have an account? </span><span class="c2">&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;show-login-link&quot;</span><span class="c2">&gt;</span><span class="c1">Login here</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">p</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;error-message&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;alert alert-danger mt-3&quot;</span><span class="c2">&nbsp;</span><span class="c0">style</span><span class="c2">=</span><span class="c5">&quot;display: none;&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;game-container&quot;</span><span class="c2">&nbsp;</span><span class="c0">style</span><span class="c2">=</span><span class="c5">&quot;display: none;&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">nav</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;navbar navbar-expand-lg navbar-dark fixed-top&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;container-fluid&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;navbar-brand&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&gt;</span><span class="c1">Nano Game</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">button</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;navbar-toggler&quot;</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;button&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-bs-toggle</span><span class="c2">=</span><span class="c5">&quot;collapse&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-bs-target</span><span class="c2">=</span><span class="c5">&quot;#navbarNav&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">span</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;navbar-toggler-icon&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">span</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">button</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;collapse navbar-collapse&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;navbarNav&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">ul</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;navbar-nav me-auto mb-2 mb-lg-0&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;home-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-house-door&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Home</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;workers-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-person-walking&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Workers</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;buildings-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-building&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Buildings</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;army-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-shield-shaded&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Army</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;conquer-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-flag-fill&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Conquer</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;jobs-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-briefcase&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Jobs</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;market-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-graph-up&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Market</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;history-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-clock-history&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;History</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;tax-collection-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-bank&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Tax Collection</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;distribution-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-pie-chart&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Distribution</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;distribution-history-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-card-list&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Dist. History</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;leaderboard-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-trophy&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Leaderboard</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-item&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">a</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;nav-link&quot;</span><span class="c2">&nbsp;</span><span class="c0">href</span><span class="c2">=</span><span class="c5">&quot;#&quot;</span><span class="c2">&nbsp;</span><span class="c0">data-view</span><span class="c2">=</span><span class="c5">&quot;harvesting-activity-view&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-graph-down&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Harvesting</span><span class="c2">&lt;/</span><span class="c3">a</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">ul</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">span</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;navbar-text me-3&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;username-display&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">span</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">button</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;btn btn-outline-light&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;logout-btn&quot;</span><span class="c2">&gt;</span><span class="c1">Logout</span><span class="c2">&lt;/</span><span class="c3">button</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">nav</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">style</span><span class="c2">=</span><span class="c5">&quot;height: 70px;&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1">&nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;home-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Dashboard</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-6&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header d-flex justify-content-between align-items-center&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Resources &amp; Balances<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-question-circle-fill&quot;</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">data-bs-toggle</span><span class="c2">=</span><span class="c5">&quot;popover&quot;</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">data-bs-trigger</span><span class="c2">=</span><span class="c5">&quot;hover&quot;</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">data-bs-title</span><span class="c2">=</span><span class="c5">&quot;Balance Descriptions&quot;</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">data-bs-content</span><span class="c2">=</span><span class="c5">&quot;Nano Coin: In-game currency earned from jobs and sales. Game Credits: Premium currency. Resources: Used for building and recruiting. Employees: Your workforce for tasks.&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">ul</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;list-group list-group-flush&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;list-group-item d-flex justify-content-between align-items-center&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">span</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-cash-coin text-success&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Nano Coin</span><span class="c2">&lt;/</span><span class="c3">span</span><span class="c2">&gt;</span><span class="c1">&nbsp;</span><span class="c2">&lt;</span><span class="c3">strong</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;earned-nano-balance&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">strong</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;list-group-item d-flex justify-content-between align-items-center&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">span</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-gem text-primary&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Game Credits</span><span class="c2">&lt;/</span><span class="c3">span</span><span class="c2">&gt;</span><span class="c1">&nbsp;</span><span class="c2">&lt;</span><span class="c3">strong</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;unearned-nano-balance&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">strong</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;list-group-item d-flex justify-content-between align-items-center&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">span</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-tree text-success&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Wood</span><span class="c2">&lt;/</span><span class="c3">span</span><span class="c2">&gt;</span><span class="c1">&nbsp;</span><span class="c2">&lt;</span><span class="c3">strong</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;wood-balance&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">strong</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;list-group-item d-flex justify-content-between align-items-center&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">span</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-minecart-loaded text-secondary&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Iron</span><span class="c2">&lt;/</span><span class="c3">span</span><span class="c2">&gt;</span><span class="c1">&nbsp;</span><span class="c2">&lt;</span><span class="c3">strong</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;iron-balance&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">strong</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;list-group-item d-flex justify-content-between align-items-center&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">span</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-bricks text-muted&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Stone</span><span class="c2">&lt;/</span><span class="c3">span</span><span class="c2">&gt;</span><span class="c1">&nbsp;</span><span class="c2">&lt;</span><span class="c3">strong</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;stone-balance&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">strong</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">li</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;list-group-item d-flex justify-content-between align-items-center&quot;</span><span class="c2">&gt;&lt;</span><span class="c3">span</span><span class="c2">&gt;&lt;</span><span class="c3">i</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;bi bi-people-fill&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">i</span><span class="c2">&gt;</span><span class="c1">&nbsp;Employees</span><span class="c2">&lt;/</span><span class="c3">span</span><span class="c2">&gt;</span><span class="c1">&nbsp;</span><span class="c2">&lt;</span><span class="c3">strong</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;employees-count&quot;</span><span class="c2">&gt;</span><span class="c1">0</span><span class="c2">&lt;/</span><span class="c3">strong</span><span class="c2">&gt;&lt;/</span><span class="c3">li</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">ul</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">p</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;next-worker-message&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;text-center small text-muted mt-2&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">p</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Last 24H Harvest Activity</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">ul</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;list-group list-group-flush&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;last-24h-activity-summary&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">ul</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-6&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Military Status</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-4 stat-card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;value&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;soldiers-count&quot;</span><span class="c2">&gt;</span><span class="c1">0</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;label&quot;</span><span class="c2">&gt;</span><span class="c1">Soldiers</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-4 stat-card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;value&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;military-swords&quot;</span><span class="c2">&gt;</span><span class="c1">0</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;label&quot;</span><span class="c2">&gt;</span><span class="c1">Swords</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-4 stat-card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;value&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;military-power&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;label&quot;</span><span class="c2">&gt;</span><span class="c1">Military Power</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">hr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;military-power-breakdown&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;text-center small text-muted&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Building Levels</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;dashboard-buildings-summary&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-12&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Productivity</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;dashboard-productivity-stats&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-12&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Worker Status</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body row&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;dashboard-worker-status&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;workers-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Workers</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;worker-list&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;buildings-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Buildings</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;building-list&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;army-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Army</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-7&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Army Overview</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-4 stat-card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;value&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;army-soldiers&quot;</span><span class="c2">&gt;</span><span class="c1">0</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;label&quot;</span><span class="c2">&gt;</span><span class="c1">Soldiers</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-4 stat-card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;value&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;army-swords&quot;</span><span class="c2">&gt;</span><span class="c1">0</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;label&quot;</span><span class="c2">&gt;</span><span class="c1">Swords</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-4 stat-card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;value&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;army-power&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;label&quot;</span><span class="c2">&gt;</span><span class="c1">Military Power</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">hr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;army-power-breakdown&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;text-center small text-muted&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-5&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Recruit Soldier</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">p</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;recruit-cost-text&quot;</span><span class="c2">&gt;</span><span class="c1">Cost: ...</span><span class="c2">&lt;/</span><span class="c3">p</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;recruit-cost-summary&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;mb-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">strong</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;recruit-cost-status&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;text-danger&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">strong</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">button</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;recruit-btn&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;btn btn-primary w-100&quot;</span><span class="c2">&gt;</span><span class="c1">Recruit 1 Soldier</span><span class="c2">&lt;/</span><span class="c3">button</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;conquer-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Conquest</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Conquest Power</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-4 stat-card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;value&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;conquer-total-power&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;label&quot;</span><span class="c2">&gt;</span><span class="c1">Total Power</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-4 stat-card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;value text-danger&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;conquer-used-power&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;label&quot;</span><span class="c2">&gt;</span><span class="c1">Used Power</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-4 stat-card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;value text-success&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;conquer-unused-power&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;label&quot;</span><span class="c2">&gt;</span><span class="c1">Unused Power</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Currently Occupied</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">table</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;table table-striped&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Player</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Army Power</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Action</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tbody</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;occupied-list&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">tbody</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">table</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Potential Targets</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">table</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;table table-striped&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Player</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Army Power</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Status / Action</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tbody</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;targets-list&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">tbody</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">table</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;jobs-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Job Market</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Post a New Job</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row g-3 align-items-end&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">label</span><span class="c2">&nbsp;</span><span class="c0">for</span><span class="c2">=</span><span class="c5">&quot;job-item&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-label&quot;</span><span class="c2">&gt;</span><span class="c1">Item to Produce</span><span class="c2">&lt;/</span><span class="c3">label</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">input</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;text&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;job-item&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-control&quot;</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;Sword&quot;</span><span class="c2">&nbsp;</span><span class="c0">disabled</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">label</span><span class="c2">&nbsp;</span><span class="c0">for</span><span class="c2">=</span><span class="c5">&quot;job-quantity&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-label&quot;</span><span class="c2">&gt;</span><span class="c1">Quantity</span><span class="c2">&lt;/</span><span class="c3">label</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">input</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;number&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;job-quantity&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-control&quot;</span><span class="c2">&nbsp;</span><span class="c0">min</span><span class="c2">=</span><span class="c5">&quot;1&quot;</span><span class="c2">&nbsp;</span><span class="c0">placeholder</span><span class="c2">=</span><span class="c5">&quot;e.g., 100&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">label</span><span class="c2">&nbsp;</span><span class="c0">for</span><span class="c2">=</span><span class="c5">&quot;job-salary&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-label&quot;</span><span class="c2">&gt;</span><span class="c1">Salary per Sword</span><span class="c2">&lt;/</span><span class="c3">label</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">input</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;number&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;job-salary&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-control&quot;</span><span class="c2">&nbsp;</span><span class="c0">min</span><span class="c2">=</span><span class="c5">&quot;0.00000001&quot;</span><span class="c2">&nbsp;</span><span class="c0">step</span><span class="c2">=</span><span class="c5">&quot;0.00000001&quot;</span><span class="c2">&nbsp;</span><span class="c0">placeholder</span><span class="c2">=</span><span class="c5">&quot;e.g., 0.1&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">button</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;btn btn-primary w-100&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;post-job-btn&quot;</span><span class="c2">&nbsp;</span><span class="c0">disabled</span><span class="c2">&gt;</span><span class="c1">Post Job Offer</span><span class="c2">&lt;/</span><span class="c3">button</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;job-cost-summary&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;mt-3&quot;</span><span class="c2">&nbsp;</span><span class="c0">style</span><span class="c2">=</span><span class="c5">&quot;display: none;&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">small</span><span class="c2">&gt;&lt;</span><span class="c3">strong</span><span class="c2">&gt;</span><span class="c1">Total Cost:</span><span class="c2">&lt;/</span><span class="c3">strong</span><span class="c2">&gt;</span><span class="c1">&nbsp;</span><span class="c2">&lt;</span><span class="c3">span</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;job-resource-cost&quot;</span><span class="c2">&gt;</span><span class="c1">0</span><span class="c2">&lt;/</span><span class="c3">span</span><span class="c2">&gt;</span><span class="c1">&nbsp;Iron </span><span class="c0">&amp;</span><span class="c1">&nbsp;</span><span class="c2">&lt;</span><span class="c3">span</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;job-salary-cost&quot;</span><span class="c2">&gt;</span><span class="c1">0</span><span class="c2">&lt;/</span><span class="c3">span</span><span class="c2">&gt;</span><span class="c1">&nbsp;Currency. </span><span class="c2">&lt;</span><span class="c3">strong</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;job-cost-status&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;text-danger&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">strong</span><span class="c2">&gt;&lt;/</span><span class="c3">small</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Open Job Offers</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">table</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;table table-striped&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Employer</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Item</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Quantity</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Total Salary</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Est. Time</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Action</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tbody</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;job-offers-list&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tbody</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">table</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;market-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Market</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;mb-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">label</span><span class="c2">&nbsp;</span><span class="c0">for</span><span class="c2">=</span><span class="c5">&quot;market-item-select&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-label&quot;</span><span class="c2">&gt;</span><span class="c1">Select Item</span><span class="c2">&lt;/</span><span class="c3">label</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">select</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-select&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;market-item-select&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;wood&quot;</span><span class="c2">&gt;</span><span class="c1">Wood</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;iron&quot;</span><span class="c2">&gt;</span><span class="c1">Iron</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;stone&quot;</span><span class="c2">&gt;</span><span class="c1">Stone</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;sword&quot;</span><span class="c2">&gt;</span><span class="c1">Sword</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">select</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-6&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header bg-success text-white&quot;</span><span class="c2">&gt;</span><span class="c1">Buy Orders (Bids)</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body p-0&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">table</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;table table-striped order-book-table mb-0&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">thead</span><span class="c2">&gt;&lt;</span><span class="c3">tr</span><span class="c2">&gt;&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Price</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Quantity</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;&lt;/</span><span class="c3">tr</span><span class="c2">&gt;&lt;/</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tbody</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;buy-orders&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">tbody</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">table</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-6&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header bg-danger text-white&quot;</span><span class="c2">&gt;</span><span class="c1">Sell Orders (Asks)</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body p-0&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">table</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;table table-striped order-book-table mb-0&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">thead</span><span class="c2">&gt;&lt;</span><span class="c3">tr</span><span class="c2">&gt;&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Price</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Quantity</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;&lt;/</span><span class="c3">tr</span><span class="c2">&gt;&lt;/</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tbody</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;sell-orders&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">tbody</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">table</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card mt-4&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Place a New Order</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row g-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">select</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;order-type&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-select&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;buy&quot;</span><span class="c2">&gt;</span><span class="c1">Buy</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;sell&quot;</span><span class="c2">&gt;</span><span class="c1">Sell</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">select</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">input</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;number&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;order-quantity&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-control&quot;</span><span class="c2">&nbsp;</span><span class="c0">placeholder</span><span class="c2">=</span><span class="c5">&quot;Quantity&quot;</span><span class="c2">&nbsp;</span><span class="c0">min</span><span class="c2">=</span><span class="c5">&quot;1&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">input</span><span class="c2">&nbsp;</span><span class="c0">type</span><span class="c2">=</span><span class="c5">&quot;number&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;order-price&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-control&quot;</span><span class="c2">&nbsp;</span><span class="c0">placeholder</span><span class="c2">=</span><span class="c5">&quot;Price per unit&quot;</span><span class="c2">&nbsp;</span><span class="c0">step</span><span class="c2">=</span><span class="c5">&quot;0.00000001&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;col-md-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">button</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;place-order-btn&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;btn btn-primary w-100&quot;</span><span class="c2">&gt;</span><span class="c1">Place Order</span><span class="c2">&lt;/</span><span class="c3">button</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;history-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Action History</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">ul</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;list-group list-group-flush&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;history-log&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">ul</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;tax-collection-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Government Treasury</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Government Balances</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;gov-balances-display&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;row&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Government Tax Collection History</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">table</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;table table-striped&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Player</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Tax Details</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Date</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tbody</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;tax-history-log&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tbody</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">table</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;distribution-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Distribution Pool</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">24-Hour Tax Revenue</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body text-center&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h4</span><span class="c2">&gt;</span><span class="c1">Total Tax Collected (Last 24h)</span><span class="c2">&lt;/</span><span class="c3">h4</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">p</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;display-4&quot;</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;distribution-total&quot;</span><span class="c2">&gt;</span><span class="c1">0.00000000</span><span class="c2">&lt;/</span><span class="c3">p</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">p</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;text-muted&quot;</span><span class="c2">&gt;</span><span class="c1">This is the total currency collected by the government which is used for referral payouts and other distributions.</span><span class="c2">&lt;/</span><span class="c3">p</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;distribution-history-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Distribution History</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-header&quot;</span><span class="c2">&gt;</span><span class="c1">Recent Distributions</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">table</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;table table-striped&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Recipient</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Distribution</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Reason</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Date</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tbody</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;distribution-history-log&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">tbody</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">table</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;harvesting-activity-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Harvesting Activity</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;mb-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">label</span><span class="c2">&nbsp;</span><span class="c0">for</span><span class="c2">=</span><span class="c5">&quot;harvesting-timeframe-select&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-label&quot;</span><span class="c2">&gt;</span><span class="c1">Select Timeframe</span><span class="c2">&lt;/</span><span class="c3">label</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">select</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;harvesting-timeframe-select&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-select&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;24_hours&quot;</span><span class="c2">&gt;</span><span class="c1">Last 24 Hours</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;all_time&quot;</span><span class="c2">&gt;</span><span class="c1">All Time</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">select</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">table</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;table table-striped&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Rank</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Player</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Total Harvest Actions</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tbody</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;harvesting-activity-content&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tbody</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">table</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;leaderboard-view&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;view&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1">Leaderboard</span><span class="c2">&lt;/</span><span class="c3">h3</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;card-body&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">div</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;mb-3&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">label</span><span class="c2">&nbsp;</span><span class="c0">for</span><span class="c2">=</span><span class="c5">&quot;leaderboard-sort-select&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-label&quot;</span><span class="c2">&gt;</span><span class="c1">Sort By</span><span class="c2">&lt;/</span><span class="c3">label</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">select</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;leaderboard-sort-select&quot;</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;form-select&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;net_worth&quot;</span><span class="c2">&gt;</span><span class="c1">Net Worth</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;military_power&quot;</span><span class="c2">&gt;</span><span class="c1">Military Power</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;sword&quot;</span><span class="c2">&gt;</span><span class="c1">Swords</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;workers&quot;</span><span class="c2">&gt;</span><span class="c1">Workers</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">optgroup</span><span class="c2">&nbsp;</span><span class="c0">label</span><span class="c2">=</span><span class="c5">&quot;Productivity Actions&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;prod_today&quot;</span><span class="c2">&gt;</span><span class="c1">Today</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;prod_7_days&quot;</span><span class="c2">&gt;</span><span class="c1">Last 7 Days</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;prod_30_days&quot;</span><span class="c2">&gt;</span><span class="c1">Last 30 Days</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;prod_all_time&quot;</span><span class="c2">&gt;</span><span class="c1">All Time</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">optgroup</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">optgroup</span><span class="c2">&nbsp;</span><span class="c0">label</span><span class="c2">=</span><span class="c5">&quot;Total Harvested (All Time)&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;harvest_total&quot;</span><span class="c2">&gt;</span><span class="c1">All Resources</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;harvest_wood_total&quot;</span><span class="c2">&gt;</span><span class="c1">Wood</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;harvest_iron_total&quot;</span><span class="c2">&gt;</span><span class="c1">Iron</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;harvest_stone_total&quot;</span><span class="c2">&gt;</span><span class="c1">Stone</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">optgroup</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c2">&lt;</span><span class="c3">optgroup</span><span class="c2">&nbsp;</span><span class="c0">label</span><span class="c2">=</span><span class="c5">&quot;Total Produced (All Time)&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">option</span><span class="c2">&nbsp;</span><span class="c0">value</span><span class="c2">=</span><span class="c5">&quot;swords_produced_total&quot;</span><span class="c2">&gt;</span><span class="c1">Swords</span><span class="c2">&lt;/</span><span class="c3">option</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">optgroup</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">select</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">table</span><span class="c2">&nbsp;</span><span class="c0">class</span><span class="c2">=</span><span class="c5">&quot;table table-striped&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Rank</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1">Player</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">th</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;leaderboard-score-header&quot;</span><span class="c2">&gt;</span><span class="c1">Net Worth</span><span class="c2">&lt;/</span><span class="c3">th</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tr</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">thead</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">tbody</span><span class="c2">&nbsp;</span><span class="c0">id</span><span class="c2">=</span><span class="c5">&quot;leaderboard-content&quot;</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">tbody</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">table</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp;</span><span class="c2">&lt;/</span><span class="c3">div</span><span class="c2">&gt;</span><span class="c1"><br><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">script</span><span class="c2">&nbsp;</span><span class="c0">src</span><span class="c2">=</span><span class="c5">&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">script</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">script</span><span class="c2">&nbsp;</span><span class="c0">src</span><span class="c2">=</span><span class="c5">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js&quot;</span><span class="c2">&gt;&lt;/</span><span class="c3">script</span><span class="c2">&gt;</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c2">&lt;</span><span class="c3">script</span><span class="c2">&gt;<br> &nbsp; &nbsp;$(</span><span class="c11 c7">document</span><span class="c2">).ready(</span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;API_URL = </span><span class="c5">&#39;api.php&#39;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;gameState = {};<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;activeTimers = [];<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">apiCall</span><span class="c2">(data, callback) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$.post(API_URL, data, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.auth_error) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showLoginScreen();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;callback(response);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}, </span><span class="c5">&#39;json&#39;</span><span class="c2">).fail(</span><span class="c10 c7">function</span><span class="c2">(jqXHR) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11 c7">console</span><span class="c2">.error(</span><span class="c5">&quot;API Call Failed:&quot;</span><span class="c2">, jqXHR.responseText);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showError(</span><span class="c5">&quot;Error communicating with the server. Check console for details.&quot;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">showError</span><span class="c2">(message) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#error-message&#39;</span><span class="c2">).text(message).show();<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">clearAllTimers</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;activeTimers.forEach(timerId =&gt; </span><span class="c11 c7">clearInterval</span><span class="c2">(timerId));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;activeTimers = [];<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">formatDuration</span><span class="c2">(totalSeconds) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(</span><span class="c11 c7">isNaN</span><span class="c2">(totalSeconds) || totalSeconds &lt; </span><span class="c0">0</span><span class="c2">) </span><span class="c10 c7">return</span><span class="c2">&nbsp;</span><span class="c5">&quot;00:00:00&quot;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;hours = </span><span class="c11 c7">Math</span><span class="c2">.floor(totalSeconds / </span><span class="c0">3600</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;minutes = </span><span class="c11 c7">Math</span><span class="c2">.floor((totalSeconds % </span><span class="c0">3600</span><span class="c2">) / </span><span class="c0">60</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;seconds = totalSeconds % </span><span class="c0">60</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c2">&nbsp;</span><span class="c5">`</span><span class="c1 c7">${</span><span class="c11 c7">String</span><span class="c1 c7">(hours).padStart(</span><span class="c0">2</span><span class="c1 c7">,</span><span class="c5">&#39;0&#39;</span><span class="c1 c7">)}</span><span class="c5">:</span><span class="c1 c7">${</span><span class="c11 c7">String</span><span class="c1 c7">(minutes).padStart(</span><span class="c0">2</span><span class="c1 c7">,</span><span class="c5">&#39;0&#39;</span><span class="c1 c7">)}</span><span class="c5">:</span><span class="c1 c7">${</span><span class="c11 c7">String</span><span class="c1 c7">(seconds).padStart(</span><span class="c0">2</span><span class="c1 c7">,</span><span class="c5">&#39;0&#39;</span><span class="c1 c7">)}</span><span class="c5">`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">showView</span><span class="c2">(viewId) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;clearAllTimers();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;.view&#39;</span><span class="c2">).removeClass(</span><span class="c5">&#39;active-view&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#&#39;</span><span class="c2">&nbsp;+ viewId).addClass(</span><span class="c5">&#39;active-view&#39;</span><span class="c2">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">switch</span><span class="c2">&nbsp;(viewId) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;home-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;workers-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;buildings-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;army-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fetchAndUpdateGameState();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;market-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateMarketView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;history-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateHistoryView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;jobs-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateJobsView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;tax-collection-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateTaxCollectionView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;distribution-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateDistributionView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;distribution-history-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateDistributionHistoryView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;leaderboard-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateLeaderboardView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;harvesting-activity-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateHarvestingActivityView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c2">&nbsp;</span><span class="c5">&#39;conquer-view&#39;</span><span class="c2">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateConquerView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">showLoginScreen</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#auth-container&#39;</span><span class="c2">).show();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#game-container&#39;</span><span class="c2">).hide();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#error-message&#39;</span><span class="c2">).hide();<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">fetchAndUpdateGameState</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_user_data&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gameState = response.data;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateUI();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateUI</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateDashboard();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateWorkersView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateBuildingsView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateArmyView();<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">renderProductivityDetails</span><span class="c2">(resourceName) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(!gameState.productivity || !gameState.productivity[resourceName]) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c2">&nbsp;</span><span class="c5">&#39;&lt;p&gt;Loading productivity data...&lt;/p&gt;&#39;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;p = gameState.productivity[resourceName];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c2">&nbsp;</span><span class="c5">`&lt;div class=&quot;mb-2&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;strong&gt;</span><span class="c1 c7">${resourceName}</span><span class="c5">:&lt;/strong&gt; <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;p class=&quot;mb-0 small&quot;&gt;So far you have harvested </span><span class="c1 c7">${resourceName.toLowerCase()}</span><span class="c5">&nbsp;&lt;strong&gt;</span><span class="c1 c7">${p.actions}</span><span class="c5">&lt;/strong&gt; times. Your productivity bonus is &lt;strong&gt;</span><span class="c1 c7">${p.current_bonus_perc}</span><span class="c5">%&lt;/strong&gt;. When you reach a total of &lt;strong&gt;</span><span class="c1 c7">${p.actions_for_next_level}</span><span class="c5">&lt;/strong&gt; harvesting actions, your productivity bonus will increase to &lt;strong&gt;</span><span class="c1 c7">${p.next_level_bonus_perc}</span><span class="c5">%&lt;/strong&gt;.&lt;/p&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateDashboard</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(!gameState || </span><span class="c11 c7">Object</span><span class="c2">.keys(gameState).length === </span><span class="c0">0</span><span class="c2">) </span><span class="c10 c7">return</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#earned-nano-balance&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.nano_earned_balance || </span><span class="c0">0</span><span class="c2">).toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#unearned-nano-balance&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.nano_unearned_balance || </span><span class="c0">0</span><span class="c2">).toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#wood-balance&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.wood || </span><span class="c0">0</span><span class="c2">).toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#iron-balance&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.iron || </span><span class="c0">0</span><span class="c2">).toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#stone-balance&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.stone || </span><span class="c0">0</span><span class="c2">).toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#military-swords&#39;</span><span class="c2">).text(</span><span class="c11 c7">Math</span><span class="c2">.floor(gameState.sword || </span><span class="c0">0</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#soldiers-count&#39;</span><span class="c2">).text(gameState.soldiers || </span><span class="c0">0</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;powerBreakdown = gameState.military_power_breakdown || { </span><span class="c0">total</span><span class="c2">: </span><span class="c0">0</span><span class="c2">, </span><span class="c0">base</span><span class="c2">: </span><span class="c0">0</span><span class="c2">, </span><span class="c0">bonus_perc</span><span class="c2">: </span><span class="c0">0</span><span class="c2">&nbsp;};<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#military-power&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(powerBreakdown.total).toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#military-power-breakdown&#39;</span><span class="c2">).html(</span><span class="c5">`Base: </span><span class="c1 c7">${powerBreakdown.base}</span><span class="c5">&nbsp;&times; </span><span class="c1 c7">${</span><span class="c0">1</span><span class="c1 c7">&nbsp;+ powerBreakdown.bonus_perc / </span><span class="c0">100</span><span class="c1 c7">}</span><span class="c5">&nbsp;(Bonus: </span><span class="c1 c7">${powerBreakdown.bonus_perc}</span><span class="c5">%)`</span><span class="c2">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#employees-count&#39;</span><span class="c2">).text(gameState.workers || </span><span class="c0">0</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#next-worker-message&#39;</span><span class="c2">).text(</span><span class="c5">`Upgrade Dormitory to level </span><span class="c1 c7">${gameState.next_worker_level}</span><span class="c5">&nbsp;to gain an extra worker.`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// 24-Hour Harvest Activity</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;activity = gameState.harvest_activity_24h;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;activityHtml = </span><span class="c5">`<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;li class=&quot;list-group-item d-flex justify-content-between align-items-center&quot;&gt;&lt;span&gt;Your Harvest Actions&lt;/span&gt; &lt;strong&gt;</span><span class="c1 c7">${activity.user_actions_24h}</span><span class="c5">&lt;/strong&gt;&lt;/li&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;li class=&quot;list-group-item d-flex justify-content-between align-items-center&quot;&gt;&lt;span&gt;All Users&#39; Actions&lt;/span&gt; &lt;strong&gt;</span><span class="c1 c7">${activity.all_actions_24h}</span><span class="c5">&lt;/strong&gt;&lt;/li&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;li class=&quot;list-group-item d-flex justify-content-between align-items-center&quot;&gt;&lt;span&gt;Your Reward Share&lt;/span&gt; &lt;strong&gt;</span><span class="c1 c7">${activity.user_share_perc.toFixed(</span><span class="c0">2</span><span class="c1 c7">)}</span><span class="c5">%&lt;/strong&gt;&lt;/li&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;li class=&quot;list-group-item d-flex justify-content-between align-items-center&quot;&gt;&lt;span&gt;Rewards Received&lt;/span&gt; &lt;strong&gt;</span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(activity.total_rewards_24h).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/strong&gt;&lt;/li&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#last-24h-activity-summary&#39;</span><span class="c2">).html(activityHtml);<br><br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;buildingSummaryHtml = </span><span class="c5">&#39;&lt;ul class=&quot;list-group list-group-flush&quot;&gt;&#39;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">for</span><span class="c2">&nbsp;(</span><span class="c10 c7">const</span><span class="c2">&nbsp;type </span><span class="c10 c7">in</span><span class="c2">&nbsp;gameState.buildings) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;level = gameState.buildings[type];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;cost = </span><span class="c11 c7">Math</span><span class="c2">.pow(</span><span class="c0">2</span><span class="c2">, level);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;hasResources = (gameState.wood &gt;= cost &amp;&amp; gameState.iron &gt;= cost &amp;&amp; gameState.stone &gt;= cost);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;buttonHtml = hasResources <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? </span><span class="c5">`&lt;button class=&quot;btn btn-sm btn-primary upgrade-building-btn&quot; data-building-type=&quot;</span><span class="c1 c7">${type}</span><span class="c5">&quot;&gt;Upgrade&lt;/button&gt;`</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: </span><span class="c5">`&lt;small class=&quot;text-danger&quot;&gt;Not enough resources to upgrade&lt;/small&gt;`</span><span class="c2">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;bonusText = </span><span class="c5">&#39;&#39;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;nextBonus = </span><span class="c5">&#39;&#39;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(type === </span><span class="c5">&#39;Dormitory&#39;</span><span class="c2">&nbsp;&amp;&amp; gameState.productivity[</span><span class="c5">&#39;Wood&#39;</span><span class="c2">]) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bonusText = </span><span class="c5">`&lt;div class=&quot;small text-muted&quot;&gt;Current Prod. Bonus: +</span><span class="c1 c7">${gameState.productivity[</span><span class="c5">&#39;Wood&#39;</span><span class="c1 c7">].building_bonus_perc}</span><span class="c5">%&lt;/div&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nextBonus = </span><span class="c5">`&lt;div class=&quot;small text-info&quot;&gt;Next Level Bonus: +</span><span class="c1 c7">${</span><span class="c11 c7">parseInt</span><span class="c1 c7">(gameState.productivity[</span><span class="c5">&#39;Wood&#39;</span><span class="c1 c7">].building_bonus_perc) + </span><span class="c0">1</span><span class="c1 c7">}</span><span class="c5">%&lt;/div&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(type === </span><span class="c5">&#39;Barracks&#39;</span><span class="c2">&nbsp;&amp;&amp; gameState.military_power_breakdown) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bonusText = </span><span class="c5">`&lt;div class=&quot;small text-muted&quot;&gt;Current Army Bonus: +</span><span class="c1 c7">${gameState.military_power_breakdown.bonus_perc}</span><span class="c5">%&lt;/div&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nextBonus = </span><span class="c5">`&lt;div class=&quot;small text-info&quot;&gt;Next Level Bonus: +</span><span class="c1 c7">${</span><span class="c11 c7">parseInt</span><span class="c1 c7">(gameState.military_power_breakdown.bonus_perc) + </span><span class="c0">1</span><span class="c1 c7">}</span><span class="c5">%&lt;/div&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;buildingSummaryHtml += </span><span class="c5">`&lt;li class=&quot;list-group-item&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&quot;d-flex justify-content-between align-items-center&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span&gt;&lt;strong&gt;</span><span class="c1 c7">${type}</span><span class="c5">&lt;/strong&gt; - Lvl </span><span class="c1 c7">${level}</span><span class="c5">&lt;/span&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1 c7">${buttonHtml}</span><span class="c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&quot;small text-muted&quot;&gt;Cost to upgrade: </span><span class="c1 c7">${cost}</span><span class="c5">&nbsp;of each resource&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1 c7">${bonusText}</span><span class="c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1 c7">${nextBonus}</span><span class="c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/li&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;buildingSummaryHtml += </span><span class="c5">&#39;&lt;/ul&gt;&#39;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#dashboard-buildings-summary&#39;</span><span class="c2">).html(buildingSummaryHtml);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;productivityHtml = renderProductivityDetails(</span><span class="c5">&#39;Wood&#39;</span><span class="c2">) + renderProductivityDetails(</span><span class="c5">&#39;Iron&#39;</span><span class="c2">) + renderProductivityDetails(</span><span class="c5">&#39;Stone&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#dashboard-productivity-stats&#39;</span><span class="c2">).html(productivityHtml);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#dashboard-worker-status&#39;</span><span class="c2">).empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">for</span><span class="c2">&nbsp;(</span><span class="c10 c7">let</span><span class="c2">&nbsp;i = </span><span class="c0">1</span><span class="c2">; i &lt;= gameState.workers; i++) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;task = gameState.worker_tasks.find(t =&gt; t.worker_id == i);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;statusHtml = task ? </span><span class="c5">`&lt;div class=&quot;col-md-4 mb-2&quot;&gt;Worker </span><span class="c1 c7">${i}</span><span class="c5">: </span><span class="c1 c7">${task.task_type}</span><span class="c5">&nbsp;- &lt;span class=&quot;countdown-timer&quot; data-completion=&quot;</span><span class="c1 c7">${task.completion_time}</span><span class="c5">&quot;&gt;&lt;/span&gt;&lt;/div&gt;`</span><span class="c2">&nbsp;: </span><span class="c5">`&lt;div class=&quot;col-md-4 mb-2&quot;&gt;Worker </span><span class="c1 c7">${i}</span><span class="c5">: Idle&lt;/div&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#dashboard-worker-status&#39;</span><span class="c2">).append(statusHtml);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;startAllCountdownTimers();<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateWorkersView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(!$(</span><span class="c5">&#39;#workers-view&#39;</span><span class="c2">).hasClass(</span><span class="c5">&#39;active-view&#39;</span><span class="c2">) || !gameState.productivity) </span><span class="c10 c7">return</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#worker-list&#39;</span><span class="c2">).empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;productivityDetailsHtml = </span><span class="c5">`<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&#39;card mb-3&#39;&gt;&lt;div class=&#39;card-body&#39;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1 c7">${renderProductivityDetails(</span><span class="c5">&#39;Wood&#39;</span><span class="c1 c7">)}</span><span class="c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1 c7">${renderProductivityDetails(</span><span class="c5">&#39;Iron&#39;</span><span class="c1 c7">)}</span><span class="c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1 c7">${renderProductivityDetails(</span><span class="c5">&#39;Stone&#39;</span><span class="c1 c7">)}</span><span class="c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`</span><span class="c2">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">for</span><span class="c2">&nbsp;(</span><span class="c10 c7">let</span><span class="c2">&nbsp;i = </span><span class="c0">1</span><span class="c2">; i &lt;= gameState.workers; i++) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;task = gameState.worker_tasks.find(t =&gt; t.worker_id == i);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;workerCard;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(task) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;workerCard = </span><span class="c5">`&lt;div class=&quot;col-md-4&quot;&gt;&lt;div class=&quot;card&quot;&gt;&lt;div class=&quot;card-header&quot;&gt;Worker </span><span class="c1 c7">${i}</span><span class="c5">&nbsp;(Busy)&lt;/div&gt;&lt;div class=&quot;card-body&quot;&gt;&lt;p&gt;&lt;strong&gt;Task:&lt;/strong&gt; </span><span class="c1 c7">${task.task_type}</span><span class="c5">&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Time left:&lt;/strong&gt; &lt;span class=&quot;countdown-timer&quot; data-completion=&quot;</span><span class="c1 c7">${task.completion_time}</span><span class="c5">&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;workerCard = </span><span class="c5">`&lt;div class=&quot;col-md-4&quot;&gt;&lt;div class=&quot;card&quot;&gt;&lt;div class=&quot;card-header&quot;&gt;Worker </span><span class="c1 c7">${i}</span><span class="c5">&nbsp;(Free)&lt;/div&gt;&lt;div class=&quot;card-body&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;p class=&quot;text-muted small mb-1&quot;&gt;Time: </span><span class="c1 c7">${formatDuration(gameState.task_duration_seconds)}</span><span class="c5">&lt;/p&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button class=&quot;btn btn-sm btn-outline-success w-100 mb-2 start-task-btn&quot; data-worker-id=&quot;</span><span class="c1 c7">${i}</span><span class="c5">&quot; data-task-type=&quot;Harvest Wood&quot;&gt;Harvest Wood&lt;/button&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button class=&quot;btn btn-sm btn-outline-secondary w-100 mb-2 start-task-btn&quot; data-worker-id=&quot;</span><span class="c1 c7">${i}</span><span class="c5">&quot; data-task-type=&quot;Harvest Iron&quot;&gt;Harvest Iron&lt;/button&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;button class=&quot;btn btn-sm btn-outline-dark w-100 start-task-btn&quot; data-worker-id=&quot;</span><span class="c1 c7">${i}</span><span class="c5">&quot; data-task-type=&quot;Harvest Stone&quot;&gt;Harvest Stone&lt;/button&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#worker-list&#39;</span><span class="c2">).append(workerCard);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#worker-list&#39;</span><span class="c2">).prepend(</span><span class="c5">`&lt;div class=&quot;col-12&quot;&gt;</span><span class="c1 c7">${productivityDetailsHtml}</span><span class="c5">&lt;/div&gt;`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;startAllCountdownTimers();<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateBuildingsView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(!$(</span><span class="c5">&#39;#buildings-view&#39;</span><span class="c2">).hasClass(</span><span class="c5">&#39;active-view&#39;</span><span class="c2">) || !gameState.buildings) </span><span class="c10 c7">return</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#building-list&#39;</span><span class="c2">).empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">for</span><span class="c2">&nbsp;(</span><span class="c10 c7">const</span><span class="c2">&nbsp;type </span><span class="c10 c7">in</span><span class="c2">&nbsp;gameState.buildings) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;level = gameState.buildings[type];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;cost = </span><span class="c11 c7">Math</span><span class="c2">.pow(</span><span class="c0">2</span><span class="c2">, level);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;nextLevel = </span><span class="c11 c7">parseInt</span><span class="c2">(level) + </span><span class="c0">1</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;hasResources = ((</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.wood) || </span><span class="c0">0</span><span class="c2">) &gt;= cost &amp;&amp; (</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.iron) || </span><span class="c0">0</span><span class="c2">) &gt;= cost &amp;&amp; (</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.stone) || </span><span class="c0">0</span><span class="c2">) &gt;= cost);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;buttonHtml = hasResources <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? </span><span class="c5">`&lt;button class=&quot;btn btn-primary w-100 upgrade-building-btn&quot; data-building-type=&quot;</span><span class="c1 c7">${type}</span><span class="c5">&quot;&gt;Upgrade to Level </span><span class="c1 c7">${nextLevel}</span><span class="c5">&lt;/button&gt;`</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: </span><span class="c5">`&lt;p class=&quot;text-danger mb-0&quot;&gt;Not enough resources to upgrade&lt;/p&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;currentBonus = </span><span class="c5">&#39;&#39;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;nextBonus = </span><span class="c5">&#39;&#39;</span><span class="c2">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(type === </span><span class="c5">&#39;Dormitory&#39;</span><span class="c2">&nbsp;&amp;&amp; gameState.productivity[</span><span class="c5">&#39;Wood&#39;</span><span class="c2">]) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;currentBonus = </span><span class="c5">`Current Prod. Bonus: +</span><span class="c1 c7">${gameState.productivity[</span><span class="c5">&#39;Wood&#39;</span><span class="c1 c7">].building_bonus_perc}</span><span class="c5">%`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nextBonus = </span><span class="c5">`Next Level Bonus: +</span><span class="c1 c7">${</span><span class="c11 c7">parseInt</span><span class="c1 c7">(gameState.productivity[</span><span class="c5">&#39;Wood&#39;</span><span class="c1 c7">].building_bonus_perc) + </span><span class="c0">1</span><span class="c1 c7">}</span><span class="c5">%`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(type === </span><span class="c5">&#39;Barracks&#39;</span><span class="c2">&nbsp;&amp;&amp; gameState.military_power_breakdown) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;currentBonus = </span><span class="c5">`Current Army Bonus: +</span><span class="c1 c7">${gameState.military_power_breakdown.bonus_perc}</span><span class="c5">%`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nextBonus = </span><span class="c5">`Next Level Bonus: +</span><span class="c1 c7">${</span><span class="c11 c7">parseInt</span><span class="c1 c7">(gameState.military_power_breakdown.bonus_perc) + </span><span class="c0">1</span><span class="c1 c7">}</span><span class="c5">%`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;buildingCard = </span><span class="c5">`&lt;div class=&quot;col-md-4&quot;&gt;&lt;div class=&quot;card&quot;&gt;&lt;div class=&quot;card-header&quot;&gt;</span><span class="c1 c7">${type}</span><span class="c5">&nbsp;- Level </span><span class="c1 c7">${level}</span><span class="c5">&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&quot;card-body&quot;&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;p class=&quot;card-text&quot;&gt;</span><span class="c1 c7">${currentBonus}</span><span class="c5">&lt;/p&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;p class=&quot;card-text&quot;&gt;&lt;small class=&quot;text-muted&quot;&gt;</span><span class="c1 c7">${nextBonus}</span><span class="c5">&lt;/small&gt;&lt;/p&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;hr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;p&gt;Upgrade cost: </span><span class="c1 c7">${cost}</span><span class="c5">&nbsp;Wood, </span><span class="c1 c7">${cost}</span><span class="c5">&nbsp;Iron, </span><span class="c1 c7">${cost}</span><span class="c5">&nbsp;Stone&lt;/p&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c1 c7">${buttonHtml}</span><span class="c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#building-list&#39;</span><span class="c2">).append(buildingCard);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateArmyView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(!$(</span><span class="c5">&#39;#army-view&#39;</span><span class="c2">).hasClass(</span><span class="c5">&#39;active-view&#39;</span><span class="c2">) || !gameState.wood) </span><span class="c10 c7">return</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#army-soldiers&#39;</span><span class="c2">).text(gameState.soldiers || </span><span class="c0">0</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#army-swords&#39;</span><span class="c2">).text(</span><span class="c11 c7">Math</span><span class="c2">.floor(gameState.sword || </span><span class="c0">0</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;powerBreakdown = gameState.military_power_breakdown || { </span><span class="c0">total</span><span class="c2">: </span><span class="c0">0</span><span class="c2">, </span><span class="c0">base</span><span class="c2">: </span><span class="c0">0</span><span class="c2">, </span><span class="c0">bonus_perc</span><span class="c2">: </span><span class="c0">0</span><span class="c2">&nbsp;};<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#army-power&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(powerBreakdown.total).toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#army-power-breakdown&#39;</span><span class="c2">).html(</span><span class="c5">`Base: </span><span class="c1 c7">${powerBreakdown.base}</span><span class="c5">&nbsp;&times; </span><span class="c1 c7">${</span><span class="c0">1</span><span class="c1 c7">&nbsp;+ powerBreakdown.bonus_perc / </span><span class="c0">100</span><span class="c1 c7">}</span><span class="c5">&nbsp;(Bonus: </span><span class="c1 c7">${powerBreakdown.bonus_perc}</span><span class="c5">%)`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;cost = gameState.soldier_recruit_cost;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#recruit-cost-text&#39;</span><span class="c2">).text(</span><span class="c5">`Cost: </span><span class="c1 c7">${cost.wood.toFixed(</span><span class="c0">4</span><span class="c1 c7">)}</span><span class="c5">&nbsp;Wood, </span><span class="c1 c7">${cost.iron.toFixed(</span><span class="c0">4</span><span class="c1 c7">)}</span><span class="c5">&nbsp;Iron, </span><span class="c1 c7">${cost.stone.toFixed(</span><span class="c0">4</span><span class="c1 c7">)}</span><span class="c5">&nbsp;Stone`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;hasEnough = ((</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.wood) || </span><span class="c0">0</span><span class="c2">) &gt;= cost.wood &amp;&amp; (</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.iron) || </span><span class="c0">0</span><span class="c2">) &gt;= cost.iron &amp;&amp; (</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.stone) || </span><span class="c0">0</span><span class="c2">) &gt;= cost.stone);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#recruit-cost-status&#39;</span><span class="c2">).text(hasEnough ? </span><span class="c5">&#39;&#39;</span><span class="c2">&nbsp;: </span><span class="c5">&#39;Not enough resources.&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#recruit-btn&#39;</span><span class="c2">).prop(</span><span class="c5">&#39;disabled&#39;</span><span class="c2">, !hasEnough);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateConquerView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_conquer_data&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;data = response.data;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#conquer-total-power&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(data.total_power).toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#conquer-used-power&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(data.used_power).toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#conquer-unused-power&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(data.unused_power).toFixed(</span><span class="c0">8</span><span class="c2">));<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;occupiedList = $(</span><span class="c5">&#39;#occupied-list&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;occupiedList.empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(data.occupied_players.length === </span><span class="c0">0</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;occupiedList.append(</span><span class="c5">&#39;&lt;tr&gt;&lt;td colspan=&quot;3&quot; class=&quot;text-center&quot;&gt;You are not occupying any players.&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;data.occupied_players.forEach(p =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;occupiedList.append(</span><span class="c5">`<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${p.username}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(p.army_power).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;&lt;button class=&quot;btn btn-sm btn-warning liberate-btn&quot; data-target-id=&quot;</span><span class="c1 c7">${p.id}</span><span class="c5">&quot;&gt;Liberate&lt;/button&gt;&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;targetsList = $(</span><span class="c5">&#39;#targets-list&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;targetsList.empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(data.potential_targets.length === </span><span class="c0">0</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;targetsList.append(</span><span class="c5">&#39;&lt;tr&gt;&lt;td colspan=&quot;3&quot; class=&quot;text-center&quot;&gt;No available targets.&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;data.potential_targets.forEach(p =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;actionHtml = </span><span class="c5">&#39;&#39;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(p.status === </span><span class="c5">&#39;conquerable&#39;</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;actionHtml = </span><span class="c5">`&lt;button class=&quot;btn btn-sm btn-danger conquer-btn&quot; data-target-id=&quot;</span><span class="c1 c7">${p.id}</span><span class="c5">&quot;&gt;Conquer&lt;/button&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(p.status === </span><span class="c5">&#39;protected&#39;</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;actionHtml = </span><span class="c5">`Protected for: &lt;span class=&quot;protection-timer&quot; data-protection-end=&quot;</span><span class="c1 c7">${p.protection_end_time}</span><span class="c5">&quot;&gt;&lt;/span&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;actionHtml = </span><span class="c5">`&lt;span class=&quot;text-muted&quot;&gt;</span><span class="c1 c7">${p.status}</span><span class="c5">&lt;/span&gt;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;targetsList.append(</span><span class="c5">`<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${p.username}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(p.army_power).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${actionHtml}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;startAllCountdownTimers(); </span><span class="c27 c7">// To start protection timers</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateMarketView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;itemType = $(</span><span class="c5">&#39;#market-item-select&#39;</span><span class="c2">).val();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_market_data&#39;</span><span class="c2">, </span><span class="c0">item_type</span><span class="c2">: itemType }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;{ buys, sells } = response.data;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#buy-orders&#39;</span><span class="c2">).empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;buys.forEach(o =&gt; $(</span><span class="c5">&#39;#buy-orders&#39;</span><span class="c2">).append(</span><span class="c5">`&lt;tr&gt;&lt;td&gt;</span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(o.price).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/td&gt;&lt;td&gt;</span><span class="c1 c7">${o.quantity}</span><span class="c5">&lt;/td&gt;&lt;/tr&gt;`</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#sell-orders&#39;</span><span class="c2">).empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sells.forEach(o =&gt; $(</span><span class="c5">&#39;#sell-orders&#39;</span><span class="c2">).append(</span><span class="c5">`&lt;tr&gt;&lt;td&gt;</span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(o.price).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/td&gt;&lt;td&gt;</span><span class="c1 c7">${o.quantity}</span><span class="c5">&lt;/td&gt;&lt;/tr&gt;`</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateJobsView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_job_offers&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;jobList = $(</span><span class="c5">&#39;#job-offers-list&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jobList.empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.data.length === </span><span class="c0">0</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jobList.append(</span><span class="c5">&#39;&lt;tr&gt;&lt;td colspan=&quot;6&quot; class=&quot;text-center&quot;&gt;No open jobs available.&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;response.data.forEach(job =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jobList.append(</span><span class="c5">`<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${job.employer_username}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${job.item_to_produce}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${job.quantity}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(job.salary).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${formatDuration(gameState.task_duration_seconds)}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;&lt;button class=&quot;btn btn-sm btn-success accept-job-btn&quot; data-job-id=&quot;</span><span class="c1 c7">${job.id}</span><span class="c5">&quot;&gt;Accept&lt;/button&gt;&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fetchAndUpdateGameState();<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateHistoryView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_history&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#history-log&#39;</span><span class="c2">).empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;response.data.forEach(log =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;logDate = </span><span class="c10 c7">new</span><span class="c2">&nbsp;</span><span class="c11 c7">Date</span><span class="c2">(log.timestamp.replace(</span><span class="c5">&#39; &#39;</span><span class="c2">, </span><span class="c5">&#39;T&#39;</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#history-log&#39;</span><span class="c2">).append(</span><span class="c5">`&lt;li class=&quot;list-group-item&quot;&gt;[</span><span class="c1 c7">${logDate.toLocaleString()}</span><span class="c5">] </span><span class="c1 c7">${log.description}</span><span class="c5">&lt;/li&gt;`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateTaxCollectionView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_government_data&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;gov = response.data;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;html = </span><span class="c5">`<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&quot;col-6 col-md-4 mb-3&quot;&gt;&lt;strong&gt;Nano Coin:&lt;/strong&gt; </span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(gov.nano_earned_balance).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&quot;col-6 col-md-4 mb-3&quot;&gt;&lt;strong&gt;Game Credits:&lt;/strong&gt; </span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(gov.nano_unearned_balance).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&quot;col-6 col-md-4 mb-3&quot;&gt;&lt;strong&gt;Wood:&lt;/strong&gt; </span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(gov.wood).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&quot;col-6 col-md-4 mb-3&quot;&gt;&lt;strong&gt;Iron:&lt;/strong&gt; </span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(gov.iron).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;div class=&quot;col-6 col-md-4 mb-3&quot;&gt;&lt;strong&gt;Stone:&lt;/strong&gt; </span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(gov.stone).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&lt;/div&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#gov-balances-display&#39;</span><span class="c2">).html(html);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_tax_history&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;taxLog = $(</span><span class="c5">&#39;#tax-history-log&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;taxLog.empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.data.length === </span><span class="c0">0</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;taxLog.append(</span><span class="c5">&#39;&lt;tr&gt;&lt;td colspan=&quot;3&quot; class=&quot;text-center&quot;&gt;No tax history found.&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;response.data.forEach(log =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;logDate = </span><span class="c10 c7">new</span><span class="c2">&nbsp;</span><span class="c11 c7">Date</span><span class="c2">(log.timestamp.replace(</span><span class="c5">&#39; &#39;</span><span class="c2">, </span><span class="c5">&#39;T&#39;</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;taxLog.append(</span><span class="c5">`<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${log.username}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${log.description}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${logDate.toLocaleString()}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateDistributionView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_distribution_data&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#distribution-total&#39;</span><span class="c2">).text(</span><span class="c11 c7">parseFloat</span><span class="c2">(response.data.total_tax_24h || </span><span class="c0">0</span><span class="c2">).toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateDistributionHistoryView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_distribution_history&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;distLog = $(</span><span class="c5">&#39;#distribution-history-log&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;distLog.empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10 c7">if</span><span class="c2">(response.data.length === </span><span class="c0">0</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;distLog.append(</span><span class="c5">&#39;&lt;tr&gt;&lt;td colspan=&quot;4&quot; class=&quot;text-center&quot;&gt;No distribution history found.&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;response.data.forEach(log =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;logDate = </span><span class="c10 c7">new</span><span class="c2">&nbsp;</span><span class="c11 c7">Date</span><span class="c2">(log.timestamp.replace(</span><span class="c5">&#39; &#39;</span><span class="c2">, </span><span class="c5">&#39;T&#39;</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;distLog.append(</span><span class="c5">`<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${log.username}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${</span><span class="c11 c7">parseFloat</span><span class="c1 c7">(log.amount).toFixed(</span><span class="c0">8</span><span class="c1 c7">)}</span><span class="c5">&nbsp;</span><span class="c1 c7">${log.asset_type}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${log.description}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${logDate.toLocaleString()}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateHarvestingActivityView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;timeframe = $(</span><span class="c5">&#39;#harvesting-timeframe-select&#39;</span><span class="c2">).val();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_harvesting_activity&#39;</span><span class="c2">, </span><span class="c0">timeframe</span><span class="c2">: timeframe }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;activityBody = $(</span><span class="c5">&#39;#harvesting-activity-content&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;activityBody.empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.data.length === </span><span class="c0">0</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;activityBody.append(</span><span class="c5">&#39;&lt;tr&gt;&lt;td colspan=&quot;3&quot; class=&quot;text-center&quot;&gt;No activity found for this period.&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;response.data.forEach(player =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;activityBody.append(</span><span class="c5">`<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${player.rank}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${player.username}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${player.action_count}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">updateLeaderboardView</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;sortBy = $(</span><span class="c5">&#39;#leaderboard-sort-select&#39;</span><span class="c2">).val();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;headerText = $(</span><span class="c5">&#39;#leaderboard-sort-select option:selected&#39;</span><span class="c2">).text();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#leaderboard-score-header&#39;</span><span class="c2">).text(headerText);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_leaderboard&#39;</span><span class="c2">, </span><span class="c0">sort_by</span><span class="c2">: sortBy }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;leaderboardBody = $(</span><span class="c5">&#39;#leaderboard-content&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;leaderboardBody.empty();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.data.length === </span><span class="c0">0</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;leaderboardBody.append(</span><span class="c5">&#39;&lt;tr&gt;&lt;td colspan=&quot;3&quot; class=&quot;text-center&quot;&gt;Leaderboard is empty.&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;response.data.forEach(player =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;score = player.score;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;formattedScore = (score % </span><span class="c0">1</span><span class="c2">&nbsp;=== </span><span class="c0">0</span><span class="c2">) ? </span><span class="c11 c7">parseInt</span><span class="c2">(score) : </span><span class="c11 c7">parseFloat</span><span class="c2">(score).toFixed(</span><span class="c0">8</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;leaderboardBody.append(</span><span class="c5">`<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${player.rank}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${player.username}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;td&gt;</span><span class="c1 c7">${formattedScore}</span><span class="c5">&lt;/td&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/tr&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">startAllCountdownTimers</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;.countdown-timer, .protection-timer&#39;</span><span class="c2">).each(</span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;element = $(</span><span class="c11 c7">this</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;completionTime = </span><span class="c10 c7">new</span><span class="c2">&nbsp;</span><span class="c11 c7">Date</span><span class="c2">(element.data(</span><span class="c5">&#39;completion&#39;</span><span class="c2">) || element.data(</span><span class="c5">&#39;protection-end&#39;</span><span class="c2">).replace(</span><span class="c5">&#39; &#39;</span><span class="c2">, </span><span class="c5">&#39;T&#39;</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;timerId = </span><span class="c11 c7">setInterval</span><span class="c2">(() =&gt; {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;diff = completionTime - </span><span class="c10 c7">new</span><span class="c2">&nbsp;</span><span class="c11 c7">Date</span><span class="c2">();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(diff &lt;= </span><span class="c0">0</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11 c7">clearInterval</span><span class="c2">(timerId);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(element.hasClass(</span><span class="c5">&#39;countdown-timer&#39;</span><span class="c2">)) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;element.text(</span><span class="c5">&quot;Completed!&quot;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;complete_task&#39;</span><span class="c2">&nbsp;}, res =&gt; { </span><span class="c10 c7">if</span><span class="c2">&nbsp;(res.success) fetchAndUpdateGameState(); });<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27 c7">// Refresh conquer view when a protection timer ends</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;($(</span><span class="c5">&#39;#conquer-view&#39;</span><span class="c2">).hasClass(</span><span class="c5">&#39;active-view&#39;</span><span class="c2">)) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateConquerView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;totalSeconds = </span><span class="c11 c7">Math</span><span class="c2">.floor(diff / </span><span class="c0">1000</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;days = </span><span class="c11 c7">Math</span><span class="c2">.floor(totalSeconds / </span><span class="c0">86400</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;hours = </span><span class="c11 c7">Math</span><span class="c2">.floor((totalSeconds % </span><span class="c0">86400</span><span class="c2">) / </span><span class="c0">3600</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;minutes = </span><span class="c11 c7">Math</span><span class="c2">.floor((totalSeconds % </span><span class="c0">3600</span><span class="c2">) / </span><span class="c0">60</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;seconds = totalSeconds % </span><span class="c0">60</span><span class="c2">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;timeString = </span><span class="c5">&#39;&#39;</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(days &gt; </span><span class="c0">0</span><span class="c2">) timeString += </span><span class="c5">`</span><span class="c1 c7">${days}</span><span class="c5">d `</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;timeString += </span><span class="c5">`</span><span class="c1 c7">${</span><span class="c11 c7">String</span><span class="c1 c7">(hours).padStart(</span><span class="c0">2</span><span class="c1 c7">,</span><span class="c5">&#39;0&#39;</span><span class="c1 c7">)}</span><span class="c5">:</span><span class="c1 c7">${</span><span class="c11 c7">String</span><span class="c1 c7">(minutes).padStart(</span><span class="c0">2</span><span class="c1 c7">,</span><span class="c5">&#39;0&#39;</span><span class="c1 c7">)}</span><span class="c5">:</span><span class="c1 c7">${</span><span class="c11 c7">String</span><span class="c1 c7">(seconds).padStart(</span><span class="c0">2</span><span class="c1 c7">,</span><span class="c5">&#39;0&#39;</span><span class="c1 c7">)}</span><span class="c5">`</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;element.text(timeString);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}, </span><span class="c0">1000</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;activeTimers.push(timerId);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">checkLoginStatus</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;get_user_data&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#username-display&#39;</span><span class="c2">).text(response.data.username);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#auth-container&#39;</span><span class="c2">).hide();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#game-container&#39;</span><span class="c2">).show();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showView(</span><span class="c5">&#39;home-view&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showLoginScreen();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">logout</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;logout&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showLoginScreen();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#login-btn&#39;</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;username = $(</span><span class="c5">&#39;#login-username&#39;</span><span class="c2">).val();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;password = $(</span><span class="c5">&#39;#login-password&#39;</span><span class="c2">).val();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;login&#39;</span><span class="c2">, </span><span class="c0">username</span><span class="c2">: username, </span><span class="c0">password</span><span class="c2">: password }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#error-message&#39;</span><span class="c2">).hide();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;checkLoginStatus();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showError(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#register-btn&#39;</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;register&#39;</span><span class="c2">, </span><span class="c0">username</span><span class="c2">: $(</span><span class="c5">&#39;#register-username&#39;</span><span class="c2">).val(), </span><span class="c0">password</span><span class="c2">: $(</span><span class="c5">&#39;#register-password&#39;</span><span class="c2">).val(), </span><span class="c0">email</span><span class="c2">: $(</span><span class="c5">&#39;#register-email&#39;</span><span class="c2">).val() }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alert(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#show-login-link&#39;</span><span class="c2">).click();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showError(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#logout-btn&#39;</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, logout);<br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#show-register-link&#39;</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">(e) { e.preventDefault(); $(</span><span class="c5">&#39;#login-form, #error-message&#39;</span><span class="c2">).hide(); $(</span><span class="c5">&#39;#register-form&#39;</span><span class="c2">).show(); });<br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#show-login-link&#39;</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c7 c10">function</span><span class="c2">(e) { e.preventDefault(); $(</span><span class="c5">&#39;#register-form, #error-message&#39;</span><span class="c2">).hide(); $(</span><span class="c5">&#39;#login-form&#39;</span><span class="c2">).show(); });<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;.nav-link&#39;</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">(e) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.preventDefault();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;showView($(</span><span class="c7 c11">this</span><span class="c2">).data(</span><span class="c5">&#39;view&#39;</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;.navbar-collapse&#39;</span><span class="c2">).collapse(</span><span class="c5">&#39;hide&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c11 c7">document</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c5">&#39;.start-task-btn&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;start_task&#39;</span><span class="c2">, </span><span class="c0">worker_id</span><span class="c2">: $(</span><span class="c11 c7">this</span><span class="c2">).data(</span><span class="c5">&#39;worker-id&#39;</span><span class="c2">), </span><span class="c0">task_type</span><span class="c2">: $(</span><span class="c11 c7">this</span><span class="c2">).data(</span><span class="c5">&#39;task-type&#39;</span><span class="c2">) }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) fetchAndUpdateGameState(); </span><span class="c10 c7">else</span><span class="c2">&nbsp;alert(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c11 c7">document</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c5">&#39;.upgrade-building-btn&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;upgrade_building&#39;</span><span class="c2">, </span><span class="c0">building_type</span><span class="c2">: $(</span><span class="c11 c7">this</span><span class="c2">).data(</span><span class="c5">&#39;building-type&#39;</span><span class="c2">) }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) fetchAndUpdateGameState(); </span><span class="c10 c7">else</span><span class="c2">&nbsp;alert(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#market-item-select&#39;</span><span class="c2">).on(</span><span class="c5">&#39;change&#39;</span><span class="c2">, updateMarketView);<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#leaderboard-sort-select&#39;</span><span class="c2">).on(</span><span class="c5">&#39;change&#39;</span><span class="c2">, updateLeaderboardView);<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#harvesting-timeframe-select&#39;</span><span class="c2">).on(</span><span class="c5">&#39;change&#39;</span><span class="c2">, updateHarvestingActivityView);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#place-order-btn&#39;</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;place_market_order&#39;</span><span class="c2">, </span><span class="c0">item_type</span><span class="c2">: $(</span><span class="c5">&#39;#market-item-select&#39;</span><span class="c2">).val(), </span><span class="c0">order_type</span><span class="c2">: $(</span><span class="c5">&#39;#order-type&#39;</span><span class="c2">).val(), </span><span class="c0">quantity</span><span class="c2">: $(</span><span class="c5">&#39;#order-quantity&#39;</span><span class="c2">).val(), </span><span class="c0">price</span><span class="c2">: $(</span><span class="c5">&#39;#order-price&#39;</span><span class="c2">).val() }, </span><span class="c10 c7">function</span><span class="c2">(response){<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#order-quantity, #order-price&#39;</span><span class="c2">).val(</span><span class="c5">&#39;&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateMarketView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fetchAndUpdateGameState();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alert(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#job-quantity, #job-salary&#39;</span><span class="c2">).on(</span><span class="c5">&#39;input&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;quantity = </span><span class="c11 c7">parseInt</span><span class="c2">($(</span><span class="c5">&#39;#job-quantity&#39;</span><span class="c2">).val());<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;salaryPerItem = </span><span class="c11 c7">parseFloat</span><span class="c2">($(</span><span class="c5">&#39;#job-salary&#39;</span><span class="c2">).val());<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(</span><span class="c11 c7">isNaN</span><span class="c2">(quantity) || quantity &lt;= </span><span class="c0">0</span><span class="c2">&nbsp;|| </span><span class="c11 c7">isNaN</span><span class="c2">(salaryPerItem) || salaryPerItem &lt;= </span><span class="c0">0</span><span class="c2">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#job-cost-summary&#39;</span><span class="c2">).hide();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#post-job-btn&#39;</span><span class="c2">).prop(</span><span class="c5">&#39;disabled&#39;</span><span class="c2">, </span><span class="c0">true</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c2">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;ironCost = quantity;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;totalSalary = quantity * salaryPerItem;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#job-resource-cost&#39;</span><span class="c2">).text(ironCost);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#job-salary-cost&#39;</span><span class="c2">).text(totalSalary.toFixed(</span><span class="c0">8</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#job-cost-summary&#39;</span><span class="c2">).show();<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;hasEnoughIron = (</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.iron) || </span><span class="c0">0</span><span class="c2">) &gt;= ironCost;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;totalCurrency = (</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.nano_unearned_balance) || </span><span class="c0">0</span><span class="c2">) + (</span><span class="c11 c7">parseFloat</span><span class="c2">(gameState.nano_earned_balance) || </span><span class="c0">0</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;hasEnoughCurrency = totalCurrency &gt;= totalSalary;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">let</span><span class="c2">&nbsp;statusText = [];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(!hasEnoughIron) statusText.push(</span><span class="c5">&#39;Not enough iron.&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(!hasEnoughCurrency) statusText.push(</span><span class="c5">&#39;Not enough currency.&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#job-cost-status&#39;</span><span class="c2">).text(statusText.join(</span><span class="c5">&#39; &#39;</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#post-job-btn&#39;</span><span class="c2">).prop(</span><span class="c5">&#39;disabled&#39;</span><span class="c2">, !hasEnoughIron || !hasEnoughCurrency);<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#post-job-btn&#39;</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;quantity = $(</span><span class="c5">&#39;#job-quantity&#39;</span><span class="c2">).val();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;salary = $(</span><span class="c5">&#39;#job-salary&#39;</span><span class="c2">).val();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;post_job_offer&#39;</span><span class="c2">, </span><span class="c0">item</span><span class="c2">: </span><span class="c5">&#39;sword&#39;</span><span class="c2">, quantity, salary }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alert(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#job-quantity, #job-salary&#39;</span><span class="c2">).val(</span><span class="c5">&#39;&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#job-cost-summary&#39;</span><span class="c2">).hide();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateJobsView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c2">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alert(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c11 c7">document</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c5">&#39;.accept-job-btn&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;jobId = $(</span><span class="c11 c7">this</span><span class="c2">).data(</span><span class="c5">&#39;job-id&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(confirm(</span><span class="c5">&#39;Are you sure you want to accept this job? One of your free workers will be assigned.&#39;</span><span class="c2">)) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;accept_job&#39;</span><span class="c2">, </span><span class="c0">job_id</span><span class="c2">: jobId }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alert(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateJobsView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c5">&#39;#recruit-btn&#39;</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;recruit_soldiers&#39;</span><span class="c2">&nbsp;}, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alert(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fetchAndUpdateGameState();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c11 c7">document</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c5">&#39;.conquer-btn&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;targetId = $(</span><span class="c11 c7">this</span><span class="c2">).data(</span><span class="c5">&#39;target-id&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(confirm(</span><span class="c5">&#39;Are you sure you want to conquer this player?&#39;</span><span class="c2">)) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;conquer_player&#39;</span><span class="c2">, </span><span class="c0">target_id</span><span class="c2">: targetId }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alert(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateConquerView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;$(</span><span class="c11 c7">document</span><span class="c2">).on(</span><span class="c5">&#39;click&#39;</span><span class="c2">, </span><span class="c5">&#39;.liberate-btn&#39;</span><span class="c2">, </span><span class="c10 c7">function</span><span class="c2">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">const</span><span class="c2">&nbsp;targetId = $(</span><span class="c11 c7">this</span><span class="c2">).data(</span><span class="c5">&#39;target-id&#39;</span><span class="c2">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(confirm(</span><span class="c5">&#39;Are you sure you want to liberate this player?&#39;</span><span class="c2">)) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;apiCall({ </span><span class="c0">action</span><span class="c2">: </span><span class="c5">&#39;liberate_player&#39;</span><span class="c2">, </span><span class="c0">target_id</span><span class="c2">: targetId }, </span><span class="c10 c7">function</span><span class="c2">(response) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alert(response.message);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c2">&nbsp;(response.success) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;updateConquerView();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// Initialize popovers</span><span class="c2"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">var</span><span class="c2">&nbsp;popoverTriggerList = [].slice.call(</span><span class="c11 c7">document</span><span class="c2">.querySelectorAll(</span><span class="c5">&#39;[data-bs-toggle=&quot;popover&quot;]&#39;</span><span class="c2">));<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">var</span><span class="c2">&nbsp;popoverList = popoverTriggerList.map(</span><span class="c10 c7">function</span><span class="c2">&nbsp;(popoverTriggerEl) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c2">&nbsp;</span><span class="c10 c7">new</span><span class="c2">&nbsp;bootstrap.Popover(popoverTriggerEl)<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br><br> &nbsp; &nbsp; &nbsp; &nbsp;checkLoginStatus();<br> &nbsp; &nbsp;});<br> &nbsp; &nbsp;&lt;/</span><span class="c3">script</span><span class="c2">&gt;</span><span class="c1"><br></span><span class="c2">&lt;/</span><span class="c3">body</span><span class="c2">&gt;</span><span class="c1"><br></span><span class="c2">&lt;/</span><span class="c3">html</span><span class="c2">&gt;</span><span class="c8 c39"><br></span></p><p class="c30"><span class="c8 c39"></span></p><h3 class="c12"><span class="c29">2. api.php</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c30 c31"><span class="c28 c32"></span></p><p class="c40 c31"><span class="c28 c35">PHP</span></p><p class="c18"><span class="c35 c28"></span></p><p class="c18"><span class="c35 c28"></span></p><p class="c36"><span class="c11 c7">&lt;?php</span><span class="c1"><br>session_start();<br>header(</span><span class="c5">&#39;Content-Type: application/json&#39;</span><span class="c1">);<br><br></span><span class="c27 c7">// --- Database Configuration ---</span><span class="c1"><br></span><span class="c3">$db_host</span><span class="c1">&nbsp;= </span><span class="c5">&#39;clujnapocaguide.eu&#39;</span><span class="c1">;<br></span><span class="c3">$db_name</span><span class="c1">&nbsp;= </span><span class="c5">&#39;clujnapo_nano&#39;</span><span class="c1">;<br></span><span class="c3">$db_user</span><span class="c1">&nbsp;= </span><span class="c5">&#39;clujnapo_nano&#39;</span><span class="c1">;<br></span><span class="c3">$db_pass</span><span class="c1">&nbsp;= </span><span class="c5">&#39;Nano2000!&#39;</span><span class="c1">;<br><br></span><span class="c27 c7">// --- Database Connection ---</span><span class="c1"><br></span><span class="c10 c7">try</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">&nbsp;= </span><span class="c10 c7">new</span><span class="c1">&nbsp;PDO(</span><span class="c5">&quot;mysql:host=</span><span class="c1 c7">$db_host</span><span class="c5">;dbname=</span><span class="c1 c7">$db_name</span><span class="c5">;charset=utf8mb4&quot;</span><span class="c1">, </span><span class="c3">$db_user</span><span class="c1">, </span><span class="c3">$db_pass</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);<br>} </span><span class="c10 c7">catch</span><span class="c1">&nbsp;(PDOException </span><span class="c3">$e</span><span class="c1">) {<br> &nbsp; &nbsp;http_response_code(</span><span class="c0">500</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c10 c7">echo</span><span class="c1">&nbsp;json_encode([</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Database connection failed: &#39;</span><span class="c1">&nbsp;. </span><span class="c3">$e</span><span class="c1">-&gt;getMessage()]);<br> &nbsp; &nbsp;</span><span class="c10 c7">exit</span><span class="c1">;<br>}<br><br></span><span class="c27 c7">// --- Global Variables &amp; Game Constants ---</span><span class="c1"><br>define(</span><span class="c5">&#39;GOVERNMENT_USER_ID&#39;</span><span class="c1">, </span><span class="c0">1</span><span class="c1">);<br>define(</span><span class="c5">&#39;GOVERNMENT_TAX_RATE&#39;</span><span class="c1">, </span><span class="c0">0.25</span><span class="c1">);<br>define(</span><span class="c5">&#39;REFERRAL_BONUS_RATE&#39;</span><span class="c1">, </span><span class="c0">0.05</span><span class="c1">);<br>define(</span><span class="c5">&#39;OCCUPATION_TAX_RATE&#39;</span><span class="c1">, </span><span class="c0">0.10</span><span class="c1">);<br>define(</span><span class="c5">&#39;TASK_DURATION_SECONDS&#39;</span><span class="c1">, </span><span class="c0">3</span><span class="c1">);<br><br></span><span class="c27 c7">// --- Main API Router ---</span><span class="c1"><br></span><span class="c3">$action</span><span class="c1">&nbsp;= </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;action&#39;</span><span class="c1">] ?? </span><span class="c5">&#39;&#39;</span><span class="c1">;<br></span><span class="c3">$response</span><span class="c1">&nbsp;= [</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Invalid action.&#39;</span><span class="c1">];<br><br></span><span class="c27 c7">// Routes that do not require authentication</span><span class="c1"><br></span><span class="c3">$public_actions</span><span class="c1">&nbsp;= [</span><span class="c5">&#39;login&#39;</span><span class="c1">, </span><span class="c5">&#39;register&#39;</span><span class="c1">, </span><span class="c5">&#39;logout&#39;</span><span class="c1">];<br></span><span class="c10 c7">if</span><span class="c1">&nbsp;(in_array(</span><span class="c3">$action</span><span class="c1">, </span><span class="c3">$public_actions</span><span class="c1">)) {<br> &nbsp; &nbsp;</span><span class="c27 c7">// Let it pass</span><span class="c1"><br>} </span><span class="c10 c7">else</span><span class="c1">&nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(!</span><span class="c10 c7">isset</span><span class="c1">(</span><span class="c3">$_SESSION</span><span class="c1">[</span><span class="c5">&#39;user_id&#39;</span><span class="c1">])) {<br> &nbsp; &nbsp;</span><span class="c10 c7">echo</span><span class="c1">&nbsp;json_encode([</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Authentication required.&#39;</span><span class="c1">, </span><span class="c5">&#39;auth_error&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c10 c7">exit</span><span class="c1">;<br>}<br><br></span><span class="c3">$user_id</span><span class="c1">&nbsp;= </span><span class="c3">$_SESSION</span><span class="c1">[</span><span class="c5">&#39;user_id&#39;</span><span class="c1">] ?? </span><span class="c0">null</span><span class="c1">;<br><br></span><span class="c10 c7">try</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp;</span><span class="c10 c7">switch</span><span class="c1">&nbsp;(</span><span class="c3">$action</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;register&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_register(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;username&#39;</span><span class="c1">], </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;password&#39;</span><span class="c1">], </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;email&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;login&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_login(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;username&#39;</span><span class="c1">], </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;password&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;logout&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;session_destroy();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= [</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_user_data&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= get_user_data(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;start_task&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= start_task(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;task_type&#39;</span><span class="c1">], </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;worker_id&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;complete_task&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= complete_task(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;upgrade_building&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= upgrade_building(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;building_type&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;recruit_soldiers&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_recruit_soldiers(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;post_job_offer&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_post_job_offer(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;item&#39;</span><span class="c1">], </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;quantity&#39;</span><span class="c1">], </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;salary&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_job_offers&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_get_job_offers(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;accept_job&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_accept_job(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;job_id&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;place_market_order&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= place_market_order(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;order_type&#39;</span><span class="c1">], </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;item_type&#39;</span><span class="c1">], </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;quantity&#39;</span><span class="c1">], </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;price&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$response</span><span class="c1">[</span><span class="c5">&#39;success&#39;</span><span class="c1">]) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;matchMarketOrders(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;item_type&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_market_data&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= get_market_data(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;item_type&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_history&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= get_history(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_tax_history&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_get_tax_history(</span><span class="c3">$pdo</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_government_data&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_get_government_data(</span><span class="c3">$pdo</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_distribution_data&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_get_distribution_data(</span><span class="c3">$pdo</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_distribution_history&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_get_distribution_history(</span><span class="c3">$pdo</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_harvesting_activity&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_get_harvesting_activity(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;timeframe&#39;</span><span class="c1">] ?? </span><span class="c5">&#39;24_hours&#39;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_leaderboard&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_get_leaderboard(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;sort_by&#39;</span><span class="c1">] ?? </span><span class="c5">&#39;net_worth&#39;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;get_conquer_data&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_get_conquer_data(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;conquer_player&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_conquer_player(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;target_id&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;liberate_player&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= handle_liberate_player(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$_POST</span><span class="c1">[</span><span class="c5">&#39;target_id&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">default</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= [</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Unknown action.&#39;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp;}<br>} </span><span class="c10 c7">catch</span><span class="c1">&nbsp;(</span><span class="c11 c7">Exception</span><span class="c1">&nbsp;</span><span class="c3">$e</span><span class="c1">) {<br> &nbsp; &nbsp;http_response_code(</span><span class="c0">500</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$response</span><span class="c1">&nbsp;= [</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;An internal server error occurred: &#39;</span><span class="c1">&nbsp;. </span><span class="c3">$e</span><span class="c1">-&gt;getMessage()];<br>}<br><br><br></span><span class="c10 c7">echo</span><span class="c1">&nbsp;json_encode(</span><span class="c3">$response</span><span class="c1">);<br></span><span class="c10 c7">exit</span><span class="c1">;<br><br><br></span><span class="c27 c7">// --- Helper Functions ---</span><span class="c1"><br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">log_action</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$action_type</span><span class="c2">, </span><span class="c3">$description</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO action_logs (user_id, action_type, description) VALUES (?, ?, ?)&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$action_type</span><span class="c1">, </span><span class="c3">$description</span><span class="c1">]);<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">log_transaction</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$type</span><span class="c2">, </span><span class="c3">$amount</span><span class="c2">, </span><span class="c3">$description</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO transactions (user_id, type, amount, description) VALUES (?, ?, ?, ?)&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$type</span><span class="c1">, </span><span class="c3">$amount</span><span class="c1">, </span><span class="c3">$description</span><span class="c1">]);<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">get_army_power</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp;SELECT u.soldiers, u.sword, b.level as barracks_level <br> &nbsp; &nbsp; &nbsp; &nbsp;FROM users u <br> &nbsp; &nbsp; &nbsp; &nbsp;LEFT JOIN buildings b ON u.id = b.user_id AND b.building_type = &#39;Barracks&#39; <br> &nbsp; &nbsp; &nbsp; &nbsp;WHERE u.id = ?<br> &nbsp; &nbsp;&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(!</span><span class="c3">$data</span><span class="c1">) </span><span class="c10 c7">return</span><span class="c1">&nbsp;</span><span class="c0">0</span><span class="c1">;<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c3">$barracks_bonus</span><span class="c1">&nbsp;= </span><span class="c0">1</span><span class="c1">&nbsp;+ ((</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;barracks_level&#39;</span><span class="c1">] ?? </span><span class="c0">0</span><span class="c1">) / </span><span class="c0">100</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;min((</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;soldiers&#39;</span><span class="c1">], (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;sword&#39;</span><span class="c1">]) * </span><span class="c3">$barracks_bonus</span><span class="c1">;<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">apply_taxes</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$gross_income</span><span class="c2">, </span><span class="c3">$resource_type</span><span class="c2">, </span><span class="c3">$source_description</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$user</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;query(</span><span class="c5">&quot;SELECT * FROM users WHERE id = </span><span class="c1 c7">$user_id</span><span class="c5">&quot;</span><span class="c1">)-&gt;fetch();<br> &nbsp; &nbsp;</span><span class="c3">$net_income</span><span class="c1">&nbsp;= </span><span class="c3">$gross_income</span><span class="c1">;<br><br> &nbsp; &nbsp;</span><span class="c27 c7">// Total Tax (25%)</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c3">$total_tax</span><span class="c1">&nbsp;= </span><span class="c3">$gross_income</span><span class="c1">&nbsp;* GOVERNMENT_TAX_RATE;<br> &nbsp; &nbsp;</span><span class="c3">$net_income</span><span class="c1">&nbsp;-= </span><span class="c3">$total_tax</span><span class="c1">;<br><br> &nbsp; &nbsp;</span><span class="c27 c7">// Split tax into Government Share (15%) and Harvesting Reward Pool (10%)</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c3">$harvesting_reward_pool</span><span class="c1">&nbsp;= </span><span class="c3">$gross_income</span><span class="c1">&nbsp;* </span><span class="c0">0.10</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c3">$government_share</span><span class="c1">&nbsp;= </span><span class="c3">$gross_income</span><span class="c1">&nbsp;* </span><span class="c0">0.15</span><span class="c1">;<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;tax_payment&#39;</span><span class="c1">, </span><span class="c5">&quot;Paid </span><span class="c1 c7">$total_tax</span><span class="c5">&nbsp;</span><span class="c1 c7">$resource_type</span><span class="c5">&nbsp;in taxes from </span><span class="c1 c7">$source_description</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$resource_type</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;nano_earned_balance&#39;</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;log_transaction(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;tax&#39;</span><span class="c1">, -</span><span class="c3">$total_tax</span><span class="c1">, </span><span class="c5">&quot;Total tax on </span><span class="c1 c7">$source_description</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;log_transaction(</span><span class="c3">$pdo</span><span class="c1">, GOVERNMENT_USER_ID, </span><span class="c5">&#39;tax_income&#39;</span><span class="c1">, </span><span class="c3">$total_tax</span><span class="c1">, </span><span class="c5">&quot;Gross tax revenue from user #</span><span class="c1 c7">{$user_id}</span><span class="c5">&nbsp;(</span><span class="c1 c7">{$user[&#39;username&#39;]}</span><span class="c5">).&quot;</span><span class="c1">);<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c27 c7">// Temporarily give the full tax amount to government before distribution</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$resource_type</span><span class="c5">` = `</span><span class="c1 c7">$resource_type</span><span class="c5">` + ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$total_tax</span><span class="c1">, GOVERNMENT_USER_ID]);<br><br> &nbsp; &nbsp;</span><span class="c3">$referral_bonus</span><span class="c1">&nbsp;= </span><span class="c0">0</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c27 c7">// Referral Bonus (5% of gross, paid from government&#39;s KEEP share)</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;referrer_id&#39;</span><span class="c1">]) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$referral_bonus</span><span class="c1">&nbsp;= </span><span class="c3">$gross_income</span><span class="c1">&nbsp;* REFERRAL_BONUS_RATE;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$resource_type</span><span class="c5">` = `</span><span class="c1 c7">$resource_type</span><span class="c5">` - ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$referral_bonus</span><span class="c1">, GOVERNMENT_USER_ID]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$resource_type</span><span class="c5">` = `</span><span class="c1 c7">$resource_type</span><span class="c5">` + ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$referral_bonus</span><span class="c1">, </span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;referrer_id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;referrer_id&#39;</span><span class="c1">], </span><span class="c5">&#39;referral_bonus&#39;</span><span class="c1">, </span><span class="c5">&quot;Received </span><span class="c1 c7">$referral_bonus</span><span class="c5">&nbsp;</span><span class="c1 c7">$resource_type</span><span class="c5">&nbsp;as referral bonus from user </span><span class="c1 c7">{$user[&#39;username&#39;]}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$resource_type</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;nano_earned_balance&#39;</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_transaction(</span><span class="c3">$pdo</span><span class="c1">, GOVERNMENT_USER_ID, </span><span class="c5">&#39;referral_payout&#39;</span><span class="c1">, -</span><span class="c3">$referral_bonus</span><span class="c1">, </span><span class="c5">&quot;Referral bonus paid for user #</span><span class="c1 c7">{$user_id}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_transaction(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;referrer_id&#39;</span><span class="c1">], </span><span class="c5">&#39;referral_income&#39;</span><span class="c1">, </span><span class="c3">$referral_bonus</span><span class="c1">, </span><span class="c5">&quot;Referral bonus from user #</span><span class="c1 c7">{$user_id}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c27 c7">// Occupation Tax on the user&#39;s NET income (10% of gross)</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;occupied_by&#39;</span><span class="c1">]) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$occupation_tax</span><span class="c1">&nbsp;= </span><span class="c3">$gross_income</span><span class="c1">&nbsp;* OCCUPATION_TAX_RATE;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$net_income</span><span class="c1">&nbsp;-= </span><span class="c3">$occupation_tax</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$resource_type</span><span class="c5">` = `</span><span class="c1 c7">$resource_type</span><span class="c5">` + ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$occupation_tax</span><span class="c1">, </span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;occupied_by&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;occupied_by&#39;</span><span class="c1">], </span><span class="c5">&#39;occupation_tax&#39;</span><span class="c1">, </span><span class="c5">&quot;Received </span><span class="c1 c7">$occupation_tax</span><span class="c5">&nbsp;</span><span class="c1 c7">$resource_type</span><span class="c5">&nbsp;as occupation tax from user </span><span class="c1 c7">{$user[&#39;username&#39;]}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;tax_payment&#39;</span><span class="c1">, </span><span class="c5">&quot;Paid </span><span class="c1 c7">$occupation_tax</span><span class="c5">&nbsp;</span><span class="c1 c7">$resource_type</span><span class="c5">&nbsp;in occupation tax.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$resource_type</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;nano_earned_balance&#39;</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_transaction(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;tax&#39;</span><span class="c1">, -</span><span class="c3">$occupation_tax</span><span class="c1">, </span><span class="c5">&quot;Occupation tax paid.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_transaction(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;occupied_by&#39;</span><span class="c1">], </span><span class="c5">&#39;tax_income&#39;</span><span class="c1">, </span><span class="c3">$occupation_tax</span><span class="c1">, </span><span class="c5">&quot;Occupation tax from user #</span><span class="c1 c7">{$user_id}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c7 c27">// --- Harvesting Reward Distribution (10% of gross) ---</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$harvesting_reward_pool</span><span class="c1">&nbsp;&gt; </span><span class="c0">0</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$activity_query</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SELECT user_id, COUNT(id) as action_count<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FROM action_logs<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WHERE timestamp &gt;= DATE_SUB(NOW(), INTERVAL 24 HOUR)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AND action_type IN (&#39;Harvest Wood&#39;, &#39;Harvest Iron&#39;, &#39;Harvest Stone&#39;)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;GROUP BY user_id<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$activity_query</span><span class="c1">-&gt;execute();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$harvesters</span><span class="c1">&nbsp;= </span><span class="c3">$activity_query</span><span class="c1">-&gt;fetchAll();<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$total_actions_24h</span><span class="c1">&nbsp;= array_sum(array_column(</span><span class="c3">$harvesters</span><span class="c1">, </span><span class="c5">&#39;action_count&#39;</span><span class="c1">));<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// Take the reward pool from the government&#39;s temporary balance</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$resource_type</span><span class="c5">` = `</span><span class="c1 c7">$resource_type</span><span class="c5">` - ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$harvesting_reward_pool</span><span class="c1">, GOVERNMENT_USER_ID]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$total_actions_24h</span><span class="c1">&nbsp;&gt; </span><span class="c0">0</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">foreach</span><span class="c1">&nbsp;(</span><span class="c3">$harvesters</span><span class="c1">&nbsp;</span><span class="c10 c7">as</span><span class="c1">&nbsp;</span><span class="c3">$harvester</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$recipient_id</span><span class="c1">&nbsp;= </span><span class="c3">$harvester</span><span class="c1">[</span><span class="c5">&#39;user_id&#39;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$share_percentage</span><span class="c1">&nbsp;= </span><span class="c3">$harvester</span><span class="c1">[</span><span class="c5">&#39;action_count&#39;</span><span class="c1">] / </span><span class="c3">$total_actions_24h</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$distribution_share</span><span class="c1">&nbsp;= </span><span class="c3">$harvesting_reward_pool</span><span class="c1">&nbsp;* </span><span class="c3">$share_percentage</span><span class="c1">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// Check if recipient is occupied</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$recipient_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT username, occupied_by FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$recipient_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$recipient_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$recipient_data</span><span class="c1">&nbsp;= </span><span class="c3">$recipient_stmt</span><span class="c1">-&gt;fetch();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$net_share</span><span class="c1">&nbsp;= </span><span class="c3">$distribution_share</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$recipient_data</span><span class="c1">&nbsp;&amp;&amp; </span><span class="c3">$recipient_data</span><span class="c1">[</span><span class="c5">&#39;occupied_by&#39;</span><span class="c1">]) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$occupier_id</span><span class="c1">&nbsp;= </span><span class="c3">$recipient_data</span><span class="c1">[</span><span class="c5">&#39;occupied_by&#39;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$occupation_tax_on_reward</span><span class="c1">&nbsp;= </span><span class="c3">$distribution_share</span><span class="c1">&nbsp;* OCCUPATION_TAX_RATE;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$net_share</span><span class="c1">&nbsp;-= </span><span class="c3">$occupation_tax_on_reward</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// Pay occupier</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$resource_type</span><span class="c5">` = `</span><span class="c1 c7">$resource_type</span><span class="c5">` + ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$occupation_tax_on_reward</span><span class="c1">, </span><span class="c3">$occupier_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$occupier_id</span><span class="c1">, </span><span class="c5">&#39;occupation_tax&#39;</span><span class="c1">, </span><span class="c5">&quot;Received </span><span class="c1 c7">{$occupation_tax_on_reward}</span><span class="c5">&nbsp;</span><span class="c1 c7">{$resource_type}</span><span class="c5">&nbsp;as occupation tax from </span><span class="c1 c7">{$recipient_data[&#39;username&#39;]}</span><span class="c5">&#39;s harvesting reward.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// Pay recipient</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$resource_type</span><span class="c5">` = `</span><span class="c1 c7">$resource_type</span><span class="c5">` + ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$net_share</span><span class="c1">, </span><span class="c3">$recipient_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$asset_name</span><span class="c1">&nbsp;= str_replace([</span><span class="c5">&#39;nano_earned_&#39;</span><span class="c1">, </span><span class="c5">&#39;_&#39;</span><span class="c1">], [</span><span class="c5">&#39;&#39;</span><span class="c1">, </span><span class="c5">&#39; &#39;</span><span class="c1">], </span><span class="c3">$resource_type</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$dist_desc</span><span class="c1">&nbsp;= </span><span class="c5">&quot;Received a harvesting reward of </span><span class="c1 c7">{$net_share}</span><span class="c5">&nbsp;</span><span class="c1 c7">{$asset_name}</span><span class="c5">. Your actions: </span><span class="c1 c7">{$harvester[&#39;action_count&#39;]}</span><span class="c5">. Total actions: </span><span class="c1 c7">{$total_actions_24h}</span><span class="c5">. Your share: &quot;</span><span class="c1">&nbsp;. round(</span><span class="c3">$share_percentage</span><span class="c1">&nbsp;* </span><span class="c0">100</span><span class="c1">, </span><span class="c0">2</span><span class="c1">) . </span><span class="c5">&quot;%.&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$recipient_id</span><span class="c1">, </span><span class="c5">&#39;tax_distribution&#39;</span><span class="c1">, </span><span class="c3">$dist_desc</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$resource_type</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;nano_earned_balance&#39;</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_transaction(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$recipient_id</span><span class="c1">, </span><span class="c5">&#39;distribution_income&#39;</span><span class="c1">, </span><span class="c3">$net_share</span><span class="c1">, </span><span class="c5">&quot;Received harvesting reward.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c27 c7">// If no one harvested, the reward pool goes to the government</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$resource_type</span><span class="c5">` = `</span><span class="c1 c7">$resource_type</span><span class="c5">` + ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$harvesting_reward_pool</span><span class="c1">, GOVERNMENT_USER_ID]);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;</span><span class="c3">$net_income</span><span class="c1">;<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">process_payment</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$total_cost</span><span class="c2">, </span><span class="c3">$description</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT nano_unearned_balance, nano_earned_balance FROM users WHERE id = ? FOR UPDATE&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$user_balances</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp;</span><span class="c3">$unearned_payment</span><span class="c1">&nbsp;= min(</span><span class="c3">$total_cost</span><span class="c1">, (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$user_balances</span><span class="c1">[</span><span class="c5">&#39;nano_unearned_balance&#39;</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$earned_payment</span><span class="c1">&nbsp;= </span><span class="c3">$total_cost</span><span class="c1">&nbsp;- </span><span class="c3">$unearned_payment</span><span class="c1">;<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET nano_unearned_balance = nano_unearned_balance - ?, nano_earned_balance = nano_earned_balance - ? WHERE id = ?&quot;</span><span class="c1">)<br> &nbsp; &nbsp; &nbsp; &nbsp;-&gt;execute([</span><span class="c3">$unearned_payment</span><span class="c1">, </span><span class="c3">$earned_payment</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">]);<br><br> &nbsp; &nbsp;log_transaction(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;payment&#39;</span><span class="c1">, -</span><span class="c3">$total_cost</span><span class="c1">, </span><span class="c3">$description</span><span class="c1">);<br>}<br><br><br></span><span class="c27 c7">// --- API Endpoint Handlers ---</span><span class="c1"><br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_register</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$username</span><span class="c2">, </span><span class="c3">$password</span><span class="c2">, </span><span class="c3">$email</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c10 c7">empty</span><span class="c1">(</span><span class="c3">$username</span><span class="c1">) || </span><span class="c10 c7">empty</span><span class="c1">(</span><span class="c3">$password</span><span class="c1">) || </span><span class="c10 c7">empty</span><span class="c1">(</span><span class="c3">$email</span><span class="c1">)) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;All fields are required.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT id FROM users WHERE username = ? OR email = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$username</span><span class="c1">, </span><span class="c3">$email</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$stmt</span><span class="c1">-&gt;fetch()) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Username or email already exists.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c3">$hashed_password</span><span class="c1">&nbsp;= password_hash(</span><span class="c3">$password</span><span class="c1">, PASSWORD_DEFAULT);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO users (username, password, email) VALUES (?, ?, ?)&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$username</span><span class="c1">, </span><span class="c3">$hashed_password</span><span class="c1">, </span><span class="c3">$email</span><span class="c1">])) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$user_id</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;lastInsertId();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO buildings (user_id, building_type, level) VALUES (?, &#39;Dormitory&#39;, 1)&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO buildings (user_id, building_type, level) VALUES (?, &#39;Barracks&#39;, 0)&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO buildings (user_id, building_type, level) VALUES (?, &#39;Blacksmith&#39;, 0)&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;register&#39;</span><span class="c1">, </span><span class="c5">&#39;User account created.&#39;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Registration successful.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Registration failed.&#39;</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_login</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$username</span><span class="c2">, </span><span class="c3">$password</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT id, password FROM users WHERE username = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$username</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$user</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$user</span><span class="c1">&nbsp;&amp;&amp; password_verify(</span><span class="c3">$password</span><span class="c1">, </span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;password&#39;</span><span class="c1">])) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$_SESSION</span><span class="c1">[</span><span class="c5">&#39;user_id&#39;</span><span class="c1">] = </span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$_SESSION</span><span class="c1">[</span><span class="c5">&#39;username&#39;</span><span class="c1">] = </span><span class="c3">$username</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">];<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Invalid username or password.&#39;</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">get_user_data</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;exec(</span><span class="c5">&quot;SET time_zone = &#39;+03:00&#39;&quot;</span><span class="c1">);<br><br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT * FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(!</span><span class="c3">$data</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;session_destroy();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;User not found.&#39;</span><span class="c1">, </span><span class="c5">&#39;auth_error&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">];<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c10 c7">unset</span><span class="c1">(</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;password&#39;</span><span class="c1">]);<br><br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT building_type, level FROM buildings WHERE user_id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;buildings&#39;</span><span class="c1">] = [];<br> &nbsp; &nbsp;</span><span class="c10 c7">foreach</span><span class="c1">&nbsp;(</span><span class="c3">$stmt</span><span class="c1">-&gt;fetchAll() </span><span class="c10 c7">as</span><span class="c1">&nbsp;</span><span class="c3">$building</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;buildings&#39;</span><span class="c1">][</span><span class="c3">$building</span><span class="c1">[</span><span class="c5">&#39;building_type&#39;</span><span class="c1">]] = </span><span class="c3">$building</span><span class="c1">[</span><span class="c5">&#39;level&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT worker_id, task_type, completion_time FROM worker_tasks WHERE user_id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;worker_tasks&#39;</span><span class="c1">] = </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchAll();<br><br> &nbsp; &nbsp;</span><span class="c3">$total_power</span><span class="c1">&nbsp;= get_army_power(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$barracks_level</span><span class="c1">&nbsp;= </span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;buildings&#39;</span><span class="c1">][</span><span class="c5">&#39;Barracks&#39;</span><span class="c1">] ?? </span><span class="c0">0</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c3">$base_power</span><span class="c1">&nbsp;= floor(min((</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;soldiers&#39;</span><span class="c1">], (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;sword&#39;</span><span class="c1">]));<br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;military_power_breakdown&#39;</span><span class="c1">] = [<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;base&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$base_power</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;bonus_perc&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$barracks_level</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;total&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$total_power</span><span class="c1"><br> &nbsp; &nbsp;];<br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;military_power&#39;</span><span class="c1">] = </span><span class="c3">$total_power</span><span class="c1">; </span><span class="c27 c7">// Keep this for backward compatibility if needed anywhere else</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;soldier_recruit_cost&#39;</span><span class="c1">] = [<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;wood&#39;</span><span class="c1">&nbsp;=&gt; pow(</span><span class="c0">1.001</span><span class="c1">, (</span><span class="c10 c7">int</span><span class="c1">)</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;soldiers&#39;</span><span class="c1">]),<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;iron&#39;</span><span class="c1">&nbsp;=&gt; pow(</span><span class="c0">1.001</span><span class="c1">, (</span><span class="c10 c7">int</span><span class="c1">)</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;soldiers&#39;</span><span class="c1">]),<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;stone&#39;</span><span class="c1">&nbsp;=&gt; pow(</span><span class="c0">1.001</span><span class="c1">, (</span><span class="c10 c7">int</span><span class="c1">)</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;soldiers&#39;</span><span class="c1">]),<br> &nbsp; &nbsp;];<br> &nbsp; &nbsp;</span><span class="c3">$dorm_level</span><span class="c1">&nbsp;= </span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;buildings&#39;</span><span class="c1">][</span><span class="c5">&#39;Dormitory&#39;</span><span class="c1">] ?? </span><span class="c0">0</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;next_worker_level&#39;</span><span class="c1">] = (floor(</span><span class="c3">$dorm_level</span><span class="c1">&nbsp;/ </span><span class="c0">5</span><span class="c1">) + </span><span class="c0">1</span><span class="c1">) * </span><span class="c0">5</span><span class="c1">;<br><br><br> &nbsp; &nbsp;</span><span class="c27 c7">// Add server constants for the frontend</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;task_duration_seconds&#39;</span><span class="c1">] = TASK_DURATION_SECONDS;<br><br> &nbsp; &nbsp;</span><span class="c27 c7">// Productivity</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c3">$action_counts_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT action_type, COUNT(*) as count FROM action_logs WHERE user_id = ? AND action_type IN (&#39;Harvest Wood&#39;, &#39;Harvest Iron&#39;, &#39;Harvest Stone&#39;, &#39;job_completed&#39;) GROUP BY action_type&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$action_counts_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$counts</span><span class="c1">&nbsp;= array_column(</span><span class="c3">$action_counts_stmt</span><span class="c1">-&gt;fetchAll(), </span><span class="c5">&#39;count&#39;</span><span class="c1">, </span><span class="c5">&#39;action_type&#39;</span><span class="c1">);<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;productivity&#39;</span><span class="c1">] = [];<br> &nbsp; &nbsp;</span><span class="c3">$task_types</span><span class="c1">&nbsp;= [</span><span class="c5">&#39;Harvest Wood&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Wood&#39;</span><span class="c1">, </span><span class="c5">&#39;Harvest Iron&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Iron&#39;</span><span class="c1">, </span><span class="c5">&#39;Harvest Stone&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Stone&#39;</span><span class="c1">, </span><span class="c5">&#39;job_completed&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Sword&#39;</span><span class="c1">];<br> &nbsp; &nbsp;</span><span class="c3">$building_bonus</span><span class="c1">&nbsp;= </span><span class="c0">1</span><span class="c1">&nbsp;+ (</span><span class="c3">$dorm_level</span><span class="c1">&nbsp;/ </span><span class="c0">100</span><span class="c1">);<br><br> &nbsp; &nbsp;</span><span class="c10 c7">foreach</span><span class="c1">(</span><span class="c3">$task_types</span><span class="c1">&nbsp;</span><span class="c10 c7">as</span><span class="c1">&nbsp;</span><span class="c3">$task_name</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$item_name</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$actions</span><span class="c1">&nbsp;= </span><span class="c3">$counts</span><span class="c1">[</span><span class="c3">$task_name</span><span class="c1">] ?? </span><span class="c0">0</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$exp_level</span><span class="c1">&nbsp;= floor(sqrt(</span><span class="c3">$actions</span><span class="c1">));<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$exp_bonus</span><span class="c1">&nbsp;= </span><span class="c0">1</span><span class="c1">&nbsp;+ (</span><span class="c3">$exp_level</span><span class="c1">&nbsp;/ </span><span class="c0">100</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;productivity&#39;</span><span class="c1">][</span><span class="c3">$item_name</span><span class="c1">] = [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;base_yield&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">1.0</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;exp_bonus_perc&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$exp_level</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;building_bonus_perc&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$dorm_level</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;total_yield&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">1.0</span><span class="c1">&nbsp;* </span><span class="c3">$exp_bonus</span><span class="c1">&nbsp;* </span><span class="c3">$building_bonus</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;actions&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$actions</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;current_bonus_perc&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$exp_level</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;actions_for_next_level&#39;</span><span class="c1">&nbsp;=&gt; pow(</span><span class="c3">$exp_level</span><span class="c1">&nbsp;+ </span><span class="c0">1</span><span class="c1">, </span><span class="c0">2</span><span class="c1">),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;next_level_bonus_perc&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$exp_level</span><span class="c1">&nbsp;+ </span><span class="c0">1</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;];<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c27 c7">// Last 24H Harvest Activity</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c3">$harvest_actions</span><span class="c1">&nbsp;= [</span><span class="c5">&#39;Harvest Wood&#39;</span><span class="c1">, </span><span class="c5">&#39;Harvest Iron&#39;</span><span class="c1">, </span><span class="c5">&#39;Harvest Stone&#39;</span><span class="c1">];<br> &nbsp; &nbsp;</span><span class="c3">$stmt_user_24h</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT COUNT(*) FROM action_logs WHERE user_id = ? AND action_type IN (&#39;&quot;</span><span class="c1">&nbsp;. implode(</span><span class="c5">&quot;&#39;,&#39;&quot;</span><span class="c1">, </span><span class="c3">$harvest_actions</span><span class="c1">) . </span><span class="c5">&quot;&#39;) AND timestamp &gt;= DATE_SUB(NOW(), INTERVAL 24 HOUR)&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt_user_24h</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$user_actions_24h</span><span class="c1">&nbsp;= </span><span class="c3">$stmt_user_24h</span><span class="c1">-&gt;fetchColumn();<br><br> &nbsp; &nbsp;</span><span class="c3">$stmt_all_24h</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT COUNT(*) FROM action_logs WHERE action_type IN (&#39;&quot;</span><span class="c1">&nbsp;. implode(</span><span class="c5">&quot;&#39;,&#39;&quot;</span><span class="c1">, </span><span class="c3">$harvest_actions</span><span class="c1">) . </span><span class="c5">&quot;&#39;) AND timestamp &gt;= DATE_SUB(NOW(), INTERVAL 24 HOUR)&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt_all_24h</span><span class="c1">-&gt;execute();<br> &nbsp; &nbsp;</span><span class="c3">$all_actions_24h</span><span class="c1">&nbsp;= </span><span class="c3">$stmt_all_24h</span><span class="c1">-&gt;fetchColumn();<br><br> &nbsp; &nbsp;</span><span class="c3">$stmt_rewards</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT SUM(amount) FROM transactions WHERE user_id = ? AND type = &#39;distribution_income&#39; AND timestamp &gt;= DATE_SUB(NOW(), INTERVAL 24 HOUR)&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt_rewards</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$total_rewards_24h</span><span class="c1">&nbsp;= </span><span class="c3">$stmt_rewards</span><span class="c1">-&gt;fetchColumn() ?: </span><span class="c0">0</span><span class="c1">;<br><br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[</span><span class="c5">&#39;harvest_activity_24h&#39;</span><span class="c1">] = [<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;user_actions_24h&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$user_actions_24h</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;all_actions_24h&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$all_actions_24h</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;user_share_perc&#39;</span><span class="c1">&nbsp;=&gt; (</span><span class="c3">$all_actions_24h</span><span class="c1">&nbsp;&gt; </span><span class="c0">0</span><span class="c1">) ? (</span><span class="c3">$user_actions_24h</span><span class="c1">&nbsp;/ </span><span class="c3">$all_actions_24h</span><span class="c1">) * </span><span class="c0">100</span><span class="c1">&nbsp;: </span><span class="c0">0</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;total_rewards_24h&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$total_rewards_24h</span><span class="c1">,<br> &nbsp; &nbsp;];<br><br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$data</span><span class="c1">];<br>}<br><br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">start_task</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$task_type</span><span class="c2">, </span><span class="c3">$worker_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT COUNT(*) FROM worker_tasks WHERE user_id = ? AND worker_id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$worker_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$stmt</span><span class="c1">-&gt;fetchColumn() &gt; </span><span class="c0">0</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Worker is already busy.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c3">$completion_time</span><span class="c1">&nbsp;= date(</span><span class="c5">&#39;Y-m-d H:i:s&#39;</span><span class="c1">, time() + TASK_DURATION_SECONDS);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO worker_tasks (user_id, worker_id, task_type, completion_time) VALUES (?, ?, ?, ?)&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$worker_id</span><span class="c1">, </span><span class="c3">$task_type</span><span class="c1">, </span><span class="c3">$completion_time</span><span class="c1">])) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Task started.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Failed to start task.&#39;</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">complete_task</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;beginTransaction();<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT id, task_type, job_offer_id FROM worker_tasks WHERE user_id = ? AND completion_time &lt;= NOW() LIMIT 1&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$task</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(!</span><span class="c3">$task</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;No completed tasks found.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$task</span><span class="c1">[</span><span class="c5">&#39;job_offer_id&#39;</span><span class="c1">]) { <br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$job_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT * FROM job_offers WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$job_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$task</span><span class="c1">[</span><span class="c5">&#39;job_offer_id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$job</span><span class="c1">&nbsp;= </span><span class="c3">$job_stmt</span><span class="c1">-&gt;fetch();<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$job</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET </span><span class="c1 c7">{$job[&#39;item_to_produce&#39;]}</span><span class="c5">&nbsp;= </span><span class="c1 c7">{$job[&#39;item_to_produce&#39;]}</span><span class="c5">&nbsp;+ ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$job</span><span class="c1">[</span><span class="c5">&#39;quantity&#39;</span><span class="c1">], </span><span class="c3">$job</span><span class="c1">[</span><span class="c5">&#39;employer_id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$net_salary</span><span class="c1">&nbsp;= apply_taxes(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$job</span><span class="c1">[</span><span class="c5">&#39;salary&#39;</span><span class="c1">], </span><span class="c5">&#39;nano_earned_balance&#39;</span><span class="c1">, </span><span class="c5">&quot;salary for job #</span><span class="c1 c7">{$job[&#39;id&#39;]}</span><span class="c5">&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET nano_earned_balance = nano_earned_balance + ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$net_salary</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_transaction(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;job_payout&#39;</span><span class="c1">, </span><span class="c3">$net_salary</span><span class="c1">, </span><span class="c5">&quot;Received salary for job #</span><span class="c1 c7">{$job[&#39;id&#39;]}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE job_offers SET status = &#39;completed&#39; WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$job</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;job_completed&#39;</span><span class="c1">, </span><span class="c5">&quot;Completed job #</span><span class="c1 c7">{$job[&#39;id&#39;]}</span><span class="c5">&nbsp;for </span><span class="c1 c7">{$job[&#39;quantity&#39;]}</span><span class="c5">&nbsp;swords and earned a salary of </span><span class="c1 c7">{$net_salary}</span><span class="c5">&nbsp;currency.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$job</span><span class="c1">[</span><span class="c5">&#39;employer_id&#39;</span><span class="c1">], </span><span class="c5">&#39;job_production&#39;</span><span class="c1">, </span><span class="c5">&quot;Your job #</span><span class="c1 c7">{$job[&#39;id&#39;]}</span><span class="c5">&nbsp;was completed, you received </span><span class="c1 c7">{$job[&#39;quantity&#39;]}</span><span class="c5">&nbsp;</span><span class="c1 c7">{$job[&#39;item_to_produce&#39;]}</span><span class="c5">(s).&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c1">&nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(strpos(</span><span class="c3">$task</span><span class="c1">[</span><span class="c5">&#39;task_type&#39;</span><span class="c1">], </span><span class="c5">&#39;Harvest&#39;</span><span class="c1">) !== </span><span class="c0">false</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$resource_type</span><span class="c1">&nbsp;= strtolower(str_replace(</span><span class="c5">&#39;Harvest &#39;</span><span class="c1">, </span><span class="c5">&#39;&#39;</span><span class="c1">, </span><span class="c3">$task</span><span class="c1">[</span><span class="c5">&#39;task_type&#39;</span><span class="c1">]));<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_before</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT `</span><span class="c1 c7">$resource_type</span><span class="c5">` FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_before</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$before_balance</span><span class="c1">&nbsp;= </span><span class="c3">$stmt_before</span><span class="c1">-&gt;fetchColumn();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$count_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT COUNT(*) FROM action_logs WHERE user_id = ? AND action_type = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$count_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$task</span><span class="c1">[</span><span class="c5">&#39;task_type&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$actions</span><span class="c1">&nbsp;= </span><span class="c3">$count_stmt</span><span class="c1">-&gt;fetchColumn();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$exp_level</span><span class="c1">&nbsp;= floor(sqrt(</span><span class="c3">$actions</span><span class="c1">));<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$exp_bonus</span><span class="c1">&nbsp;= </span><span class="c0">1</span><span class="c1">&nbsp;+ (</span><span class="c3">$exp_level</span><span class="c1">&nbsp;/ </span><span class="c0">100</span><span class="c1">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$dorm_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT level FROM buildings WHERE user_id = ? AND building_type = &#39;Dormitory&#39;&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$dorm_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$dorm_level</span><span class="c1">&nbsp;= </span><span class="c3">$dorm_stmt</span><span class="c1">-&gt;fetchColumn() ?: </span><span class="c0">0</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$building_bonus</span><span class="c1">&nbsp;= </span><span class="c0">1</span><span class="c1">&nbsp;+ (</span><span class="c3">$dorm_level</span><span class="c1">&nbsp;/ </span><span class="c0">100</span><span class="c1">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$yield</span><span class="c1">&nbsp;= </span><span class="c0">1</span><span class="c1">&nbsp;* </span><span class="c3">$exp_bonus</span><span class="c1">&nbsp;* </span><span class="c3">$building_bonus</span><span class="c1">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$net_yield</span><span class="c1">&nbsp;= apply_taxes(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$yield</span><span class="c1">, </span><span class="c3">$resource_type</span><span class="c1">, </span><span class="c5">&quot;harvesting </span><span class="c1 c7">$resource_type</span><span class="c5">&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$update_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$resource_type</span><span class="c5">` = `</span><span class="c1 c7">$resource_type</span><span class="c5">` + ? WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$update_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$net_yield</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$after_balance</span><span class="c1">&nbsp;= </span><span class="c3">$before_balance</span><span class="c1">&nbsp;+ </span><span class="c3">$net_yield</span><span class="c1">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$task</span><span class="c1">[</span><span class="c5">&#39;task_type&#39;</span><span class="c1">], </span><span class="c5">&quot;Harvested </span><span class="c1 c7">{$yield}</span><span class="c5">&nbsp;</span><span class="c1 c7">{$resource_type}</span><span class="c5">&nbsp;(net: </span><span class="c1 c7">{$net_yield}</span><span class="c5">). Balance changed from </span><span class="c1 c7">{$before_balance}</span><span class="c5">&nbsp;to </span><span class="c1 c7">{$after_balance}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;DELETE FROM worker_tasks WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$task</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Task completed successfully!&#39;</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">upgrade_building</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$building_type</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;beginTransaction();<br><br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT level FROM buildings WHERE user_id = ? AND building_type = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$building_type</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$building</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(!</span><span class="c3">$building</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Building not found.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c3">$current_level</span><span class="c1">&nbsp;= </span><span class="c3">$building</span><span class="c1">[</span><span class="c5">&#39;level&#39;</span><span class="c1">];<br> &nbsp; &nbsp;</span><span class="c3">$next_level</span><span class="c1">&nbsp;= </span><span class="c3">$current_level</span><span class="c1">&nbsp;+ </span><span class="c0">1</span><span class="c1">;<br><br> &nbsp; &nbsp;</span><span class="c3">$cost</span><span class="c1">&nbsp;= pow(</span><span class="c0">2</span><span class="c1">, </span><span class="c3">$current_level</span><span class="c1">);<br><br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT wood, iron, stone FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$resources</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$resources</span><span class="c1">[</span><span class="c5">&#39;wood&#39;</span><span class="c1">] &lt; </span><span class="c3">$cost</span><span class="c1">&nbsp;|| </span><span class="c3">$resources</span><span class="c1">[</span><span class="c5">&#39;iron&#39;</span><span class="c1">] &lt; </span><span class="c3">$cost</span><span class="c1">&nbsp;|| </span><span class="c3">$resources</span><span class="c1">[</span><span class="c5">&#39;stone&#39;</span><span class="c1">] &lt; </span><span class="c3">$cost</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Not enough resources.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET wood = wood - ?, iron = iron - ?, stone = stone - ? WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$cost</span><span class="c1">, </span><span class="c3">$cost</span><span class="c1">, </span><span class="c3">$cost</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">]);<br><br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE buildings SET level = ? WHERE user_id = ? AND building_type = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$next_level</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$building_type</span><span class="c1">]);<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$building_type</span><span class="c1">&nbsp;== </span><span class="c5">&#39;Dormitory&#39;</span><span class="c1">&nbsp;&amp;&amp; </span><span class="c3">$next_level</span><span class="c1">&nbsp;% </span><span class="c0">5</span><span class="c1">&nbsp;== </span><span class="c0">0</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET workers = workers + 1 WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;new_worker&#39;</span><span class="c1">, </span><span class="c5">&quot;Gained a new worker from Dormitory reaching level </span><span class="c1 c7">$next_level</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;upgrade_building&#39;</span><span class="c1">, </span><span class="c5">&quot;Upgraded </span><span class="c1 c7">$building_type</span><span class="c5">&nbsp;to level </span><span class="c1 c7">$next_level</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&quot;</span><span class="c1 c7">$building_type</span><span class="c5">&nbsp;upgraded to level </span><span class="c1 c7">$next_level</span><span class="c5">.&quot;</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_recruit_soldiers</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;beginTransaction();<br> &nbsp; &nbsp;</span><span class="c10 c7">try</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT wood, iron, stone, soldiers FROM users WHERE id = ? FOR UPDATE&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$resources</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$cost</span><span class="c1">&nbsp;= pow(</span><span class="c0">1.001</span><span class="c1">, (</span><span class="c10 c7">int</span><span class="c1">)</span><span class="c3">$resources</span><span class="c1">[</span><span class="c5">&#39;soldiers&#39;</span><span class="c1">]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$resources</span><span class="c1">[</span><span class="c5">&#39;wood&#39;</span><span class="c1">] &lt; </span><span class="c3">$cost</span><span class="c1">&nbsp;|| </span><span class="c3">$resources</span><span class="c1">[</span><span class="c5">&#39;iron&#39;</span><span class="c1">] &lt; </span><span class="c3">$cost</span><span class="c1">&nbsp;|| </span><span class="c3">$resources</span><span class="c1">[</span><span class="c5">&#39;stone&#39;</span><span class="c1">] &lt; </span><span class="c3">$cost</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Not enough resources to recruit a soldier.&#39;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET wood = wood - ?, iron = iron - ?, stone = stone - ?, soldiers = soldiers + 1 WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$cost</span><span class="c1">, </span><span class="c3">$cost</span><span class="c1">, </span><span class="c3">$cost</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;recruit&#39;</span><span class="c1">, </span><span class="c5">&quot;Recruited 1 soldier.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&quot;Successfully recruited 1 soldier.&quot;</span><span class="c1">];<br> &nbsp; &nbsp;} </span><span class="c10 c7">catch</span><span class="c1">&nbsp;(</span><span class="c11 c7">Exception</span><span class="c1">&nbsp;</span><span class="c3">$e</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Error recruiting soldiers: &#39;</span><span class="c1">&nbsp;. </span><span class="c3">$e</span><span class="c1">-&gt;getMessage()];<br> &nbsp; &nbsp;}<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_get_job_offers</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;<br> &nbsp; &nbsp; &nbsp; &nbsp;SELECT j.*, u.username as employer_username <br> &nbsp; &nbsp; &nbsp; &nbsp;FROM job_offers j <br> &nbsp; &nbsp; &nbsp; &nbsp;JOIN users u ON j.employer_id = u.id <br> &nbsp; &nbsp; &nbsp; &nbsp;WHERE j.status = &#39;open&#39; AND j.employer_id != ? <br> &nbsp; &nbsp; &nbsp; &nbsp;ORDER BY j.created_at DESC<br> &nbsp; &nbsp;&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$jobs</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchAll();<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$jobs</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_post_job_offer</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$item</span><span class="c2">, </span><span class="c3">$quantity</span><span class="c2">, </span><span class="c3">$salary_per_item</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$item</span><span class="c1">&nbsp;!== </span><span class="c5">&#39;sword&#39;</span><span class="c1">&nbsp;|| </span><span class="c3">$quantity</span><span class="c1">&nbsp;&lt;= </span><span class="c0">0</span><span class="c1">&nbsp;|| </span><span class="c3">$salary_per_item</span><span class="c1">&nbsp;&lt;= </span><span class="c0">0</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Invalid job offer details.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c3">$total_salary</span><span class="c1">&nbsp;= (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$quantity</span><span class="c1">&nbsp;* (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$salary_per_item</span><span class="c1">;<br><br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;beginTransaction();<br> &nbsp; &nbsp;</span><span class="c10 c7">try</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT iron, nano_unearned_balance, nano_earned_balance FROM users WHERE id = ? FOR UPDATE&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$user</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$iron_cost</span><span class="c1">&nbsp;= (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$quantity</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;((</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;iron&#39;</span><span class="c1">] &lt; </span><span class="c3">$iron_cost</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Not enough iron.&#39;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(((</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;nano_unearned_balance&#39;</span><span class="c1">] + (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$user</span><span class="c1">[</span><span class="c5">&#39;nano_earned_balance&#39;</span><span class="c1">]) &lt; </span><span class="c3">$total_salary</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Not enough currency.&#39;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET iron = iron - ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$iron_cost</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;process_payment(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$total_salary</span><span class="c1">, </span><span class="c5">&quot;Escrow for posting job to produce </span><span class="c1 c7">$quantity</span><span class="c5">&nbsp;</span><span class="c1 c7">$item</span><span class="c5">.&quot;</span><span class="c1">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO job_offers (employer_id, item_to_produce, quantity, salary) VALUES (?, ?, ?, ?)&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$item</span><span class="c1">, </span><span class="c3">$quantity</span><span class="c1">, </span><span class="c3">$total_salary</span><span class="c1">]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;post_job&#39;</span><span class="c1">, </span><span class="c5">&quot;Posted a job to produce </span><span class="c1 c7">$quantity</span><span class="c5">&nbsp;</span><span class="c1 c7">$item</span><span class="c5">&nbsp;for a total salary of </span><span class="c1 c7">$total_salary</span><span class="c5">&nbsp;currency.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Job offer posted successfully.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;} </span><span class="c10 c7">catch</span><span class="c1">&nbsp;(</span><span class="c11 c7">Exception</span><span class="c1">&nbsp;</span><span class="c3">$e</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Error posting job: &#39;</span><span class="c1">&nbsp;. </span><span class="c3">$e</span><span class="c1">-&gt;getMessage()];<br> &nbsp; &nbsp;}<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_accept_job</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$job_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;beginTransaction();<br> &nbsp; &nbsp;</span><span class="c10 c7">try</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT workers FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$total_workers</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchColumn();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT COUNT(*) FROM worker_tasks WHERE user_id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$busy_workers</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchColumn();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$busy_workers</span><span class="c1">&nbsp;&gt;= </span><span class="c3">$total_workers</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;All your workers are busy.&#39;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$worker_id</span><span class="c1">&nbsp;= </span><span class="c0">-1</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">for</span><span class="c1">&nbsp;(</span><span class="c3">$i</span><span class="c1">=</span><span class="c0">1</span><span class="c1">; </span><span class="c3">$i</span><span class="c1">&nbsp;&lt;= </span><span class="c3">$total_workers</span><span class="c1">; </span><span class="c3">$i</span><span class="c1">++) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT COUNT(*) FROM worker_tasks WHERE user_id = ? AND worker_id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$i</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$stmt</span><span class="c1">-&gt;fetchColumn() == </span><span class="c0">0</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">$worker_id</span><span class="c1">&nbsp;= </span><span class="c3">$i</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT * FROM job_offers WHERE id = ? AND status = &#39;open&#39; FOR UPDATE&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$job_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$job</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(!</span><span class="c3">$job</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;This job is no longer available.&#39;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE job_offers SET status = &#39;taken&#39; WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$job_id</span><span class="c1">]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$completion_time</span><span class="c1">&nbsp;= date(</span><span class="c5">&#39;Y-m-d H:i:s&#39;</span><span class="c1">, time() + TASK_DURATION_SECONDS);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO worker_tasks (user_id, worker_id, task_type, completion_time, job_offer_id) VALUES (?, ?, &#39;Work on Job&#39;, ?, ?)&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$worker_id</span><span class="c1">, </span><span class="c3">$completion_time</span><span class="c1">, </span><span class="c3">$job_id</span><span class="c1">]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;accept_job&#39;</span><span class="c1">, </span><span class="c5">&quot;Accepted job #</span><span class="c1 c7">{$job_id}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&quot;Job accepted! Worker #</span><span class="c1 c7">{$worker_id}</span><span class="c5">&nbsp;has started the task.&quot;</span><span class="c1">];<br><br> &nbsp; &nbsp;} </span><span class="c10 c7">catch</span><span class="c1">&nbsp;(</span><span class="c11 c7">Exception</span><span class="c1">&nbsp;</span><span class="c3">$e</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Error accepting job: &#39;</span><span class="c1">&nbsp;. </span><span class="c3">$e</span><span class="c1">-&gt;getMessage()];<br> &nbsp; &nbsp;}<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">get_market_data</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$item_type</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$buy_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT price, SUM(quantity) as quantity FROM market_orders WHERE order_type = &#39;buy&#39; AND item_type = ? GROUP BY price ORDER BY price DESC&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$buy_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$item_type</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$buys</span><span class="c1">&nbsp;= </span><span class="c3">$buy_stmt</span><span class="c1">-&gt;fetchAll();<br><br> &nbsp; &nbsp;</span><span class="c3">$sell_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT price, SUM(quantity) as quantity FROM market_orders WHERE order_type = &#39;sell&#39; AND item_type = ? GROUP BY price ORDER BY price ASC&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$sell_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$item_type</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$sells</span><span class="c1">&nbsp;= </span><span class="c3">$sell_stmt</span><span class="c1">-&gt;fetchAll();<br><br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; [</span><span class="c5">&#39;buys&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$buys</span><span class="c1">, </span><span class="c5">&#39;sells&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$sells</span><span class="c1">]];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">place_market_order</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$order_type</span><span class="c2">, </span><span class="c3">$item_type</span><span class="c2">, </span><span class="c3">$quantity</span><span class="c2">, </span><span class="c3">$price</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$quantity</span><span class="c1">&nbsp;&lt;= </span><span class="c0">0</span><span class="c1">&nbsp;|| </span><span class="c3">$price</span><span class="c1">&nbsp;&lt;= </span><span class="c0">0</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Invalid quantity or price.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c3">$quantity</span><span class="c1">&nbsp;= floor(</span><span class="c3">$quantity</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;beginTransaction();<br><br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$order_type</span><span class="c1">&nbsp;== </span><span class="c5">&#39;sell&#39;</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT `</span><span class="c1 c7">$item_type</span><span class="c5">` FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$balance</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchColumn();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;((</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$balance</span><span class="c1">&nbsp;&lt; </span><span class="c3">$quantity</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&quot;Not enough </span><span class="c1 c7">$item_type</span><span class="c5">&nbsp;to sell.&quot;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$item_type</span><span class="c5">` = `</span><span class="c1 c7">$item_type</span><span class="c5">` - ? WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$quantity</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c1">&nbsp;{ </span><span class="c27 c7">// &#39;buy&#39; order</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$total_cost</span><span class="c1">&nbsp;= (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$quantity</span><span class="c1">&nbsp;* (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$price</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT (nano_unearned_balance + nano_earned_balance) as total_currency FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">((</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$stmt</span><span class="c1">-&gt;fetchColumn() &lt; </span><span class="c3">$total_cost</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&quot;Not enough currency to place buy order.&quot;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO market_orders (user_id, order_type, item_type, quantity, price) VALUES (?, ?, ?, ?, ?)&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$order_type</span><span class="c1">, </span><span class="c3">$item_type</span><span class="c1">, </span><span class="c3">$quantity</span><span class="c1">, </span><span class="c3">$price</span><span class="c1">]);<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;place_order&#39;</span><span class="c1">, </span><span class="c5">&quot;Placed a </span><span class="c1 c7">$order_type</span><span class="c5">&nbsp;order for </span><span class="c1 c7">$quantity</span><span class="c5">&nbsp;</span><span class="c1 c7">$item_type</span><span class="c5">&nbsp;at </span><span class="c1 c7">$price</span><span class="c5">&nbsp;currency each.&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;Order placed successfully.&#39;</span><span class="c1">];<br>}<br><br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">matchMarketOrders</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$item_type</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c10 c7">while</span><span class="c1">&nbsp;(</span><span class="c0">true</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;beginTransaction();<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$buy_order_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT * FROM market_orders WHERE order_type = &#39;buy&#39; AND item_type = ? ORDER BY price DESC, created_at ASC LIMIT 1 FOR UPDATE&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$buy_order_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$item_type</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$buy_order</span><span class="c1">&nbsp;= </span><span class="c3">$buy_order_stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$sell_order_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT * FROM market_orders WHERE order_type = &#39;sell&#39; AND item_type = ? ORDER BY price ASC, created_at ASC LIMIT 1 FOR UPDATE&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$sell_order_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$item_type</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$sell_order</span><span class="c1">&nbsp;= </span><span class="c3">$sell_order_stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(!</span><span class="c3">$buy_order</span><span class="c1">&nbsp;|| !</span><span class="c3">$sell_order</span><span class="c1">&nbsp;|| (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$buy_order</span><span class="c1">[</span><span class="c5">&#39;price&#39;</span><span class="c1">] &lt; (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$sell_order</span><span class="c1">[</span><span class="c5">&#39;price&#39;</span><span class="c1">]) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$trade_quantity</span><span class="c1">&nbsp;= min(</span><span class="c3">$buy_order</span><span class="c1">[</span><span class="c5">&#39;quantity&#39;</span><span class="c1">], </span><span class="c3">$sell_order</span><span class="c1">[</span><span class="c5">&#39;quantity&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$trade_price</span><span class="c1">&nbsp;= (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$sell_order</span><span class="c1">[</span><span class="c5">&#39;price&#39;</span><span class="c1">];<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$total_cost</span><span class="c1">&nbsp;= </span><span class="c3">$trade_quantity</span><span class="c1">&nbsp;* </span><span class="c3">$trade_price</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$buyer_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT id, username, nano_unearned_balance, nano_earned_balance FROM users WHERE id = ? FOR UPDATE&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$buyer_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$buy_order</span><span class="c1">[</span><span class="c5">&#39;user_id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$buyer</span><span class="c1">&nbsp;= </span><span class="c3">$buyer_stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$seller_stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT id, username FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$seller_stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$sell_order</span><span class="c1">[</span><span class="c5">&#39;user_id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$seller</span><span class="c1">&nbsp;= </span><span class="c3">$seller_stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(((</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$buyer</span><span class="c1">[</span><span class="c5">&#39;nano_unearned_balance&#39;</span><span class="c1">] + (</span><span class="c10 c7">float</span><span class="c1">)</span><span class="c3">$buyer</span><span class="c1">[</span><span class="c5">&#39;nano_earned_balance&#39;</span><span class="c1">]) &lt; </span><span class="c3">$total_cost</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$buyer</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">], </span><span class="c5">&#39;market_fail&#39;</span><span class="c1">, </span><span class="c5">&quot;Failed to buy </span><span class="c1 c7">$trade_quantity</span><span class="c5">&nbsp;</span><span class="c1 c7">$item_type</span><span class="c5">&nbsp;due to insufficient funds.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">; <br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;process_payment(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$buyer</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">], </span><span class="c3">$total_cost</span><span class="c1">, </span><span class="c5">&quot;Bought </span><span class="c1 c7">$trade_quantity</span><span class="c5">&nbsp;</span><span class="c1 c7">$item_type</span><span class="c5">&nbsp;from market.&quot;</span><span class="c1">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$net_income</span><span class="c1">&nbsp;= apply_taxes(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$seller</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">], </span><span class="c3">$total_cost</span><span class="c1">, </span><span class="c5">&#39;nano_earned_balance&#39;</span><span class="c1">, </span><span class="c5">&quot;market sale of </span><span class="c1 c7">$item_type</span><span class="c5">&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET nano_earned_balance = nano_earned_balance + ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$net_income</span><span class="c1">, </span><span class="c3">$seller</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;log_transaction(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$seller</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">], </span><span class="c5">&#39;market_sale&#39;</span><span class="c1">, </span><span class="c3">$net_income</span><span class="c1">, </span><span class="c5">&quot;Sold </span><span class="c1 c7">$trade_quantity</span><span class="c5">&nbsp;</span><span class="c1 c7">$item_type</span><span class="c5">&nbsp;on market.&quot;</span><span class="c1">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET `</span><span class="c1 c7">$item_type</span><span class="c5">` = `</span><span class="c1 c7">$item_type</span><span class="c5">` + ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$trade_quantity</span><span class="c1">, </span><span class="c3">$buyer</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$buy_order</span><span class="c1">[</span><span class="c5">&#39;quantity&#39;</span><span class="c1">] == </span><span class="c3">$trade_quantity</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;DELETE FROM market_orders WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$buy_order</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE market_orders SET quantity = quantity - ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$trade_quantity</span><span class="c1">, </span><span class="c3">$buy_order</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$sell_order</span><span class="c1">[</span><span class="c5">&#39;quantity&#39;</span><span class="c1">] == </span><span class="c3">$trade_quantity</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;DELETE FROM market_orders WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$sell_order</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE market_orders SET quantity = quantity - ? WHERE id = ?&quot;</span><span class="c1">)-&gt;execute([</span><span class="c3">$trade_quantity</span><span class="c1">, </span><span class="c3">$sell_order</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$buyer</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">], </span><span class="c5">&#39;market_trade&#39;</span><span class="c1">, </span><span class="c5">&quot;Bought </span><span class="c1 c7">$trade_quantity</span><span class="c5">&nbsp;</span><span class="c1 c7">$item_type</span><span class="c5">&nbsp;for </span><span class="c1 c7">$total_cost</span><span class="c5">&nbsp;currency from </span><span class="c1 c7">{$seller[&#39;username&#39;]}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$seller</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">], </span><span class="c5">&#39;market_trade&#39;</span><span class="c1">, </span><span class="c5">&quot;Sold </span><span class="c1 c7">$trade_quantity</span><span class="c5">&nbsp;</span><span class="c1 c7">$item_type</span><span class="c5">&nbsp;for </span><span class="c1 c7">$total_cost</span><span class="c5">&nbsp;currency to </span><span class="c1 c7">{$buyer[&#39;username&#39;]}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp;}<br>}<br><br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">get_history</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT description, timestamp FROM action_logs WHERE user_id = ? ORDER BY timestamp DESC LIMIT 100&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$logs</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchAll();<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$logs</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_get_tax_history</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$query</span><span class="c1">&nbsp;= </span><span class="c5">&quot;SELECT u.username, a.description, a.timestamp <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FROM action_logs a<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;JOIN users u ON a.user_id = u.id<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WHERE a.action_type = &#39;tax_payment&#39;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ORDER BY a.timestamp DESC <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LIMIT 200&quot;</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c3">$query</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute();<br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchAll();<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$data</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c7 c17">handle_get_government_data</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT nano_earned_balance, nano_unearned_balance, wood, iron, stone FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([GOVERNMENT_USER_ID]);<br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$data</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_get_distribution_data</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT SUM(amount) as total_tax FROM transactions WHERE user_id = ? AND type = &#39;tax_income&#39; AND timestamp &gt;= DATE_SUB(NOW(), INTERVAL 24 HOUR)&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([GOVERNMENT_USER_ID]);<br> &nbsp; &nbsp;</span><span class="c3">$total</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchColumn();<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; [</span><span class="c5">&#39;total_tax_24h&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$total</span><span class="c1">&nbsp;?? </span><span class="c0">0</span><span class="c1">]];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_get_distribution_history</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$query</span><span class="c1">&nbsp;= </span><span class="c5">&quot;SELECT u.username, a.description, a.timestamp <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FROM action_logs a<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;JOIN users u ON a.user_id = u.id<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WHERE a.action_type = &#39;tax_distribution&#39;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ORDER BY a.timestamp DESC <br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LIMIT 200&quot;</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c3">$query</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute();<br> &nbsp; &nbsp;</span><span class="c3">$logs</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchAll();<br><br> &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">&nbsp;= [];<br> &nbsp; &nbsp;</span><span class="c10 c7">foreach</span><span class="c1">&nbsp;(</span><span class="c3">$logs</span><span class="c1">&nbsp;</span><span class="c10 c7">as</span><span class="c1">&nbsp;</span><span class="c3">$log</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(preg_match(</span><span class="c5">&quot;/of ([\d\.]+) ([\w\s]+)\./&quot;</span><span class="c1">, </span><span class="c3">$log</span><span class="c1">[</span><span class="c5">&#39;description&#39;</span><span class="c1">], </span><span class="c3">$matches</span><span class="c1">)) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$data</span><span class="c1">[] = [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;username&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$log</span><span class="c1">[</span><span class="c5">&#39;username&#39;</span><span class="c1">],<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;amount&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$matches</span><span class="c1">[</span><span class="c0">1</span><span class="c1">],<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;asset_type&#39;</span><span class="c1">&nbsp;=&gt; ucwords(</span><span class="c3">$matches</span><span class="c1">[</span><span class="c0">2</span><span class="c1">]),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;description&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$log</span><span class="c1">[</span><span class="c5">&#39;description&#39;</span><span class="c1">],<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;timestamp&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$log</span><span class="c1">[</span><span class="c5">&#39;timestamp&#39;</span><span class="c1">]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;];<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$data</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_get_harvesting_activity</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$timeframe</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$where_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;&quot;</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$timeframe</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;24_hours&#39;</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$where_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;AND al.timestamp &gt;= DATE_SUB(NOW(), INTERVAL 24 HOUR)&quot;</span><span class="c1">;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c3">$query</span><span class="c1">&nbsp;= </span><span class="c5">&quot;SELECT u.username, COUNT(al.id) as action_count<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FROM users u<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LEFT JOIN action_logs al ON u.id = al.user_id AND al.action_type IN (&#39;Harvest Wood&#39;, &#39;Harvest Iron&#39;, &#39;Harvest Stone&#39;) </span><span class="c1 c7">$where_clause</span><span class="c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WHERE u.id != ?<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;GROUP BY u.id, u.username<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ORDER BY action_count DESC<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LIMIT 100&quot;</span><span class="c1">;<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c3">$query</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([GOVERNMENT_USER_ID]);<br> &nbsp; &nbsp;</span><span class="c3">$players</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchAll();<br><br> &nbsp; &nbsp;</span><span class="c3">$ranked_players</span><span class="c1">&nbsp;= [];<br> &nbsp; &nbsp;</span><span class="c10 c7">foreach</span><span class="c1">&nbsp;(</span><span class="c3">$players</span><span class="c1">&nbsp;</span><span class="c10 c7">as</span><span class="c1">&nbsp;</span><span class="c3">$index</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$player</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$player</span><span class="c1">[</span><span class="c5">&#39;rank&#39;</span><span class="c1">] = </span><span class="c3">$index</span><span class="c1">&nbsp;+ </span><span class="c0">1</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$ranked_players</span><span class="c1">[] = </span><span class="c3">$player</span><span class="c1">;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$ranked_players</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_get_leaderboard</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$sort_by</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$select_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;u.username, &quot;</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c3">$from_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;FROM users u&quot;</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c3">$where_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;WHERE u.id != &quot;</span><span class="c1">&nbsp;. GOVERNMENT_USER_ID;<br> &nbsp; &nbsp;</span><span class="c3">$order_by_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;&quot;</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c3">$group_by_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;&quot;</span><span class="c1">;<br><br> &nbsp; &nbsp;</span><span class="c10 c7">switch</span><span class="c1">&nbsp;(</span><span class="c3">$sort_by</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;military_power&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$select_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot;(FLOOR(LEAST(u.soldiers, u.sword) * (1 + (b.level / 100)))) as score&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$from_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; LEFT JOIN buildings b ON u.id = b.user_id AND b.building_type = &#39;Barracks&#39;&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$order_by_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;ORDER BY score DESC, u.id ASC&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;sword&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;workers&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$select_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot;u.</span><span class="c1 c7">$sort_by</span><span class="c5">&nbsp;as score&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$order_by_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;ORDER BY score DESC, u.id ASC&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;prod_today&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;prod_7_days&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;prod_30_days&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;prod_all_time&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$select_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot;COUNT(al.id) as score&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$from_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; LEFT JOIN action_logs al ON u.id = al.user_id AND al.action_type IN (&#39;Harvest Wood&#39;, &#39;Harvest Iron&#39;, &#39;Harvest Stone&#39;, &#39;job_completed&#39;)&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$sort_by</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;prod_today&#39;</span><span class="c1">) </span><span class="c3">$where_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; AND al.timestamp &gt;= CURDATE()&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$sort_by</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;prod_7_days&#39;</span><span class="c1">) </span><span class="c3">$where_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; AND al.timestamp &gt;= DATE_SUB(NOW(), INTERVAL 7 DAY)&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$sort_by</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;prod_30_days&#39;</span><span class="c1">) </span><span class="c3">$where_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; AND al.timestamp &gt;= DATE_SUB(NOW(), INTERVAL 30 DAY)&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$group_by_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;GROUP BY u.id, u.username&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$order_by_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;ORDER BY score DESC, u.id ASC&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;harvest_total&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;harvest_wood_total&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;harvest_iron_total&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;harvest_stone_total&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;swords_produced_total&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$select_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot;SUM(CAST(SUBSTRING_INDEX(SUBSTRING_INDEX(al.description, &#39; &#39;, -2), &#39; &#39;, 1) AS DECIMAL(10,4))) as score&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$from_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; JOIN action_logs al ON u.id = al.user_id&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">(</span><span class="c3">$sort_by</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;harvest_wood_total&#39;</span><span class="c1">) </span><span class="c3">$where_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; AND al.action_type = &#39;Harvest Wood&#39;&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">(</span><span class="c3">$sort_by</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;harvest_iron_total&#39;</span><span class="c1">) </span><span class="c3">$where_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; AND al.action_type = &#39;Harvest Iron&#39;&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">(</span><span class="c3">$sort_by</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;harvest_stone_total&#39;</span><span class="c1">) </span><span class="c3">$where_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; AND al.action_type = &#39;Harvest Stone&#39;&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">(</span><span class="c3">$sort_by</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;harvest_total&#39;</span><span class="c1">) </span><span class="c3">$where_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; AND al.action_type IN (&#39;Harvest Wood&#39;, &#39;Harvest Iron&#39;, &#39;Harvest Stone&#39;)&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">(</span><span class="c3">$sort_by</span><span class="c1">&nbsp;=== </span><span class="c5">&#39;swords_produced_total&#39;</span><span class="c1">) </span><span class="c3">$where_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot; AND al.action_type = &#39;job_completed&#39;&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$group_by_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;GROUP BY u.id, u.username&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$order_by_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;ORDER BY score DESC, u.id ASC&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">case</span><span class="c1">&nbsp;</span><span class="c5">&#39;net_worth&#39;</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">default</span><span class="c1">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$select_clause</span><span class="c1">&nbsp;.= </span><span class="c5">&quot;(u.nano_unearned_balance + u.nano_earned_balance + (u.wood * 0.1) + (u.iron * 0.2) + (u.stone * 0.15) + (u.sword * 1.0)) as score&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$order_by_clause</span><span class="c1">&nbsp;= </span><span class="c5">&quot;ORDER BY score DESC, u.id ASC&quot;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">break</span><span class="c1">;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c3">$query</span><span class="c1">&nbsp;= </span><span class="c5">&quot;SELECT &quot;</span><span class="c1">&nbsp;. </span><span class="c3">$select_clause</span><span class="c1">&nbsp;. </span><span class="c5">&quot; &quot;</span><span class="c1">&nbsp;. </span><span class="c3">$from_clause</span><span class="c1">&nbsp;. </span><span class="c5">&quot; &quot;</span><span class="c1">&nbsp;. </span><span class="c3">$where_clause</span><span class="c1">&nbsp;. </span><span class="c5">&quot; &quot;</span><span class="c1">&nbsp;. </span><span class="c3">$group_by_clause</span><span class="c1">&nbsp;. </span><span class="c5">&quot; &quot;</span><span class="c1">&nbsp;. </span><span class="c3">$order_by_clause</span><span class="c1">&nbsp;. </span><span class="c5">&quot; LIMIT 100&quot;</span><span class="c1">;<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c3">$query</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute();<br> &nbsp; &nbsp;</span><span class="c3">$players</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchAll();<br><br> &nbsp; &nbsp;</span><span class="c3">$ranked_players</span><span class="c1">&nbsp;= [];<br> &nbsp; &nbsp;</span><span class="c10 c7">foreach</span><span class="c1">&nbsp;(</span><span class="c3">$players</span><span class="c1">&nbsp;</span><span class="c10 c7">as</span><span class="c1">&nbsp;</span><span class="c3">$index</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$player</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$player</span><span class="c1">[</span><span class="c5">&#39;rank&#39;</span><span class="c1">] = </span><span class="c3">$index</span><span class="c1">&nbsp;+ </span><span class="c0">1</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$player</span><span class="c1">[</span><span class="c5">&#39;score&#39;</span><span class="c1">] = </span><span class="c3">$player</span><span class="c1">[</span><span class="c5">&#39;score&#39;</span><span class="c1">] ?? </span><span class="c0">0</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$ranked_players</span><span class="c1">[] = </span><span class="c3">$player</span><span class="c1">;<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$ranked_players</span><span class="c1">];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_get_conquer_data</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;exec(</span><span class="c5">&quot;SET time_zone = &#39;+03:00&#39;&quot;</span><span class="c1">);<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c3">$my_power</span><span class="c1">&nbsp;= get_army_power(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">);<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c27 c7">// Get players I occupy and calculate used power</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT id, username FROM users WHERE occupied_by = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp;</span><span class="c3">$occupied_players_raw</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchAll();<br><br> &nbsp; &nbsp;</span><span class="c3">$used_power</span><span class="c1">&nbsp;= </span><span class="c0">0</span><span class="c1">;<br> &nbsp; &nbsp;</span><span class="c3">$occupied_players</span><span class="c1">&nbsp;= [];<br> &nbsp; &nbsp;</span><span class="c10 c7">foreach</span><span class="c1">&nbsp;(</span><span class="c3">$occupied_players_raw</span><span class="c1">&nbsp;</span><span class="c10 c7">as</span><span class="c1">&nbsp;</span><span class="c3">$p</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$power</span><span class="c1">&nbsp;= get_army_power(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$p</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$used_power</span><span class="c1">&nbsp;+= </span><span class="c3">$power</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$occupied_players</span><span class="c1">[] = [</span><span class="c5">&#39;id&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$p</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">], </span><span class="c5">&#39;username&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$p</span><span class="c1">[</span><span class="c5">&#39;username&#39;</span><span class="c1">], </span><span class="c5">&#39;army_power&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$power</span><span class="c1">];<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c3">$unused_power</span><span class="c1">&nbsp;= </span><span class="c3">$my_power</span><span class="c1">&nbsp;- </span><span class="c3">$used_power</span><span class="c1">;<br><br> &nbsp; &nbsp;</span><span class="c27 c7">// Get all potential targets</span><span class="c1"><br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT id, username, occupied_by FROM users WHERE id NOT IN (?, ?)&quot;</span><span class="c1">);<br> &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, GOVERNMENT_USER_ID]);<br> &nbsp; &nbsp;</span><span class="c3">$all_other_players</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetchAll();<br><br> &nbsp; &nbsp;</span><span class="c3">$potential_targets</span><span class="c1">&nbsp;= [];<br> &nbsp; &nbsp;</span><span class="c10 c7">foreach</span><span class="c1">(</span><span class="c3">$all_other_players</span><span class="c1">&nbsp;</span><span class="c10 c7">as</span><span class="c1">&nbsp;</span><span class="c3">$p</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target_power</span><span class="c1">&nbsp;= get_army_power(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$p</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target_data</span><span class="c1">&nbsp;= [</span><span class="c5">&#39;id&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$p</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">], </span><span class="c5">&#39;username&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$p</span><span class="c1">[</span><span class="c5">&#39;username&#39;</span><span class="c1">], </span><span class="c5">&#39;army_power&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$target_power</span><span class="c1">];<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$p</span><span class="c1">[</span><span class="c5">&#39;occupied_by&#39;</span><span class="c1">] !== </span><span class="c0">null</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target_data</span><span class="c1">[</span><span class="c5">&#39;status&#39;</span><span class="c1">] = </span><span class="c5">&#39;Already Occupied&#39;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">elseif</span><span class="c1">&nbsp;(</span><span class="c3">$unused_power</span><span class="c1">&nbsp;&lt;= </span><span class="c3">$target_power</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target_data</span><span class="c1">[</span><span class="c5">&#39;status&#39;</span><span class="c1">] = </span><span class="c5">&#39;Power Too Low&#39;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c10 c7">else</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// Check for protection</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT * FROM occupation_history WHERE occupied_id = ? AND action = &#39;liberate&#39; ORDER BY timestamp DESC LIMIT 1&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt</span><span class="c1">-&gt;execute([</span><span class="c3">$p</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$last_liberation</span><span class="c1">&nbsp;= </span><span class="c3">$stmt</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$is_protected</span><span class="c1">&nbsp;= </span><span class="c0">false</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$last_liberation</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$now</span><span class="c1">&nbsp;= </span><span class="c10 c7">new</span><span class="c1">&nbsp;DateTime();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$liberation_time</span><span class="c1">&nbsp;= </span><span class="c10 c7">new</span><span class="c1">&nbsp;DateTime(</span><span class="c3">$last_liberation</span><span class="c1">[</span><span class="c5">&#39;timestamp&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// General 14-day protection</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$protection_end_14</span><span class="c1">&nbsp;= (</span><span class="c10 c7">clone</span><span class="c1">&nbsp;</span><span class="c3">$liberation_time</span><span class="c1">)-&gt;add(</span><span class="c10 c7">new</span><span class="c1">&nbsp;DateInterval(</span><span class="c5">&#39;P14D&#39;</span><span class="c1">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$now</span><span class="c1">&nbsp;&lt; </span><span class="c3">$protection_end_14</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$is_protected</span><span class="c1">&nbsp;= </span><span class="c0">true</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target_data</span><span class="c1">[</span><span class="c5">&#39;status&#39;</span><span class="c1">] = </span><span class="c5">&#39;protected&#39;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target_data</span><span class="c1">[</span><span class="c5">&#39;protection_end_time&#39;</span><span class="c1">] = </span><span class="c3">$protection_end_14</span><span class="c1">-&gt;format(</span><span class="c5">&#39;Y-m-d H:i:s&#39;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// Specific 30-day protection</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$last_liberation</span><span class="c1">[</span><span class="c5">&#39;occupier_id&#39;</span><span class="c1">] == </span><span class="c3">$user_id</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$protection_end_30</span><span class="c1">&nbsp;= (</span><span class="c10 c7">clone</span><span class="c1">&nbsp;</span><span class="c3">$liberation_time</span><span class="c1">)-&gt;add(</span><span class="c10 c7">new</span><span class="c1">&nbsp;DateInterval(</span><span class="c5">&#39;P30D&#39;</span><span class="c1">));<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$now</span><span class="c1">&nbsp;&lt; </span><span class="c3">$protection_end_30</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$is_protected</span><span class="c1">&nbsp;= </span><span class="c0">true</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target_data</span><span class="c1">[</span><span class="c5">&#39;status&#39;</span><span class="c1">] = </span><span class="c5">&#39;protected&#39;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target_data</span><span class="c1">[</span><span class="c5">&#39;protection_end_time&#39;</span><span class="c1">] = </span><span class="c3">$protection_end_30</span><span class="c1">-&gt;format(</span><span class="c5">&#39;Y-m-d H:i:s&#39;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(!</span><span class="c3">$is_protected</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c3">$target_data</span><span class="c1">[</span><span class="c5">&#39;status&#39;</span><span class="c1">] = </span><span class="c5">&#39;conquerable&#39;</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$potential_targets</span><span class="c1">[] = </span><span class="c3">$target_data</span><span class="c1">;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;data&#39;</span><span class="c1">&nbsp;=&gt; [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;total_power&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$my_power</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;used_power&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$used_power</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;unused_power&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$unused_power</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;occupied_players&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$occupied_players</span><span class="c1">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">&#39;potential_targets&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$potential_targets</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;]<br> &nbsp; &nbsp;];<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_conquer_player</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$target_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$user_id</span><span class="c1">&nbsp;== </span><span class="c3">$target_id</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&#39;You cannot conquer yourself.&#39;</span><span class="c1">];<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;beginTransaction();<br> &nbsp; &nbsp;</span><span class="c10 c7">try</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// Re-run all checks from get_conquer_data server-side to prevent manipulation</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$my_power</span><span class="c1">&nbsp;= get_army_power(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_used</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT id FROM users WHERE occupied_by = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_used</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$occupied_players_raw</span><span class="c1">&nbsp;= </span><span class="c3">$stmt_used</span><span class="c1">-&gt;fetchAll();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$used_power</span><span class="c1">&nbsp;= </span><span class="c0">0</span><span class="c1">;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">foreach</span><span class="c1">&nbsp;(</span><span class="c3">$occupied_players_raw</span><span class="c1">&nbsp;</span><span class="c10 c7">as</span><span class="c1">&nbsp;</span><span class="c3">$p</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$used_power</span><span class="c1">&nbsp;+= get_army_power(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$p</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$unused_power</span><span class="c1">&nbsp;= </span><span class="c3">$my_power</span><span class="c1">&nbsp;- </span><span class="c3">$used_power</span><span class="c1">;<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_target</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT * FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_target</span><span class="c1">-&gt;execute([</span><span class="c3">$target_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target</span><span class="c1">&nbsp;= </span><span class="c3">$stmt_target</span><span class="c1">-&gt;fetch();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target_power</span><span class="c1">&nbsp;= get_army_power(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$target_id</span><span class="c1">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(!</span><span class="c3">$target</span><span class="c1">&nbsp;|| </span><span class="c3">$target</span><span class="c1">[</span><span class="c5">&#39;id&#39;</span><span class="c1">] == GOVERNMENT_USER_ID) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10 c7">throw</span><span class="c1">&nbsp;</span><span class="c10 c7">new</span><span class="c1">&nbsp;</span><span class="c11 c7">Exception</span><span class="c1">(</span><span class="c5">&quot;Invalid target.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$target</span><span class="c1">[</span><span class="c5">&#39;occupied_by&#39;</span><span class="c1">] !== </span><span class="c0">null</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">throw</span><span class="c1">&nbsp;</span><span class="c10 c7">new</span><span class="c1">&nbsp;</span><span class="c11 c7">Exception</span><span class="c1">(</span><span class="c5">&quot;This player is already occupied.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$unused_power</span><span class="c1">&nbsp;&lt;= </span><span class="c3">$target_power</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">throw</span><span class="c1">&nbsp;</span><span class="c10 c7">new</span><span class="c1">&nbsp;</span><span class="c11 c7">Exception</span><span class="c1">(</span><span class="c5">&quot;Your unused army power is too low to conquer this player.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// Check protections</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_prot</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT * FROM occupation_history WHERE occupied_id = ? AND action = &#39;liberate&#39; ORDER BY timestamp DESC LIMIT 1&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_prot</span><span class="c1">-&gt;execute([</span><span class="c3">$target_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$last_liberation</span><span class="c1">&nbsp;= </span><span class="c3">$stmt_prot</span><span class="c1">-&gt;fetch();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$last_liberation</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$now</span><span class="c1">&nbsp;= </span><span class="c10 c7">new</span><span class="c1">&nbsp;DateTime();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$liberation_time</span><span class="c1">&nbsp;= </span><span class="c10 c7">new</span><span class="c1">&nbsp;DateTime(</span><span class="c3">$last_liberation</span><span class="c1">[</span><span class="c5">&#39;timestamp&#39;</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$now</span><span class="c1">&nbsp;&lt; (</span><span class="c10 c7">clone</span><span class="c1">&nbsp;</span><span class="c3">$liberation_time</span><span class="c1">)-&gt;add(</span><span class="c10 c7">new</span><span class="c1">&nbsp;DateInterval(</span><span class="c5">&#39;P14D&#39;</span><span class="c1">))) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10 c7">throw</span><span class="c1">&nbsp;</span><span class="c10 c7">new</span><span class="c1">&nbsp;</span><span class="c11 c7">Exception</span><span class="c1">(</span><span class="c5">&quot;This player is under a general protection period.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(</span><span class="c3">$last_liberation</span><span class="c1">[</span><span class="c5">&#39;occupier_id&#39;</span><span class="c1">] == </span><span class="c3">$user_id</span><span class="c1">&nbsp;&amp;&amp; </span><span class="c3">$now</span><span class="c1">&nbsp;&lt; (</span><span class="c10 c7">clone</span><span class="c1">&nbsp;</span><span class="c3">$liberation_time</span><span class="c1">)-&gt;add(</span><span class="c10 c7">new</span><span class="c1">&nbsp;DateInterval(</span><span class="c5">&#39;P30D&#39;</span><span class="c1">))) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10 c7">throw</span><span class="c1">&nbsp;</span><span class="c10 c7">new</span><span class="c1">&nbsp;</span><span class="c11 c7">Exception</span><span class="c1">(</span><span class="c5">&quot;You cannot re-conquer this player so soon after liberating them.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c27 c7">// If all checks pass, conquer the player</span><span class="c1"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_update</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET occupied_by = ? WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_update</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$target_id</span><span class="c1">]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_log</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO occupation_history (occupier_id, occupied_id, action) VALUES (?, ?, &#39;conquer&#39;)&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_log</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$target_id</span><span class="c1">]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;conquer&#39;</span><span class="c1">, </span><span class="c5">&quot;You have conquered player </span><span class="c1 c7">{$target[&#39;username&#39;]}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$target_id</span><span class="c1">, </span><span class="c5">&#39;conquered&#39;</span><span class="c1">, </span><span class="c5">&quot;You have been conquered by another player.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&quot;You have successfully conquered </span><span class="c1 c7">{$target[&#39;username&#39;]}</span><span class="c5">!&quot;</span><span class="c1">];<br><br> &nbsp; &nbsp;} </span><span class="c10 c7">catch</span><span class="c1">&nbsp;(</span><span class="c11 c7">Exception</span><span class="c1">&nbsp;</span><span class="c3">$e</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$e</span><span class="c1">-&gt;getMessage()];<br> &nbsp; &nbsp;}<br>}<br><br></span><span class="c10 c7">function</span><span class="c2">&nbsp;</span><span class="c17 c7">handle_liberate_player</span><span class="c2">(</span><span class="c3">$pdo</span><span class="c2">, </span><span class="c3">$user_id</span><span class="c2">, </span><span class="c3">$target_id</span><span class="c2">) </span><span class="c1">{<br> &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;beginTransaction();<br> &nbsp; &nbsp;</span><span class="c10 c7">try</span><span class="c1">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_target</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;SELECT username, occupied_by FROM users WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_target</span><span class="c1">-&gt;execute([</span><span class="c3">$target_id</span><span class="c1">]);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$target</span><span class="c1">&nbsp;= </span><span class="c3">$stmt_target</span><span class="c1">-&gt;fetch();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">if</span><span class="c1">&nbsp;(!</span><span class="c3">$target</span><span class="c1">&nbsp;|| </span><span class="c3">$target</span><span class="c1">[</span><span class="c5">&#39;occupied_by&#39;</span><span class="c1">] != </span><span class="c3">$user_id</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">throw</span><span class="c1">&nbsp;</span><span class="c10 c7">new</span><span class="c1">&nbsp;</span><span class="c11 c7">Exception</span><span class="c1">(</span><span class="c5">&quot;You are not occupying this player.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_update</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;UPDATE users SET occupied_by = NULL WHERE id = ?&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_update</span><span class="c1">-&gt;execute([</span><span class="c3">$target_id</span><span class="c1">]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_log</span><span class="c1">&nbsp;= </span><span class="c3">$pdo</span><span class="c1">-&gt;prepare(</span><span class="c5">&quot;INSERT INTO occupation_history (occupier_id, occupied_id, action) VALUES (?, ?, &#39;liberate&#39;)&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$stmt_log</span><span class="c1">-&gt;execute([</span><span class="c3">$user_id</span><span class="c1">, </span><span class="c3">$target_id</span><span class="c1">]);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$user_id</span><span class="c1">, </span><span class="c5">&#39;liberate&#39;</span><span class="c1">, </span><span class="c5">&quot;You have liberated player </span><span class="c1 c7">{$target[&#39;username&#39;]}</span><span class="c5">.&quot;</span><span class="c1">);<br> &nbsp; &nbsp; &nbsp; &nbsp;log_action(</span><span class="c3">$pdo</span><span class="c1">, </span><span class="c3">$target_id</span><span class="c1">, </span><span class="c5">&#39;liberated&#39;</span><span class="c1">, </span><span class="c5">&quot;You have been liberated.&quot;</span><span class="c1">);<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;commit();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">true</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c5">&quot;You have liberated </span><span class="c1 c7">{$target[&#39;username&#39;]}</span><span class="c5">.&quot;</span><span class="c1">];<br> &nbsp; &nbsp;} </span><span class="c10 c7">catch</span><span class="c1">(</span><span class="c11 c7">Exception</span><span class="c1">&nbsp;</span><span class="c3">$e</span><span class="c1">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">$pdo</span><span class="c1">-&gt;rollBack();<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c10 c7">return</span><span class="c1">&nbsp;[</span><span class="c5">&#39;success&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c0">false</span><span class="c1">, </span><span class="c5">&#39;message&#39;</span><span class="c1">&nbsp;=&gt; </span><span class="c3">$e</span><span class="c1">-&gt;getMessage()];<br> &nbsp; &nbsp;}<br>}<br><br></span><span class="c11 c7">?&gt;</span><span class="c8 c39"><br></span></p><p class="c30"><span class="c8 c39"></span></p><h3 class="c12"><span class="c29">3. database.sql</span></h3><p class="c30"><span class="c28 c32"></span></p><p class="c30 c31"><span class="c28 c32"></span></p><p class="c40 c31"><span class="c35 c28">SQL</span></p><p class="c18"><span class="c35 c28"></span></p><p class="c18"><span class="c35 c28"></span></p><p class="c36"><span class="c27 c7">-- Drop tables in the correct order to respect foreign key constraints</span><span class="c1"><br></span><span class="c10 c7">DROP</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;IF </span><span class="c10 c7">EXISTS</span><span class="c1">&nbsp;`transactions`;<br></span><span class="c10 c7">DROP</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;IF </span><span class="c10 c7">EXISTS</span><span class="c1">&nbsp;`market_orders`;<br></span><span class="c10 c7">DROP</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;IF </span><span class="c10 c7">EXISTS</span><span class="c1">&nbsp;`job_offers`;<br></span><span class="c10 c7">DROP</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;IF </span><span class="c10 c7">EXISTS</span><span class="c1">&nbsp;`occupation_history`;<br></span><span class="c10 c7">DROP</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;IF </span><span class="c10 c7">EXISTS</span><span class="c1">&nbsp;`worker_tasks`;<br></span><span class="c10 c7">DROP</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;IF </span><span class="c10 c7">EXISTS</span><span class="c1">&nbsp;`action_logs`;<br></span><span class="c10 c7">DROP</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;IF </span><span class="c10 c7">EXISTS</span><span class="c1">&nbsp;`buildings`;<br></span><span class="c10 c7">DROP</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;IF </span><span class="c10 c7">EXISTS</span><span class="c1">&nbsp;`users`;<br><br></span><span class="c27 c7">-- Create the users table</span><span class="c1"><br></span><span class="c10 c7">CREATE</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;`users` (<br> &nbsp;`id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;AUTO_INCREMENT </span><span class="c10 c7">PRIMARY</span><span class="c1">&nbsp;KEY,<br> &nbsp;`username` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">50</span><span class="c1">) </span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">&nbsp;</span><span class="c10 c7">UNIQUE</span><span class="c1">,<br> &nbsp;`password` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">255</span><span class="c1">) </span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`email` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">100</span><span class="c1">) </span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">&nbsp;</span><span class="c10 c7">UNIQUE</span><span class="c1">,<br> &nbsp;`nano_wallet_address` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">65</span><span class="c1">),<br> &nbsp;`nano_unearned_balance` </span><span class="c10 c7">DOUBLE</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c0">0</span><span class="c1">,<br> &nbsp;`nano_earned_balance` </span><span class="c10 c7">DOUBLE</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c0">0</span><span class="c1">,<br> &nbsp;`wood` </span><span class="c10 c7">FLOAT</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c0">10</span><span class="c1">,<br> &nbsp;`iron` </span><span class="c10 c7">FLOAT</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c0">10</span><span class="c1">,<br> &nbsp;`stone` </span><span class="c10 c7">FLOAT</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c0">10</span><span class="c1">,<br> &nbsp;`sword` </span><span class="c10 c7">FLOAT</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c0">0</span><span class="c1">,<br> &nbsp;`soldiers` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c0">0</span><span class="c1">,<br> &nbsp;`workers` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c0">1</span><span class="c1">,<br> &nbsp;`occupied_by` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`referrer_id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`created_at` </span><span class="c10 c7">TIMESTAMP</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c11 c7">CURRENT_TIMESTAMP</span><span class="c1">,<br> &nbsp;</span><span class="c10 c7">FOREIGN</span><span class="c1">&nbsp;KEY (`occupied_by`) </span><span class="c10 c7">REFERENCES</span><span class="c1">&nbsp;`users`(`id`) </span><span class="c10 c7">ON</span><span class="c1">&nbsp;</span><span class="c10 c7">DELETE</span><span class="c1">&nbsp;</span><span class="c10 c7">SET</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;</span><span class="c10 c7">FOREIGN</span><span class="c1">&nbsp;KEY (`referrer_id`) </span><span class="c10 c7">REFERENCES</span><span class="c1">&nbsp;`users`(`id`) </span><span class="c10 c7">ON</span><span class="c1">&nbsp;</span><span class="c10 c7">DELETE</span><span class="c1">&nbsp;</span><span class="c10 c7">SET</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1"><br>) ENGINE</span><span class="c1 c7">=</span><span class="c1">InnoDB;<br><br></span><span class="c27 c7">-- Create the buildings table</span><span class="c1"><br></span><span class="c10 c7">CREATE</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;`buildings` (<br> &nbsp;`id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;AUTO_INCREMENT </span><span class="c10 c7">PRIMARY</span><span class="c1">&nbsp;KEY,<br> &nbsp;`user_id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`building_type` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">50</span><span class="c1">) </span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`level` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c0">0</span><span class="c1">,<br> &nbsp;</span><span class="c10 c7">UNIQUE</span><span class="c1">(`user_id`, `building_type`),<br> &nbsp;</span><span class="c10 c7">FOREIGN</span><span class="c1">&nbsp;KEY (`user_id`) </span><span class="c10 c7">REFERENCES</span><span class="c1">&nbsp;`users`(`id`) </span><span class="c10 c7">ON</span><span class="c1">&nbsp;</span><span class="c10 c7">DELETE</span><span class="c1">&nbsp;CASCADE<br>) ENGINE</span><span class="c1 c7">=</span><span class="c1">InnoDB;<br><br></span><span class="c27 c7">-- Create the action_logs table</span><span class="c1"><br></span><span class="c10 c7">CREATE</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;`action_logs` (<br> &nbsp;`id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;AUTO_INCREMENT </span><span class="c10 c7">PRIMARY</span><span class="c1">&nbsp;KEY,<br> &nbsp;`user_id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`action_type` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">100</span><span class="c1">) </span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`description` TEXT,<br> &nbsp;`</span><span class="c10 c7">timestamp</span><span class="c1">` </span><span class="c10 c7">TIMESTAMP</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c11 c7">CURRENT_TIMESTAMP</span><span class="c1">,<br> &nbsp;</span><span class="c10 c7">FOREIGN</span><span class="c1">&nbsp;KEY (`user_id`) </span><span class="c10 c7">REFERENCES</span><span class="c1">&nbsp;`users`(`id`) </span><span class="c10 c7">ON</span><span class="c1">&nbsp;</span><span class="c10 c7">DELETE</span><span class="c1">&nbsp;CASCADE<br>) ENGINE</span><span class="c1 c7">=</span><span class="c1">InnoDB;<br><br></span><span class="c27 c7">-- Create the worker_tasks table</span><span class="c1"><br></span><span class="c10 c7">CREATE</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;`worker_tasks` (<br> &nbsp;`id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;AUTO_INCREMENT </span><span class="c10 c7">PRIMARY</span><span class="c1">&nbsp;KEY,<br> &nbsp;`user_id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`worker_id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`task_type` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">100</span><span class="c1">) </span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`completion_time` </span><span class="c10 c7">TIMESTAMP</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`job_offer_id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;</span><span class="c10 c7">UNIQUE</span><span class="c1">(`user_id`, `worker_id`),<br> &nbsp;</span><span class="c10 c7">FOREIGN</span><span class="c1">&nbsp;KEY (`user_id`) </span><span class="c10 c7">REFERENCES</span><span class="c1">&nbsp;`users`(`id`) </span><span class="c10 c7">ON</span><span class="c1">&nbsp;</span><span class="c10 c7">DELETE</span><span class="c1">&nbsp;CASCADE<br>) ENGINE</span><span class="c1 c7">=</span><span class="c1">InnoDB;<br><br></span><span class="c27 c7">-- Create the occupation_history table</span><span class="c1"><br></span><span class="c10 c7">CREATE</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;`occupation_history` (<br> &nbsp;`id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;AUTO_INCREMENT </span><span class="c10 c7">PRIMARY</span><span class="c1">&nbsp;KEY,<br> &nbsp;`occupier_id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`occupied_id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`action` ENUM(</span><span class="c5">&#39;conquer&#39;</span><span class="c1">, </span><span class="c5">&#39;liberate&#39;</span><span class="c1">) </span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`</span><span class="c10 c7">timestamp</span><span class="c1">` </span><span class="c10 c7">TIMESTAMP</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c11 c7">CURRENT_TIMESTAMP</span><span class="c1">,<br> &nbsp;</span><span class="c10 c7">FOREIGN</span><span class="c1">&nbsp;KEY (`occupier_id`) </span><span class="c10 c7">REFERENCES</span><span class="c1">&nbsp;`users`(`id`) </span><span class="c10 c7">ON</span><span class="c1">&nbsp;</span><span class="c10 c7">DELETE</span><span class="c1">&nbsp;CASCADE,<br> &nbsp;</span><span class="c10 c7">FOREIGN</span><span class="c1">&nbsp;KEY (`occupied_id`) </span><span class="c10 c7">REFERENCES</span><span class="c1">&nbsp;`users`(`id`) </span><span class="c10 c7">ON</span><span class="c1">&nbsp;</span><span class="c10 c7">DELETE</span><span class="c1">&nbsp;CASCADE<br>) ENGINE</span><span class="c1 c7">=</span><span class="c1">InnoDB;<br><br></span><span class="c27 c7">-- Create the job_offers table</span><span class="c1"><br></span><span class="c10 c7">CREATE</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;`job_offers` (<br> &nbsp;`id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;AUTO_INCREMENT </span><span class="c10 c7">PRIMARY</span><span class="c1">&nbsp;KEY,<br> &nbsp;`employer_id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`item_to_produce` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">50</span><span class="c1">) </span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`quantity` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`salary` </span><span class="c10 c7">DOUBLE</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`created_at` </span><span class="c10 c7">TIMESTAMP</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c11 c7">CURRENT_TIMESTAMP</span><span class="c1">,<br> &nbsp;`status` ENUM(</span><span class="c5">&#39;open&#39;</span><span class="c1">, </span><span class="c5">&#39;taken&#39;</span><span class="c1">, </span><span class="c5">&#39;completed&#39;</span><span class="c1">) </span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c5">&#39;open&#39;</span><span class="c1">,<br> &nbsp;</span><span class="c10 c7">FOREIGN</span><span class="c1">&nbsp;KEY (`employer_id`) </span><span class="c10 c7">REFERENCES</span><span class="c1">&nbsp;`users`(`id`) </span><span class="c10 c7">ON</span><span class="c1">&nbsp;</span><span class="c10 c7">DELETE</span><span class="c1">&nbsp;CASCADE<br>) ENGINE</span><span class="c1 c7">=</span><span class="c1">InnoDB;<br><br></span><span class="c27 c7">-- Create the market_orders table</span><span class="c1"><br></span><span class="c10 c7">CREATE</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;`market_orders` (<br> &nbsp;`id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;AUTO_INCREMENT </span><span class="c10 c7">PRIMARY</span><span class="c1">&nbsp;KEY,<br> &nbsp;`user_id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`order_type` ENUM(</span><span class="c5">&#39;buy&#39;</span><span class="c1">, </span><span class="c5">&#39;sell&#39;</span><span class="c1">) </span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`item_type` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">50</span><span class="c1">) </span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`quantity` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`price` </span><span class="c10 c7">DOUBLE</span><span class="c1">&nbsp;</span><span class="c10 c7">NOT</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1">,<br> &nbsp;`created_at` </span><span class="c10 c7">TIMESTAMP</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c11 c7">CURRENT_TIMESTAMP</span><span class="c1">,<br> &nbsp;</span><span class="c10 c7">FOREIGN</span><span class="c1">&nbsp;KEY (`user_id`) </span><span class="c10 c7">REFERENCES</span><span class="c1">&nbsp;`users`(`id`) </span><span class="c10 c7">ON</span><span class="c1">&nbsp;</span><span class="c10 c7">DELETE</span><span class="c1">&nbsp;CASCADE<br>) ENGINE</span><span class="c1 c7">=</span><span class="c1">InnoDB;<br><br></span><span class="c27 c7">-- Create the transactions table</span><span class="c1"><br></span><span class="c10 c7">CREATE</span><span class="c1">&nbsp;</span><span class="c10 c7">TABLE</span><span class="c1">&nbsp;`transactions` (<br> &nbsp;`id` </span><span class="c10 c7">INT</span><span class="c1">&nbsp;AUTO_INCREMENT </span><span class="c10 c7">PRIMARY</span><span class="c1">&nbsp;KEY,<br> &nbsp;`user_id` </span><span class="c10 c7">INT</span><span class="c1">,<br> &nbsp;`type` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">50</span><span class="c1">),<br> &nbsp;`description` TEXT,<br> &nbsp;`amount` </span><span class="c10 c7">DOUBLE</span><span class="c1">,<br> &nbsp;`currency` </span><span class="c10 c7">VARCHAR</span><span class="c1">(</span><span class="c0">20</span><span class="c1">) </span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c5">&#39;Nano&#39;</span><span class="c1">,<br> &nbsp;`</span><span class="c10 c7">timestamp</span><span class="c1">` </span><span class="c10 c7">TIMESTAMP</span><span class="c1">&nbsp;</span><span class="c10 c7">DEFAULT</span><span class="c1">&nbsp;</span><span class="c11 c7">CURRENT_TIMESTAMP</span><span class="c1">,<br> &nbsp;</span><span class="c10 c7">FOREIGN</span><span class="c1">&nbsp;KEY (`user_id`) </span><span class="c10 c7">REFERENCES</span><span class="c1">&nbsp;`users`(`id`) </span><span class="c10 c7">ON</span><span class="c1">&nbsp;</span><span class="c10 c7">DELETE</span><span class="c1">&nbsp;</span><span class="c10 c7">SET</span><span class="c1">&nbsp;</span><span class="c10 c7">NULL</span><span class="c1"><br>) ENGINE</span><span class="c1 c7">=</span><span class="c1">InnoDB;<br><br></span><span class="c27 c7">-- Insert Government User (user_id = 1)</span><span class="c1"><br></span><span class="c10 c7">INSERT</span><span class="c1">&nbsp;</span><span class="c10 c7">INTO</span><span class="c1">&nbsp;`users` (`id`, `username`, `password`, `email`) </span><span class="c10 c7">VALUES</span><span class="c1">&nbsp;(</span><span class="c0">1</span><span class="c1">, </span><span class="c5">&#39;government&#39;</span><span class="c1">, </span><span class="c5">&#39;immutable&#39;</span><span class="c1">, </span><span class="c5">&#39;gov@nano.game&#39;</span><span class="c8 c39">);<br></span></p><p class="c23"><span class="c22">Sources</span></p><p class="c23"><span>1. </span><span class="c33"><a class="c48" href="https://www.google.com/url?q=https://github.com/AliceLzz/web-features&amp;sa=D&amp;source=editors&amp;ust=1762100254348933&amp;usg=AOvVaw34qkTy93B-m8bgKSuAfh-L">https://github.com/AliceLzz/web-features</a></span></p></body></html>